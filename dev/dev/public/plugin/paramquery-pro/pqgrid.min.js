/**
 * ParamQuery Pro
 * 
 * Copyright (c) 2012-2015 Paramvir Dhindsa (http://paramquery.com)
 * Released under Evaluation license
 * http://paramquery.com/pro/license/evaluate
 * 
 */
(function(f){var k=f.paramquery=f.paramquery||{};f.paramquery.pqgrid=f.paramquery.pqgrid||{};k.xmlToArray=function(m,b){var c=b.itemParent,a=b.itemNames,e=[];f(m).find(c).each(function(b,d){var c=f(d),l=[];f(a).each(function(a,b){l.push(c.find(b).text().replace(/\r|\n|\t/g,""))});e.push(l)});return e};k.xmlToJson=function(m,b){var c=b.itemParent,a=b.itemNames,e=[];f(m).find(c).each(function(b,d){for(var c=f(d),l={},n=0,s=a.length;n<s;n++){var m=a[n];l[m]=c.find(m).text().replace(/\r|\n|\t/g,"")}e.push(l)});
return e};k.tableToArray=function(m){var b=[],c=[];m=f(m).children("tbody").children("tr");var a=m.length?f(m[0]):f(),e=1<m.length?f(m[1]):f();a.children("th,td").each(function(a,d){var c=f(d),l=c.html(),c=c.width(),n="left";if(e.length)var s=e.find("td:eq("+a+")").attr("align"),n=s?s:n;b.push({title:l,width:c,dataType:"string",align:n,dataIndx:a})});m.each(function(a,b){if(0!=a){var e=[];f(b).children("td").each(function(a,b){e.push(f.trim(f(b).html()))});c.push(e)}});return{data:c,colModel:b}};
k.formatCurrency=function(f){if(isNaN(f))return f;f=Math.round(100*f)/100;f+="";-1==f.indexOf(".")?f+=".00":f.indexOf(".")+2==f.length&&(f+="0");var b=f.length,c=f.substring(0,b-3);f=f.substring(b-3,b);for(var c=c.match(/\d/g).reverse(),b=[],a=0;a<c.length;a++)0<a&&0==a%3&&b.push(","),b.push(c[a]);b=b.reverse();c=b.join("");return c+f};k.validation={is:function(f,b){if("string"==f||!f)return!0;f=f.substring(0,1).toUpperCase()+f.substring(1,f.length);return this["is"+f](b)},isFloat:function(f){var b=
parseFloat(f);return isNaN(b)||b!=f?!1:!0},isInteger:function(f){var b=parseInt(f);return isNaN(b)||b!=f?!1:!0},isDate:function(f){f=Date.parse(f);return isNaN(f)?!1:!0}}})(jQuery);
(function(f){function k(a,b,c){return a?f("<span tabindex='0' rel='tooltip' data-placement='top' title='"+b+"' class='panel panel-default "+c+"'></span>"):f("<span class='pq-ui-button ui-widget-header' tabindex='0' rel='tooltip' title='"+b+"'><span class='ui-icon ui-icon-"+c+"'></span></span>")}function m(a,b){a.bind("click keydown",function(a){if("keydown"!=a.type||a.keyCode==f.ui.keyCode.ENTER)return b.call(this,a)})}function b(a,b,c){b[c?"addClass":"removeClass"]("disabled").css("pointer-events",
c?"none":"").attr("tabindex",c?"":"0")}var c={options:{bootstrap:{on:!1,pager:"panel panel-default",nextIcon:"glyphicon glyphicon-forward",prevIcon:"glyphicon glyphicon-backward",firstIcon:"glyphicon glyphicon-step-backward",lastIcon:"glyphicon glyphicon-step-forward",refreshIcon:"glyphicon glyphicon-refresh"},curPage:0,totalPages:0,totalRecords:0,msg:"",rPPOptions:[10,20,30,40,50,100],rPP:20},_regional:{strDisplay:"Displaying {0} to {1} of {2} items.",strFirstPage:"First Page",strLastPage:"Last Page",
strNextPage:"Next Page",strPage:"Page {0} of {1}",strPrevPage:"Previous Page",strRefresh:"Refresh",strRpp:"Records per page:{0}"}};f.extend(c.options,c._regional);c._create=function(){var a=this,b=this.options,c=b.bootstrap,d=c.on;this.element.addClass("pq-pager "+(d?c.pager:""));this.first=k(d,b.strFirstPage,d?c.firstIcon:"seek-first").appendTo(this.element);m(this.first,function(b){1<a.options.curPage&&a._onChange(b,1)});this.prev=k(d,b.strPrevPage,d?c.prevIcon:"seek-prev").appendTo(this.element);
m(this.prev,function(b){1<a.options.curPage&&a._onChange(b,a.options.curPage-1)});f("<span class='pq-separator'></span>").appendTo(this.element);this.pageHolder=f("<span class='pq-page-placeholder'></span>").appendTo(this.element);f("<span class='pq-separator'></span>").appendTo(this.element);this.next=k(d,b.strNextPage,d?c.nextIcon:"seek-next").appendTo(this.element);m(this.next,function(b){a.options.curPage<a.options.totalPages&&a._onChange(b,a.options.curPage+1)});this.last=k(d,b.strLastPage,d?
c.lastIcon:"seek-end").appendTo(this.element);m(this.last,function(b){a.options.curPage!==a.options.totalPages&&a._onChange(b,a.options.totalPages)});f("<span class='pq-separator'></span>").appendTo(this.element);this.rPPHolder=f("<span class='pq-page-placeholder'></span>").appendTo(this.element);this.$refresh=k(d,b.strRefresh,d?c.refreshIcon:"refresh").appendTo(this.element);m(this.$refresh,function(b){if(!1===a._trigger("beforeRefresh",b))return!1;a._trigger("refresh",b)});f("<span class='pq-separator'></span>").appendTo(this.element);
this.$msg=f("<span class='pq-pager-msg'></span>").appendTo(this.element);this._refresh()};c._refreshPage=function(){var a=this;this.pageHolder.empty();for(var b=this.options,c=b.strPage.split(" "),d=[],h=0,l=c.length;h<l;h++){var n=c[h];"{0}"==n?d.push("<input type='text' tabindex='0' class='ui-corner-all' />"):"{1}"==n?d.push("<span class='total'></span>"):d.push("<span>",n,"</span>")}c=d.join("");c=f(c).appendTo(this.pageHolder);this.page=c.filter("input").bind("change",function(d){var c=f(this),
p=c.val();if(isNaN(p)||1>p)return c.val(b.curPage),!1;p=parseInt(p);if(p>b.totalPages||!1===a._onChange(d,p))return c.val(b.curPage),!1});this.$total=c.filter("span.total")};c._onChange=function(a,b){if(!1===this._trigger("beforeChange",a,{curPage:b})||!1===this._trigger("change",a,{curPage:b}))return!1;this.option({curPage:b})};c._refresh=function(){this._refreshPage();var a=this,e=this.options;this.rPPHolder.empty();if(e.strRpp){var c=e.rPPOptions,d=e.strRpp;if(-1!=d.indexOf("{0}")){for(var h=["<select class='ui-corner-all'>"],
l=0,n=c.length;l<n;l++){var s=c[l];h.push('<option value="',s,'">',s,"</option>")}h.push("</select>");c=h.join("");d=d.replace("{0}","</span>"+c);d="<span>"+d+"<span class='pq-separator'></span>"}else d="<span>"+d+"</span><span class='pq-separator'></span>";this.$rPP=f(d).appendTo(this.rPPHolder).filter("select").val(e.rPP).change(function(b){var p=f(this),u=p.val();if(!1===a._trigger("beforeChange",b,{rPP:u}))return p.val(a.options.rPP),!1;!1!==a._trigger("change",b,{rPP:u})&&(a.options.rPP=u)})}d=
e.bootstrap.on;c=e.curPage>=e.totalPages;b(d,this.next,c);b(d,this.last,c);c=1>=e.curPage;b(d,this.first,c);b(d,this.prev,c);this.page.val(e.curPage);this.$total.text(e.totalPages);0<this.options.totalRecords?(d=e.rPP,c=e.curPage,h=e.totalRecords,l=c*d,l>h&&(l=h),e=e.strDisplay,e=e.replace("{0}",(c-1)*d+1),e=e.replace("{1}",l),e=e.replace("{2}",h),this.$msg.html(e)):this.$msg.html("")};c._destroy=function(){this.element.empty().removeClass("pq-pager").enableSelection()};c._setOption=function(a,b){if("curPage"==
a||"totalPages"==a)b=parseInt(b);this._super.call(this,a,b)};c._setOptions=function(){this._super.apply(this,arguments);this._refresh()};f.widget("paramquery.pqPager",c);f.paramquery.pqPager.regional={};f.paramquery.pqPager.regional.en=c._regional})(jQuery);
(function(f){function k(f,b){return f?"<div class='"+b+"'></div>":"<div class='ui-icon ui-icon-"+b+"'></div>"}f.widget("paramquery.pqScrollBar",{options:{length:200,num_eles:3,cur_pos:0,ratio:0,timeout:350,pace:"optimum",direction:"vertical",bootstrap:{on:!1,slider:"btn btn-default",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",left:"glyphicon glyphicon-chevron-left",right:"glyphicon glyphicon-chevron-right"},theme:!1},_destroy:function(){f(document).off("."+this.eventNamespace);
this.element.removeClass("pq-sb pq-sb-vert pq-sb-vert-t pq-sb-vert-wt").enableSelection().removeClass("pq-sb-horiz pq-sb-horiz-t pq-sb-horiz-wt").unbind("click.pq-scrollbar").empty();this.element.removeData()},_create:function(){this._createLayout()},_createLayout:function(){var m=this,b=this.options,c=b.bootstrap,a=c.on,e=b.direction,g=this.eventNamespace,d=b.theme,h=this.element.empty();"vertical"==e?(h.removeClass("pq-sb-vert-t pq-sb-vert-wt").addClass("pq-sb pq-sb-vert"),d?(h.addClass("pq-sb-vert-t"),
h[0].innerHTML=["<div class='top-btn pq-sb-btn ui-state-default ui-corner-top'>",k(a,a?c.up:"triangle-1-n"),"</div><div class='pq-sb-slider ui-corner-all ui-state-default ",a?c.slider:"","'></div><div class='bottom-btn pq-sb-btn ui-state-default ui-corner-bottom'>",k(a,a?c.down:"triangle-1-s"),"</div>"].join("")):(h.addClass("pq-sb-vert-wt"),h[0].innerHTML="<div class='top-btn pq-sb-btn'></div><div class='pq-sb-slider'><div class='vert-slider-top'></div><div class='vert-slider-bg'></div><div class='vert-slider-center'></div><div class='vert-slider-bg'></div><div class='vert-slider-bottom'></div></div><div class='bottom-btn pq-sb-btn'></div>")):
(h.removeClass("pq-sb-horiz-t pq-sb-horiz-wt").addClass("pq-sb pq-sb-horiz"),d?(h.addClass("pq-sb-horiz-t"),h[0].innerHTML=["<div class='left-btn pq-sb-btn ui-state-default ui-corner-left'>",k(a,a?c.left:"triangle-1-w"),"</div><div class='pq-sb-slider pq-sb-slider-h ui-state-default ui-corner-all ",a?c.slider:"","'></div><div class='right-btn pq-sb-btn ui-state-default ui-corner-right'>",k(a,a?c.right:"triangle-1-e"),"</div>"].join("")):(h.addClass("pq-sb-horiz-wt"),h.width(this.width),h[0].innerHTML=
"<div class='left-btn pq-sb-btn'></div><div class='pq-sb-slider pq-sb-slider-h'><span class='horiz-slider-left'></span><span class='horiz-slider-bg'></span><span class='horiz-slider-center'></span><span class='horiz-slider-bg'></span><span class='horiz-slider-right'></span></div><div class='right-btn pq-sb-btn'></div>"));h.disableSelection().unbind(".pq-scrollbar").on("mousedown.pq-scrollbar",function(a){if(!b.disabled&&!m.$slider.is(":hidden"))if(f(document).off("."+g).on("mouseup."+g,function(p){m._mouseup(p)}),
"vertical"==e){var d=a.pageY,c=m.element.offset().top,h=c+b.length,p=m.$slider,u=p.offset().top,q=p.height(),r=u+q;d<u&&d>c+17?m.mousedownInterval=window.setInterval(function(){d>=p.offset().top?(window.clearInterval(m.mousedownInterval),m.mousedownInterval=null):m._pageUp(a)},0):d>r&&d<h-17&&(m.mousedownInterval=window.setInterval(function(){d<=p.offset().top+q?(window.clearInterval(m.mousedownInterval),m.mousedownInterval=null):m._pageDown(a)},0))}else{var t=a.pageX,c=m.element.offset().left,h=
c+b.length,u=m.$slider.offset().left,r=u+m.$slider.width();t<u&&t>c+17?(m.$slider.css("left",t-m.element.offset().left),m._updateCurPosAndTrigger(a)):t>r&&t<h-17&&(m.$slider.css("left",t-m.element.offset().left-m.$slider.width()),m._updateCurPosAndTrigger(a))}});c=this.$slider=f("div.pq-sb-slider",this.element);d&&c.attr("tabindex","0");this._bindSliderEvents(c);this.$top_btn=f("div.top-btn,div.left-btn",this.element).click(function(a){if(!m.options.disabled)return m.decr_cur_pos(a),a.preventDefault(),
!1}).mousedown(function(a){m.options.disabled||(m.mousedownTimeout=window.setTimeout(function(){m.mousedownInterval=window.setInterval(function(){m.decr_cur_pos(a)},0)},m.options.timeout))}).bind("mouseup mouseout",function(a){m._mouseup(a)});this.$bottom_btn=f("div.bottom-btn,div.right-btn",this.element).click(function(a){if(!m.options.disabled)return m.incr_cur_pos(a),a.preventDefault(),!1}).mousedown(function(a){m.options.disabled||(m.mousedownTimeout=window.setTimeout(function(){m.mousedownInterval=
window.setInterval(function(){m.incr_cur_pos(a)},0)},m.options.timeout))}).bind("mouseup mouseout",function(a){m._mouseup(a)});this.refresh()},_bindSliderEvents:function(m){var b=this,c="x";"vertical"==this.options.direction&&(c="y");m.draggable({axis:c,helper:function(a,c){b._setDragLimits();return this},start:function(a){b.topWhileDrag=null;b.dragging=!0},drag:function(a){b.dragging=!0;var c=b.options.pace;"optimum"==c?b._setNormalPace(a):"fast"==c&&b._updateCurPosAndTrigger(a)},stop:function(a){"fast"!=
b.options.pace&&b._updateCurPosAndTrigger(a);b.dragging=!1;b.refresh()}}).on("keydown.pq-scrollbar",function(a){var c=a.keyCode,g=b.options,d=g.cur_pos,h=g.ratio,l=g.num_eles,n=f.ui.keyCode;null==b.keydownTimeout&&(b.keydownTimeout=window.setTimeout(function(){c==n.DOWN||c==n.RIGHT?b.incr_cur_pos(a):c==n.UP||c==n.LEFT?b.decr_cur_pos(a):c==n.HOME?g.steps?0<d&&(g.cur_pos=0,b.updateSliderPos(),b.scroll(a)):0<h&&(g.ratio=0,b.updateSliderPos(),b.drag(a)):c==n.END?g.steps?d<l&&(g.cur_pos=l,b.updateSliderPos(),
b.scroll(a)):1>h&&(g.ratio=1,b.updateSliderPos(),b.drag(a)):"vertical"==g.direction&&(c==n.PAGE_DOWN?b._pageDown(a):c==n.PAGE_UP&&b._pageUp(a));b.keydownTimeout=null},0));if(c==n.DOWN||c==n.RIGHT||c==n.UP||c==n.LEFT||c==n.PAGE_DOWN||c==n.PAGE_UP||c==n.HOME||c==n.END)return a.preventDefault(),!1})},decr_cur_pos:function(f){var b=this.options;if(b.steps)0<b.cur_pos&&(b.cur_pos--,this.updateSliderPos(),this.scroll(f));else if(0<b.ratio){var c=b.ratio-1/(b.num_eles-1);0>c&&(c=0);b.ratio=c;this.updateSliderPos();
this.drag(f)}},incr_cur_pos:function(f){var b=this.options;if(b.steps)b.cur_pos<b.num_eles-1&&b.cur_pos++,this.updateSliderPos(),this.scroll(f);else{if(1>b.ratio){var c=b.ratio+1/(b.num_eles-1);1<c&&(c=1);b.ratio=c}this.updateSliderPos();this.drag(f)}},_mouseup:function(f){this.options.disabled||(window.clearTimeout(this.mousedownTimeout),this.mousedownTimeout=null,window.clearInterval(this.mousedownInterval),this.mousedownInterval=null)},_setDragLimits:function(){var f=this.options;if("vertical"==
f.direction){var b=this.element.offset().top+17,f=b+f.length-34-this.slider_length;this.$slider.draggable("option","containment",[0,b,0,f])}else b=this.element.offset().left+17,f=b+f.length-34-this.slider_length,this.$slider.draggable("option","containment",[b,0,f,0])},refresh:function(){var f=this.options,b=this.element;1>=f.num_eles?b.css("display","none"):(b.css("display",""),this._validateCurPos(),this.dragging||(b["vertical"===f.direction?"height":"width"](f.length),this._setSliderBgLength(),
4>this.scroll_space||1>=f.num_eles?this.$slider.css("display","none"):this.$slider.css("display","")),this.updateSliderPos())},_setSliderBgLength:function(){var m=this.options,b=m.theme,c=this.$slider,a=m.length,a=Math.round(((a-34)*a/(40*m.num_eles+a)-14)/2);1>a&&(a=1);var e=14+2*a;this.scroll_space=m.length-34-e;if(e!==this.slider_length)if(this.slider_length=e,m="vertical"===m.direction?{dim:"height",cls:".vert-slider-bg"}:{dim:"width",cls:".horiz-slider-bg"},b)c[m.dim](e-2);else f(m.cls,this.element)[m.dim](a),
c[m.dim](e)},_updateCurPosAndTrigger:function(f,b){var c=this.options,a=c.direction,e=this.$slider;null==b&&(b=parseInt(e[0].style["vertical"===a?"top":"left"]));a=(b-17)/(c.length-34-this.slider_length);if(c.steps){if(a*=c.num_eles-1,a=Math.round(a),c.cur_pos!=a){if(this.dragging){if(null!=this.topWhileDrag&&(this.topWhileDrag<b&&c.cur_pos>a||this.topWhileDrag>b&&c.cur_pos<a))return;this.topWhileDrag=b}this.options.cur_pos=a;this.scroll(f)}}else c.ratio=a,this.drag(f)},_setNormalPace:function(f){this.timer&&
(window.clearInterval(this.timer),this.timer=null);var b=this,c=this.options.direction;b.timer=window.setInterval(function(){var a=parseInt(b.$slider[0].style["vertical"===c?"top":"left"]);b.prev_top===a&&(b._updateCurPosAndTrigger(f,a),window.clearInterval(b.timer),b.timer=null);b.prev_top=a},20)},_validateCurPos:function(){var f=this.options;f.cur_pos>=f.num_eles&&(f.cur_pos=f.num_eles-1);0>f.cur_pos&&(f.cur_pos=0)},_updateSliderPosRatio:function(){var f=this.options,b=f.direction,c=f.ratio,a=this.$slider,
f=f.length-34-this.slider_length;if(null==c)throw"updateSliderPosRatio ratio N/A";c=c*f+17;"vertical"==b?a.css("top",c):a.css("left",c)},_updateSliderPosCurPos:function(){var f=this.options,b=this.scroll_space*f.cur_pos/(f.num_eles-1);"vertical"==f.direction?this.$slider.css("top",17+b):this.$slider.css("left",17+b)},updateSliderPos:function(){var f=this.options;if(void 0===f.steps)throw"updateSliderPos. steps N/A";f.steps?this._updateSliderPosCurPos():this._updateSliderPosRatio()},scroll:function(f){var b=
this.options;this._trigger("scroll",f,{cur_pos:b.cur_pos,num_eles:b.num_eles})},drag:function(f){this._trigger("drag",f,{ratio:this.options.ratio})},_pageDown:function(f){this._trigger("pageDown",f,null)},_pageUp:function(f){this._trigger("pageUp",f,null)},_setOption:function(f,b){"disabled"==f?(this._super(f,b),!0==b?this.$slider.draggable("disable"):this.$slider.draggable("enable")):"theme"==f?(this._super(f,b),this._createLayout()):"ratio"==f?0<=b&&1>=b&&this._super(f,b):this._super(f,b)},_setOptions:function(){this._super.apply(this,
arguments);this.refresh()}})})(jQuery);
(function(f){f.paramquery=f.paramquery||{};f.paramquery.onResize=function(k,m){var b=f(k);"static"===b.css("position")&&b.css("position","relative");var c=f('<iframe type="text/html" src="about:blank" class="pq-resize-iframe" style="display:block;width:100%;height:100%;position:absolute;top:0;left:0;z-index:-1;overflow: hidden; pointer-events: none;" />').appendTo(b);c[0].data="about:blank";c.css("opacity","0");for(var a=0;a<b.length;a++)f(c[a].contentWindow).on("resize",function(a){m()})}})(jQuery);
(function(f){function k(p){return"<span class='panel panel-default glyphicon glyphicon-"+p+"' ></span>"}function m(p){return"<span class='ui-widget-header pq-ui-button'><span class='ui-icon ui-icon-"+p+"'></span></span>"}function b(p,a,q){var b=q.attr({rowIndxPage:p,colIndx:a,attr:"rowspan"}).attr,c=q.attr({rowIndxPage:p,colIndx:a,attr:"colspan"}).attr;return 1<b||1<c?{rowspan:b,colspan:c}:(p=q.attr({rowIndxPage:p,colIndx:a,attr:"style"}).attr)&&"none"==p.display?!0:!1}function c(p){var a=p.that,
q=p.rowIndx;if(p.select&&q<=a.initV||q>a.pdata.length)return p;p=p.colIndx;var b=a.attr({rowIndx:q,colIndx:p,attr:"data-ref"}).attr;return b&&null!=b.rowIndx?c({rowIndx:b.rowIndx,colIndx:p,that:a}):{rowIndx:q,colIndx:p}}var a=function(){};a.prototype.belongs=function(p){if(p.target==this.that.element[0])return!0};f.paramquery.cClass=a;var e=function(p){this.that=p;this.options=p.options;this.offset=null};f.paramquery.cGenerateView=e;a=e.prototype;a.generateView=function(p){p=p||{};var a=this.that,
q=a.options,b=q.scrollModel.smooth,c="flex"===q.width,d="flex"===q.height,e=q.cls,h=e.cont_inner,e=e.cont_inner_b,g,l,n=a.initH,s=a.finalH,v=q.groupModel,m=a.pqpanes;if(p.$cont)g=this._generateTables(null,null,p),g=g.replace("%style%",""),v=p.$cont,v.empty(),v[0].innerHTML=m.v?["<div class='",h,"'>",g,"</div><div class='",h,"'>",g,"</div>"].join(""):["<div class='",h,"'>",g,"</div>"].join(""),q=v.children("div").children("table"),a.tables[0]={$tbl:q,$cont:v};else{g=a.initV;l=a.finalV;var k=v?a.dataGM:
a.pdata,v=a.$cont;null!=q.editModel.indices&&a.blurEditor({force:!0});n={pageData:k,initV:g,finalV:l,initH:n,finalH:s,source:p.source};a._trigger("beforeTableView",null,n);g=this._generateTables(g,l,p);v.empty();0===a.totalVisibleRows?v.append("<div class='"+h+" pq-grid-norows' >"+q.strNoRows+"</div>"):(p=d||c?"style='position:relative;'":"",c="",q.virtualY&&b&&(c="style='"+a.iMouseSelection.getBorderStyle(!0)+"'"),g=g.replace("%style%",c),v[0].innerHTML=m.h&&m.v?["<div class='",h,"'>",g,"</div><div class='",
h,"'>",g,"</div><div class='",h," ",e,"'>",g,"</div><div class='",h," ",e,"'>",g,"</div>"].join(""):m.v?["<div class='",h,"' ",p," >",g,"</div><div class='",h,"' >",g,"</div>"].join(""):m.h?["<div class='",h,"' style='position:static;' >",g,"</div><div class='",h," ",e,"' style='position:static;' >",g,"</div>"].join(""):["<div class='",h,"' ",p," >",g,"</div>"].join(""));a.$tbl=v.children("div").children("table");if(q.scrollModel.flexContent&&a.$tbl[0])f.paramquery.onResize(a.$tbl[0],function(){var p=
a.iRefresh;p.ignoreTResize||p.softRefresh()});this.setPaneEvents();a._trigger("refresh",null,n)}this.setPanes()};a.scrollView=function(){var p=this.that,a=this.options,q=a.virtualY;a.virtualX||"flex"===a.width||p.$hscroll.pqScrollBar("drag");q||p.$vscroll.pqScrollBar("drag")};a.setPaneEvents=function(){var p=this.that,a=p.pqpanes,q=p.$cont.children("div"),b=p.iMouseSelection;if((p=p.$tbl)&&p.length)if(a.h&&a.v){var a=f(q[0]),p=f(q[1]),c=f(q[2]),q=f(q[3]);a.on("scroll",function(p){this.scrollLeft=
this.scrollTop=0});p.on("scroll",function(p){this.scrollTop=0;this.scrollLeft=b.getScrollLeft(!0)});c.on("scroll",function(p){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=0});q.on("scroll",function(p){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=b.getScrollLeft(!0)})}else if(a.v)a=f(q[0]),q=f(q[1]),a.on("scroll",function(p){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=0}),q.on("scroll",function(p){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=b.getScrollLeft(!0)});else if(a.h)a=
f(q[0]),q=f(q[1]),a.on("scroll",function(p){this.scrollTop=0;this.scrollLeft=b.getScrollLeft(!0)}),q.on("scroll",function(p){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=b.getScrollLeft(!0)});else q.on("scroll",function(p){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=b.getScrollLeft(!0)})};a.setPanes=function(){var p=this.that,a=p.pqpanes,q=p.$cont.children("div"),b=p.iRefresh,c=p.$tbl,d=p.options,e=parseInt(d.freezeCols),h=p.initH,g=v.call(p,-1,e)+1,l="flex"===d.width?"":b.getEContWd();
if(p.tables.length){var n=p.tables[0].$tbl,s=p.tables[0].$cont,m=n.parent("div");a.v?(f(m[0]).css({width:g}),f(m[1]).css({left:g,width:l-g}),f(n[1]).css({left:-1*g})):f(m[0]).css({width:l});s.height(n[0].scrollHeight-1);b.setContHeight()}if(c&&c.length)if(b=b.getEContHt(),a.h&&a.v){var e=f(q[0]),h=f(q[1]),n=f(c[1]),s=f(q[2]),m=f(c[2]),q=f(q[3]),k=f(c[3]),c=p.calcHeightFrozenRows();e.css({width:g,height:c});h.css({left:g,width:l-g,height:c});n.css({left:-1*g});s.css({width:g,top:c,height:b-c});m.css({marginTop:-(c+
1)});q.css({left:g,width:l-g,top:c,height:b-c});k.css({marginTop:-(c+1),left:-1*g})}else a.v?(n=f(q[0]),q=f(q[1]),c=f(c[1]),v.call(p,e,h),n.css({width:g,height:b}),q.css({left:g,width:l-g,height:b}),c.css({left:-1*g})):a.h?(e=f(q[0]),q=f(q[1]),h=f(c[1]),c=p.calcHeightFrozenRows(),e.css({height:c,width:l}),q.css({width:l,top:c,height:b-c}),h.css({marginTop:-(c+1)})):q.css({width:l,height:b});d.showHeader&&(a.vH?(p.$header_left.css({width:g}),p.$header_right.css({left:g,width:l-g}),p.$header_right_inner.css({left:-g})):
p.$header_left.css({width:l}))};a._generateTables=function(p,a,q){q=q||{};var b=this.that,c=b.colModel,d=b.options,e=d.bootstrap,h=d.virtualX,g=b.initH,l=b.finalH,f=d.numberCell,n=d.columnBorders,s=d.rowBorders,v=d.wrap,m=d.groupModel,k=d.freezeCols,d=parseInt(d.freezeRows),I=!1,H=0,L=q.other;a=L?q.data.length-1:a;var K=m?!0:!1;q=L?q.data:K?b.dataGM:b.pdata;var N=b.rowIndxOffset;if(L||null!=p&&null!=a){I=(e.on?e.tbody:"")+" pq-grid-table ";n&&(I+="pq-td-border-right ");s&&(I+="pq-td-border-bottom ");
n=["<table %style% class='"+(v?I+"pq-wrap ":I+"pq-no-wrap ")+"' >"];n.push("<tr class='pq-row-hidden'>");f.show&&(H=f.width,n.push("<td style='width:"+H+"px;' ></td>"));for(I=0;I<=l;I++){if(I<g&&I>=k&&(h||L)&&(I=g,I>l))throw"initH>finalH";H=c[I];H.hidden||(H=H.outerWidth,n.push("<td style='width:",H,"px;' pq-col-indx='",I,"'></td>"))}n.push("</tr>");this.offsetRow=null;for(H=0;H<=a;H++)H<p&&H>=d&&(H=p),h=q[H],g=K?h.rowIndx-N:H,h&&h.pq_hidden||(I=b.lastFrozenRow===g,m&&null!=h.groupTitle?this._generateTitleRow(m,
h,n,I):m&&h.groupSummary?this._generateSummaryRow(m,h,c,n,I):(l=h.pq_detail&&h.pq_detail.show,this._generateRow(h,g,c,n,L,I,l),l&&this._generateDetailRow(h,g,c,n,L,I)));b.scrollMode=!1;n.push("</table>");return n.join("")}};a.readCell=function(p,a){var q=a.dataIndx;if(a.nested){for(var b=p,q=q.split("."),c=0,d=q.length;c<d&&(b=b[q[c]],b);c++);return b}return p[q]};a.saveCell=function(p,a,q){var b=a.dataIndx;if(a.nested){a=b.split(".");for(var b=p,c=0,d=a.length;c<d;c++){var e=a[c];c==d-1?b[e]=q:b=
p[e]=p[e]||{}}}else p[b]=q};a._renderCell=function(p,a){var q=this.options,b=p.rowData,c=p.column,d=c.type,c=this.readCell(b,c);if(b){void 0!=a?q=a:"checkBoxSelection"==d?q="<input type='checkbox' "+(c?"checked='checked'":"")+" />":"detail"==d?(q=q.detailModel,q="<div class='ui-icon "+(c&&c.show?q.expandIcon:q.collapseIcon)+"'></div>"):q=c;if(""===q||void 0==q)q="&nbsp;";return q}};a.renderCell=function(p){var a=this.that,q=this.options,b=p.rowData,c=p.rowIndx,d=p.rowIndxPage,e=p.column,h=p.colIndx,
g=e.dataIndx,l=q.freezeCols,f=q.columnBorders,s="pq-col-indx='"+h+"'",v=!1,m="pq-grid-cell ";"right"==e.align?m+=" pq-align-right":"center"==e.align&&(m+=" pq-align-center");h==l-1&&f&&(m+=" pq-last-frozen-col");(l=e.cls)&&(m=m+" "+l);(l=b.pq_cellselect)&&(v=l[g]);v&&(m+=" pq-state-select ui-state-highlight");var k;e.render&&(k=e.render.call(a.element[0],{data:a.pdata,dataModel:q.dataModel,rowData:b,cellData:b[g],rowIndxPage:d,rowIndx:c,colIndx:h,column:e,dataIndx:g}));(q=b.pq_cellcls)&&(q=q[g])&&
(m+=" "+q);if(b=b.pq_cellattr)if(g=b[g]){var a=n(g,a.initV==d),D;for(D in a)s+=" "+D+'="'+a[D]+'"'}return["<td class='",m,"' ",s," >",this._renderCell(p,k),"</td>"].join("")};a.refreshRow=function(p,a,q){var b=this.that,c=b.pdata[p];this._generateRow(c,p,a,q,null,b.lastFrozenRow===p,c.pq_detail&&c.pq_detail.show)};a._generateRow=function(p,a,q,b,c,d,e){var h="pq-grid-row";d&&(h+=" pq-last-frozen-row");e&&(h+=" pq-detail-master");var g=this.that,l=this.options,f=l.rowInit;d=l.freezeCols;var s=l.numberCell;
e=l.virtualX;var v=g.initH,m=g.finalH,k=this.offset;f&&f.call(g.element[0],{rowData:p,rowIndx:a+k});l.stripeRows&&a/2==parseInt(a/2)&&(h+=" pq-grid-oddRow");p.pq_rowselect&&(h+=" pq-row-select ui-state-highlight");g=p.pq_rowcls;null!=g&&(h+=" "+g);l=p.pq_rowattr;g="";if(l){var l=n(l),D;for(D in l)g+=" "+D+'="'+l[D]+'"'}b.push("<tr pq-row-indx='",a,"' class='",h,"' ",g," >");s.show&&b.push(["<td pq-col-indx='-1' class='pq-grid-number-cell ui-state-default'>",c?"&nbsp;":a+1,"</td>"].join(""));p={rowIndx:a+
k,rowIndxPage:a,rowData:p};for(a=0;a<=m;a++)e&&a<v&&a>=d&&(a=v),c=q[a],c.hidden||(p.column=c,p.colIndx=a,p.tree=!1,b.push(this.renderCell(p)));b.push("</tr>");return b};a={widgetEventPrefix:"pqgrid"};a.options={cancel:"input,textarea,button,select,option,.pq-no-capture,.ui-resizable-handle",bootstrap:{on:!1,thead:"table table-striped table-condensed table-bordered",tbody:"table table-striped table-condensed table-bordered",grid:"panel panel-default"},distance:3,collapsible:{on:!0,toggle:!0,collapsed:!1,
_collapsed:!1,refreshAfterExpand:!0,css:{zIndex:1E3}},colModel:null,columnBorders:!0,dataModel:{cache:!1,dataType:"JSON",location:"local",sorting:"local",sortDir:"up",method:"GET"},direction:"",draggable:!1,editable:!0,editModel:{cellBorderWidth:0,pressToEdit:!0,clicksToEdit:2,filterKeys:!0,keyUpDown:!0,reInt:/^([\-]?[1-9][0-9]*|[\-]?[0-9]?)$/,reFloat:/^[\-]?[0-9]*\.?[0-9]*$/,onBlur:"validate",saveKey:f.ui.keyCode.ENTER,onSave:"next",allowInvalid:!1,invalidClass:"pq-cell-red-tr pq-has-tooltip",warnClass:"pq-cell-blue-tr pq-has-tooltip",
validate:!0},editor:{select:!1,type:"textbox"},validation:{icon:"ui-icon-alert",cls:"ui-state-error",style:"padding:3px 10px;"},warning:{icon:"ui-icon-info",cls:"",style:"padding:3px 10px;"},freezeCols:0,freezeRows:0,calcDataIndxFromColIndx:!0,height:400,hoverMode:"null",_maxColWidth:"100%",_minColWidth:50,minWidth:100,numberCell:{width:30,title:"",resizable:!0,minWidth:30,maxWidth:100,show:!0},pageModel:{curPage:1,totalPages:0,rPP:10,rPPOptions:[10,20,50,100]},resizable:!1,roundCorners:!0,rowBorders:!0,
rowHeight:25,scrollModel:{pace:"fast",smooth:!1,horizontal:!0,lastColumn:"auto",autoFit:!1,theme:!1},selectionModel:{fireSelectChange:!1,type:"cell",mode:"block"},swipeModel:{on:!0,speed:20,ratio:.15,repeat:20},showBottom:!0,showHeader:!0,showTitle:!0,showToolbar:!0,showTop:!0,sortable:!0,sql:!1,stripeRows:!0,title:"&nbsp;",treeModel:null,virtualX:!1,virtualY:!1,width:"auto",wrap:!0,hwrap:!0};a._regional={strAdd:"Add",strDelete:"Delete",strEdit:"Edit",strLoading:"Loading",strNextResult:"Next Result",
strNoRows:"No rows to display.",strNothingFound:"Nothing found",strPrevResult:"Previous Result",strSearch:"Search",strSelectedmatches:"Selected {0} of {1} match(es)"};f.extend(a.options,a._regional);a._destroyResizable=function(){this.element.data("resizable")&&this.element.resizable("destroy")};a._disable=function(){null==this.$disable&&(this.$disable=f("<div class='pq-grid-disable'></div>").css("opacity",.2).appendTo(this.element))};a._enable=function(){this.$disable&&(this.element[0].removeChild(this.$disable[0]),
this.$disable=null)};a._destroy=function(){this.loading&&this.xhr.abort();this._destroyResizable();this._destroyDraggable();this._mouseDestroy();this.element.off(this.eventNamespace);f(window).unbind(this.eventNamespace);f(document).unbind(this.eventNamespace);this.element.empty().css("height","").css("width","").removeClass("pq-grid ui-widget ui-widget-content ui-corner-all").removeData()};a.destroy=function(){this._trigger("destroy");this._super();window.clearInterval(this._refreshEditorPosTimer);
this.autoResizeTimeout&&clearTimeout(this.autoResizeTimeout);for(var p in this)delete this[p];f.fragments={}};a.collapse=function(p){var a=this,q=this.element,b=this.options.collapsible,c=b.$collapse.children("span"),d=function(){q.css("overflow","hidden");c.addClass("ui-icon-circle-triangle-s").removeClass("ui-icon-circle-triangle-n");q.hasClass("ui-resizable")&&q.resizable("destroy");a.$toolbar.pqToolbar("disable");b.collapsed=!0;b._collapsed=!0;b.animating=!1;a._trigger("collapse")};p=p?p:{};if(b._collapsed)return!1;
b.htCapture=q.height();!1===p.animate?(q.height(23),d()):(b.animating=!0,q.animate({height:"23px"},function(){d()}))};a.expand=function(p){var a=this,q=this.element,b=this.options.collapsible,c=b.htCapture,d=b.$collapse.children("span"),e=function(){q.css("overflow","");b._collapsed=!1;b.collapsed=!1;a._refreshResizable();b.refreshAfterExpand&&a.refresh();d.addClass("ui-icon-circle-triangle-n").removeClass("ui-icon-circle-triangle-s");a.$toolbar.pqToolbar("enable");b.animating=!1;a._trigger("expand")};
p=p?p:{};if(!1===b._collapsed)return!1;!1===p.animate?(q.height(c),e()):(b.animating=!0,q.animate({height:c},function(){e()}))};a._createCollapse=function(){var p=this,a=this.$top,q=this.options,b=q.collapsible;b.$stripe||(a=f("<div class='pq-slider-icon pq-no-capture'  ></div>").appendTo(a),b.$stripe=a);b.on?b.$collapse||(b.$collapse=f(q.bootstrap.on?k("collapse-down"):m("circle-triangle-n")).appendTo(b.$stripe).click(function(a){b.collapsed?p.expand():p.collapse()})):b.$collapse&&(b.$collapse.remove(),
delete b.$collapse);b.collapsed&&!b._collapsed?p.collapse({animate:!1}):!b.collapsed&&b._collapsed&&p.expand({animate:!1});b.toggle?b.$toggle||(b.$toggle=f(q.bootstrap.on?k("fullscreen"):m("arrow-4-diag")).prependTo(b.$stripe).click(function(a){p.toggle()})):b.$toggle&&(b.$toggle.remove(),delete b.$toggle)};a._create=function(){var p=this,a=this.options,b=a.dataModel,c=a.bootstrap,d=a.sortModel;a.collapsible||(a.collapsible={on:!1,collapsed:!1});a.flexHeight&&(a.height="flex");a.flexWidth&&(a.width=
"flex");if(b.sortIndx){d.on=a.sortable;d.type=b.sorting;var g=[],l=b.sortIndx,b=b.sortDir;if(f.isArray(l)){for(var n=0;n<l.length;n++){var v=b&&b[n]?b[n]:"up";g.push({dataIndx:l[n],dir:v})}d.single=!1}else g.push({dataIndx:l,dir:b?b:"up"}),d.single=!0;d.sorter=g}!1===a.virtualXHeader&&(a.virtualXHeader=null);this.setEditorPosTimer();this.iGenerateView=new e(this);this.iRefresh=new f.paramquery.cRefresh(this);this.iKeyNav=new s(this);this.iIsValid=new h(this);this.hidearrHS=[];this.tables=[];this.$tbl=
null;this._calcThisColModel();this.iSort=new f.paramquery.cSort(this);this.iHeader=new f.paramquery.cHeader(this);this._initTypeColumns();d=this.element;d.on("scroll"+this.eventNamespace,function(){this.scrollTop=this.scrollLeft=0});d.empty().addClass("pq-grid ui-widget ui-widget-content "+(c.on?c.grid:"")+" "+(a.roundCorners?" ui-corner-all":"")).html(["<div class='pq-grid-top ui-widget-header",a.roundCorners?" ui-corner-top":"","'><div class='pq-grid-title",a.roundCorners?" ui-corner-top":"","'>&nbsp;</div></div><div class='pq-grid-center' ><div class='pq-header-outer ui-widget-header'></div><div class='pq-grid-cont-outer' ><div class='pq-grid-cont' tabindex='0'></div></div></div><div class='pq-grid-bottom ui-widget-header",
a.roundCorners?" ui-corner-bottom":"","'><div class='pq-grid-footer'>&nbsp;</div></div>"].join(""));this._trigger("render",null,{dataModel:this.options.dataModel,colModel:this.colModel});this.$top=f("div.pq-grid-top",d);a.showTop||this.$top.css("display","none");this.$title=f("div.pq-grid-title",d);a.showTitle||this.$title.css("display","none");this.$toolbar=f("div.pq-grid-toolbar",d);c=this.$grid_center=f("div.pq-grid-center",d).on("scroll",function(){this.scrollTop=0});this.$header_o=f("div.pq-header-outer",
this.$grid_center).on("scroll",function(){this.scrollLeft=this.scrollTop=0});this.$bottom=f("div.pq-grid-bottom",d);this.$footer=f("div.pq-grid-footer",d);this.$cont_o=f(".pq-grid-cont-outer",c);d=this.$cont=f("div.pq-grid-cont",c);f(window).bind("resize"+p.eventNamespace+" orientationchange"+p.eventNamespace,function(a,u){p.onWindowResize(a,u)});d.on("click",".pq-grid-cell,.pq-grid-number-cell",function(a){if(!0!==f.data(a.target,p.widgetName+".preventClickEvent")&&f(a.target).closest(".pq-grid")[0]==
p.element[0])return p._onClickCell(a)});d.on("click","tr.pq-grid-row",function(a){if(!0!==f.data(a.target,p.widgetName+".preventClickEvent")&&f(a.target).closest(".pq-grid")[0]==p.element[0])return p._onClickRow(a)});d.on("contextmenu","td.pq-grid-cell",function(a){if(f(a.target).closest(".pq-grid")[0]==p.element[0])return p._onRightClickCell(a)});d.on("contextmenu","tr.pq-grid-row",function(a){if(f(a.target).closest(".pq-grid")[0]==p.element[0])return p._onRightClickRow(a)});d.on("dblclick","td.pq-grid-cell",
function(a){if(f(a.target).closest(".pq-grid")[0]==p.element[0])return p._onDblClickCell(a)});d.on("dblclick","tr.pq-grid-row",function(a){if(f(a.target).closest(".pq-grid")[0]==p.element[0])return p._onDblClickRow(a)});d.on("mousedown","td.pq-grid-cell",function(a){if(f(a.target).closest(".pq-grid")[0]==p.element[0])return p._onCellMouseDown(a)});d.on("mousedown","tr.pq-grid-row",function(a){if(f(a.target).closest(".pq-grid")[0]==p.element[0])return p._onRowMouseDown(a)});d.on("mousedown",function(a){if(f(a.target).closest(".pq-grid")[0]==
p.element[0])return p._onContMouseDown(a)});d.on("mouseenter","td.pq-grid-cell",function(a){if(f(a.target).closest(".pq-grid")[0]==p.element[0])return p._onCellMouseEnter(a,f(this))});d.on("mouseenter","tr.pq-grid-row",function(a){if(f(a.target).closest(".pq-grid")[0]==p.element[0])return p._onRowMouseEnter(a,f(this))});d.on("mouseleave","td.pq-grid-cell",function(a){if(f(a.target).closest(".pq-grid")[0]==p.element[0])return p._onCellMouseLeave(a,f(this))});d.on("mouseleave","tr.pq-grid-row",function(a){if(f(a.target).closest(".pq-grid")[0]==
p.element[0])return p._onRowMouseLeave(a,f(this))});c.bind("mousewheel DOMMouseScroll",function(a){return p._onMouseWheel(a)});this.$hvscroll=f("<div class='pq-hvscroll-square ui-widget-content'></div>").appendTo(c);this.$vscroll=f("<div class='pq-vscroll'></div>").appendTo(c);this.prevVScroll=0;d=a.scrollModel;void 0===d.lastColumn&&a.virtualX&&(d.lastColumn="auto");this.$vscroll.pqScrollBar({pace:d.pace,theme:d.theme,bootstrap:a.bootstrap,steps:a.virtualY&&!d.smooth,direction:"vertical",cur_pos:0,
pageDown:function(a,u){p.iKeyNav.pageDown()},pageUp:function(a,u){p.iKeyNav.pageUp()},drag:function(a,u){p.iMouseSelection.syncViewWithScrollBarVert(u.ratio)},scroll:function(a,u){p.iRefresh.refreshVscroll(u)}});g=this.$hscroll=f("<div class='pq-hscroll'></div>").appendTo(c);"flex"===a.height&&g.css("position","relative");g.pqScrollBar({direction:"horizontal",pace:d.pace,bootstrap:a.bootstrap,theme:d.theme,steps:a.virtualX&&!d.smooth,cur_pos:0,drag:function(a,u){p.iMouseSelection.syncViewWithScrollBarHor(u.ratio)},
scroll:function(b,q){var c=!1===a.virtualXHeader?!1:!0;a.virtualX&&!a.scrollModel.smooth&&p.refresh({header:c})}});a.selectionModel["native"]||this.disableSelection();c.bind("keydown.pq-grid",function(a){f(a.target).closest(".pq-grid")[0]==p.element[0]&&p._onKeyPressDown(a)});this._refreshTitle();this.iRows=new f.paramquery.cRows(this);this.iCells=new f.paramquery.cCells(this);this.generateLoading();this._initPager();this._refreshResizable();this._refreshDraggable();this.iResizeColumns=new f.paramquery.cResizeColumns(this);
this._mouseInit()};a.toggle=function(){var a=this.options,u=a.collapsible,b=this.element,c;c=f(document.body);"fixed"==b.css("position")?(a=this.maxim.eleObj,u=this.maxim.docObj,this.option({height:a.height,width:a.width,maxHeight:a.maxHeight}),b.css({position:a.position,left:a.left,top:a.top,margin:a.margin,zIndex:a.zIndex}),c.css({height:u.height,width:u.width,overflow:u.overflow}),f("html").css({overflow:"visible"}),window.scrollTo(u.scrollLeft,u.scrollTop),c="min"):(a={height:a.height,width:a.width,
position:b.css("position"),left:b.css("left"),top:b.css("top"),margin:b.css("margin"),zIndex:b.css("zIndex"),maxHeight:a.maxHeight},this.option({height:"100%",width:"100%",maxHeight:null}),b.css(f.extend({position:"fixed",left:0,top:0,margin:0},u.css)),u={height:c.height(),width:c.width(),overflow:c.css("overflow"),scrollLeft:f(window).scrollLeft(),scrollTop:f(window).scrollTop()},f(document.body).css({height:0,width:0,overflow:"hidden"}),f("html").css({overflow:"hidden"}),window.scrollTo(0,0),this.maxim=
{eleObj:a,docObj:u},c="max");this._trigger("toggle",null,{state:c});this._refreshResizable();this.refresh();f(window).trigger("resize",{$grid:b,state:c})};a._mouseCapture=function(a){var u=this.options;return u.virtualX&&u.virtualY&&!u.scrollModel.smooth||!a.target?!1:f(a.target).closest(".pq-grid")[0]==this.element[0]?(a=u.swipeModel,!1==a.on||"touch"==a.on&&!f.support.touch?!1:!0):!1};a._saveDims=function(){var a=this.$tbl;if(a)for(var u=0;u<a.length;u++){var b=a[u],c=f(b);c.data("offsetHeight",
Math.round(b.offsetHeight)-1);c.data("scrollWidth",Math.round(b.scrollWidth))}if(a=this.$tbl_header)for(u=0;u<a.length;u++)b=a[u],c=f(b).parent(),c.data("offsetHeight",Math.round(b.offsetHeight)),c.data("scrollWidth",Math.round(b.scrollWidth))};a._mousePQUp=function(a){f(document).unbind("mouseup"+this.eventNamespace,this._mousePQUpDelegate);this._trigger("mousePQUp",a,null)};a._mouseDown=function(a){var u=this;if(f(a.target).closest(".pq-editor-focus").length)this._blurEditMode=!0,window.setTimeout(function(){u._blurEditMode=
!1},0);else return this._saveDims(),this._mousePQUpDelegate=function(a){return u._mousePQUp(a)},f(document).bind("mouseup"+this.eventNamespace,this._mousePQUpDelegate),this._super(a)};a._mouseStart=function(a){this.blurEditor({force:!0});return!0};a._mouseDrag=function(a){return!1==this._trigger("mouseDrag",a,null)?!1:!0};a._mouseStop=function(a){return!1==this._trigger("mouseStop",a,null)?!1:!0};var g,d;a.onWindowResize=function(a,u){var b=this.options,c=this.element,e=c.parent();if(u){var h=u.$grid;
if(h&&(h==c||0==c.closest(h).length))return}if(e.length&&(e[0]==document.body||"fixed"==c.css("position")?(c=window.innerHeight?window.innerHeight:f(window).height(),e=f(window).width()):(c=e.height(),e=e.width()),null==g||c!=g||e!=d)&&(g=c,d=e,!(f.support.touch&&b.editModel.indices&&f(document.activeElement).is(".pq-editor-focus")))){var l=this,b=b.autoSizeInterval,b=void 0===b?0:b;this.autoResizeTimeout&&(clearTimeout(this.autoResizeTimeout),delete this.autoResizeTimeout);this.autoResizeTimeout=
window.setTimeout(function(){l._refreshAfterResize();delete l.autoResizeTimeout},b)}};a._onMouseWheel=function(a){this._saveDims();var u=this.options,b=0,c=!1;a=a.originalEvent;var d=a.wheelDeltaX,e=a.wheelDeltaY,h=a.wheelDelta;if(d&&Math.abs(d)>Math.abs(e)){if("flex"==u.width)return!0;c=!0;b=d/120}else if(h){if(!this.iRefresh.vscroll)return!0;b=h/120}else if(a.detail){if(!this.iRefresh.vscroll)return!0;b=-1*a.detail/3}a=c?this.$hscroll:this.$vscroll;h=a.pqScrollBar("option");e=parseInt(h.cur_pos);
d=parseInt(h.num_eles);if(!u.scrollModel.smooth&&(c&&u.virtualX||!c&&u.virtualY)){b=0<b?Math[1>b?"ceil":"floor"](b):Math[-1>b?"ceil":"floor"](b);u=e-b;0>u?u=0:u>d-1&&(u=d-1);if(u==e)return!0;a.pqScrollBar("option","cur_pos",e-b);a.pqScrollBar("scroll")}else{u=h.ratio;b=u-b/(d-1);1<b?b=1:0>b&&(b=0);if(u==b)return!0;a.pqScrollBar("option","ratio",b);a.pqScrollBar("drag")}return!1};a._onDblClickCell=function(a){var b=f(a.currentTarget),c=this.getCellIndices({$td:b}),d=c.rowIndxPage,e=d+this.rowIndxOffset,
c=c.colIndx;if(null!=c){if(!1==this._trigger("cellDblClick",a,{$td:b,rowIndxPage:d,rowIndx:e,colIndx:c,column:this.colModel[c],rowData:this.pdata[d]}))return!1;1<this.options.editModel.clicksToEdit&&this.isEditableRow({rowIndx:e})&&this.isEditableCell({colIndx:c,rowIndx:e})&&this.editCell({rowIndxPage:d,colIndx:c})}};a._onClickCont=function(a){};a._onClickRow=function(a){var b=f(a.currentTarget),c=parseInt(b.attr("pq-row-indx")),d=c+this.rowIndxOffset;if(!isNaN(c)&&!1==this._trigger("rowClick",a,
{$tr:b,rowIndxPage:c,rowIndx:d,rowData:this.pdata[c]}))return!1};a._onRightClickRow=function(a){var b=f(a.currentTarget),c=parseInt(b.attr("pq-row-indx")),d=c+this.rowIndxOffset;if(!isNaN(c)&&!1==this._trigger("rowRightClick",a,{$tr:b,rowIndxPage:c,rowIndx:d,rowData:this.pdata[c]}))return!1};a._onDblClickRow=function(a){var b=f(a.currentTarget),c=parseInt(b.attr("pq-row-indx")),d=this.getRowIndxOffset();if(!1==this._trigger("rowDblClick",a,{$tr:b,rowIndxPage:c,rowIndx:c+d,rowData:this.pdata[c]}))return!1};
f.paramquery.getValueFromDataType=function(a,b,c){if("date"==b)return b=Date.parse(a),isNaN(b)?"":c?b:a;if("integer"==b)b=parseInt(a);else if("float"==b)b=parseFloat(a);else return"bool"==b?(b=f.trim(a).toLowerCase(),0==b.length?null:"true"==b||"yes"==b||"1"==b?!0:"false"==b||"no"==b||"0"==b?!1:Boolean(b)):f.trim(a);return isNaN(b)||null==b?null==a?a:null:b};var h=function(a){this.that=a},l=h.prototype;l._isValidCell=function(a){var b=this.that,c=a.column,d=c.validations;if(!d||!d.length)return{valid:!0};
var e=a.value,h=c.dataType,g=function(a){return f.paramquery.getValueFromDataType(a,h,!0)};a=a.rowData;if(!a)throw"rowData required.";for(var l=0;l<d.length;l++){var n=d[l],s=n.type,v=!1,m=n.msg,k=n.value;if(!1!==n.on&&(null==e&&"function"!=typeof s?v=!1:"minLen"==s?(e=g(e),k=g(k),e.length>=k&&(v=!0)):"nonEmpty"==s?null!=e&&""!==e&&(v=!0):"maxLen"==s?(e=g(e),k=g(k),e.length<=k&&(v=!0)):"gt"==s?(e=g(e),k=g(k),e>k&&(v=!0)):"gte"==s?(e=g(e),k=g(k),e>=k&&(v=!0)):"lt"==s?(e=g(e),k=g(k),e<k&&(v=!0)):"lte"==
s?(e=g(e),k=g(k),e<=k&&(v=!0)):"neq"==s?(e=g(e),k=g(k),e!==k&&(v=!0)):"regexp"==s?(new RegExp(k)).test(e)&&(v=!0):"function"==typeof s?(k={column:c,value:e,rowData:a,msg:m},!1==s.call(b.element[0],k)?(v=!1,k.msg!=m&&(m=k.msg)):v=!0):v=!0,!v))return{valid:!1,msg:m,column:c,warn:n.warn,dataIndx:c.dataIndx,validation:n}}return{valid:!0}};l.isValidCell=function(a){var b=this.that,c=a.rowData,d=a.rowIndx,e=a.value,h=a.valueDef,g=a.column,l=b.options,n=a.allowInvalid,s=g.dataIndx,v=l.validation,m=l.warning,
k=l.editModel,C=k.invalidClass,k=k.warnClass,F=document.activeElement;if(a.checkEditable&&!1==b.isEditableCell({rowData:c,rowIndx:d,dataIndx:s}))return{valid:!0};a=this._isValidCell({column:g,value:e,rowData:c});var e=a.valid,g=a.warn,D=a.msg;if(e)b.data({rowData:c,dataIndx:s,data:"pq_valid"})&&(b.removeClass({rowData:c,rowIndx:d,dataIndx:s,cls:k+" "+C}),b.removeData({rowData:c,dataIndx:s,data:"pq_valid"}));else var v=f.extend({},g?m:v,a.validation),I=v.css,H=v.cls,L=v.icon,K=v.style;if(n||g){if(e)return{valid:!0};
b.addClass({rowData:c,rowIndx:d,dataIndx:s,cls:g?k:C});b.data({rowData:c,dataIndx:s,data:{pq_valid:{css:I,icon:L,style:K,msg:D,cls:H}}});return a}if(!e){d=null==d?b.getRowIndx({rowData:c}).rowIndx:d;if(null==d)return a;if(!h)b.goToPage({rowIndx:d}),b.editCell({rowIndx:d,dataIndx:s});else if(f(F).hasClass("pq-editor-focus")&&(h=l.editModel.indices)){c=h.rowIndx;h=h.dataIndx;if(null!=d&&d!=c)throw"incorrect usage of isValid rowIndx: "+d;if(s!=h)throw"incorrect usage of isValid dataIndx: "+s;b.editCell({rowIndx:c,
dataIndx:s})}if((b=b.getEditCell())&&b.$cell){var N=b.$cell;N.attr("title",D);try{N.tooltip("destroy")}catch(Q){}N.tooltip({position:{my:"left center+5",at:"right center"},content:function(){return(""==L?"":"<span class='ui-icon "+L+" pq-tooltip-icon'></span>")+D},open:function(a,p){H&&p.tooltip.addClass(H);if(K){var b=p.tooltip.attr("style");p.tooltip.attr("style",b+";"+K).css("zIndex",N.zIndex()+5)}I&&p.tooltip.css(I)}}).tooltip("open")}return a}if(h&&(b=b.getEditCell())&&b.$cell){N=b.$cell;N.removeAttr("title");
try{N.tooltip("destroy")}catch(U){}}return{valid:!0}};a.isValid=function(a){return this.iIsValid.isValid(a)};l.isValid=function(a){var b=this.that;a=a||{};var c=a.allowInvalid,d=a.checkEditable,c=null==c?!1:c,e=a.dataIndx;if(null!=e){var h=b.columns[e],g=a.rowData||b.getRowData(a),l=a.hasOwnProperty("value"),b=l?a.value:g[e],b=this.isValidCell({rowData:g,checkEditable:d,rowIndx:a.rowIndx,value:b,valueDef:l,column:h,allowInvalid:c});return b.valid||b.warn?{valid:!0}:b}if(null!=a.rowIndx||null!=a.rowIndxPage||
null!=a.rowData)for(var g=a.rowData||b.getRowData(a),f=b.colModel,l=[],n=0,s=f.length;n<s;n++){if(h=f[n],!h.hidden&&(e=h.dataIndx,b=g[e],b=this.isValidCell({rowData:g,value:b,column:h,rowIndx:a.rowIndx,checkEditable:d,allowInvalid:c}),!b.valid&&!b.warn))if(c)l.push({rowData:g,dataIndx:e,column:h});else return b}else{a=a.data?a.data:b.options.dataModel.data;l=[];if(!a)return null;n=0;for(s=a.length;n<s;n++){g=a[n];if(d&&(h=this.getRowIndx({rowData:g}).rowIndx,!1==b.isEditableRow({rowData:g,rowIndx:h})))continue;
g=this.isValid({rowData:g,rowIndx:h,checkEditable:d,allowInvalid:c});if(!1===c){if(!g.valid)return g}else l=l.concat(g.cells)}}return c&&l.length?{cells:l,valid:!1}:{valid:!0}};a.isEditableRow=function(a){var b=this.options.editable;if(null!=b){if("function"==typeof b){var c=a.rowIndx;a=a.rowData||this.getRowData({rowIndx:c});return b.call(this.element[0],{rowData:a,rowIndx:c})}return b}return!0};a.isEditableCell=function(a){var b=a.colIndx,c=a.dataIndx,b=null==b?this.getColIndx({dataIndx:c}):b,b=
this.colModel[b],c=null==c?b.dataIndx:c,d=b.editable;if(a.checkVisible&&b.hidden)return!1;if(null!=d){if("function"==typeof d){var e=a.rowIndx;a=a.rowData||this.getRowData(a);return d.call(this.element[0],{rowIndx:e,rowData:a,column:b,dataIndx:c})}return d}return!0};a._getRowPQData=function(a,b,c){return(c=null==c?this.pdata[a]:c)?c[b]:null};a._setRowPQData=function(a,b,c){if(c=null==c?this.pdata[a]:c)for(var d in b)c[d]=b[d]};a._onContMouseDown=function(a){this.blurEditor({blurIfFocus:!0});if(!1===
this._trigger("contMouseDown",a,{dataModel:this.options.dataModel}))return!1;var b=f(a.target);a=b.closest(".pq-grid-cell");b=b.closest(".pq-grid-row");a.length||b.length||this.$cont.attr("tabindex",0).focus();return!0};a._onCellMouseDown=function(a){var b=f(a.currentTarget),c=this.getCellIndices({$td:b});c.$td=b;c.dataModel=this.options.dataModel;return!1==this._trigger("cellMouseDown",a,c)?!1:!0};a._onRowMouseDown=function(a){var b=f(a.currentTarget),c=this.getRowIndx({$tr:b});c.$tr=b;c.dataModel=
this.options.dataModel;return!1==this._trigger("rowMouseDown",a,c)?!1:!0};a._onCellMouseEnter=function(a,b){var c=this.options,d=this.getCellIndices({$td:b});if(null!=d.rowIndx&&null!=d.colIndx){if(!1===this._trigger("cellMouseEnter",a,d))return!1;"cell"==c.hoverMode&&this.highlightCell(b);return!0}};a._onRowMouseEnter=function(a,b){var c=this.options,d=this.getRowIndx({$tr:b}),e=d.rowIndxPage;if(!1===this._trigger("rowMouseEnter",a,d))return!1;"row"==c.hoverMode&&this.highlightRow(e);return!0};a._onCellMouseLeave=
function(a,b){"cell"==this.options.hoverMode&&this.unHighlightCell(b);return!0};a._onRowMouseLeave=function(a,b){var c=this.getRowIndx({$tr:b}).rowIndxPage;"row"==this.options.hoverMode&&this.unHighlightRow(c);return!0};a.enableSelection=function(){this.element.removeClass("pq-disable-select").off("selectstart"+this.eventNamespace)};a.disableSelection=function(){this.element.addClass("pq-disable-select").on("selectstart"+this.eventNamespace,function(a){if(a.target){var b=f(a.target);if(b.is("input,textarea,select")||
b.closest(".pq-native-select").length)return!0;a.preventDefault()}})};a._onClickCell=function(a){var b=this.colModel,c=this.options.editModel,d=f(a.currentTarget),e=this.getCellIndices({$td:d}),h=e.rowIndxPage,g=h+this.rowIndxOffset,l,n,s=e.colIndx;e.rowIndx=g;null!=s&&(0<=s&&(l=b[s],n=l.dataIndx,e.dataIndx=n),e.evt=a);if(!1==this._trigger("cellClick",a,{$td:d,rowIndxPage:h,rowIndx:g,colIndx:s,dataIndx:n,column:l,rowData:this.pdata[h]}))return!1;null==s||0>s||1==c.clicksToEdit&&this.isEditableRow({rowIndx:g})&&
this.isEditableCell({colIndx:s,rowIndx:g})&&this.editCell(e)};a._onRightClickCell=function(a){var b=f(a.currentTarget),c=this.getCellIndices({$td:b}),d=c.rowIndxPage,e=d+this.rowIndxOffset,c=c.colIndx,h=this.colModel;if(null!=c&&(h=h[c],!1==this._trigger("cellRightClick",a,{$td:b,rowIndxPage:d,rowIndx:e,colIndx:c,dataIndx:h.dataIndx,column:h,rowData:this.pdata[d]})))return!1};a.highlightCell=function(a){a.addClass("pq-grid-cell-hover ui-state-hover")};a.unHighlightCell=function(a){a.removeClass("pq-grid-cell-hover ui-state-hover")};
a.highlightRow=function(a){isNaN(a)||(a=this.getRow({rowIndxPage:a}))&&a.addClass("pq-grid-row-hover ui-state-hover")};a.unHighlightRow=function(a){isNaN(a)||(a=this.getRow({rowIndxPage:a}))&&a.removeClass("pq-grid-row-hover ui-state-hover")};a._getCreateEventData=function(){return{dataModel:this.options.dataModel,data:this.pdata,colModel:this.options.colModel}};a._findCellFromEvt=function(a){a=f(a.target).closest(".pq-grid-cell");if(null==a||0==a.length)return{rowIndxPage:null,colIndx:null,$td:null};
var b=this.getCellIndices({$td:a});b.$td=a;return b};a._initPager=function(){var a=this,b=a.options,c={bootstrap:b.bootstrap,change:function(b,c){a.blurEditor({force:!0});var d=a.options.pageModel;void 0!=c.curPage&&(d.prevPage=d.curPage,d.curPage=c.curPage);void 0!=c.rPP&&(d.rPP=c.rPP);"remote"==d.type?a.remoteRequest({callback:function(){a._delegatePageChangeEvent({type:"remote"});a._onDataAvailable({apply:!0,header:!1})}}):(a._delegatePageChangeEvent({type:"local"}),a.refreshView({header:!1}))},
refresh:function(b){a.refreshDataAndView()}},b=b.pageModel;b.type&&(this.$pager=b.appendTo?b.appendTo.pqPager(c):this.$footer.pqPager(c))};a._triggerPageChangeEvent=function(a){var b=this._pageChangeEvent;b&&(this._trigger("pageChange",a,b),delete this._pageChangeEvent)};a._delegatePageChangeEvent=function(a){this._pageChangeEvent=a};a.generateLoading=function(){this.$loading&&this.$loading.remove();this.$loading=f("<div class='pq-loading'></div>").appendTo(this.element);f(["<div class='pq-loading-bg'></div><div class='pq-loading-mask ui-state-highlight'><div>",
this.options.strLoading,"...</div></div>"].join("")).appendTo(this.$loading);this.$loading.find("div.pq-loading-bg").css("opacity",.2)};a._refreshLoadingString=function(){this.$loading.find("div.pq-loading-mask").children("div").html(this.options.strLoading)};a.showLoading=function(){null==this.showLoadingCounter&&(this.showLoadingCounter=0);this.showLoadingCounter++;this.$loading.show()};a.hideLoading=function(){0<this.showLoadingCounter&&this.showLoadingCounter--;this.showLoadingCounter||this.$loading.hide()};
a.refreshDataFromDataModel=function(){var a=this._queueATriggers,b;for(b in a){var c=a[b];this._trigger(b,c.evt,c.ui)}this._queueATriggers={};this._trigger("beforeRefreshData",null,{});var d=this.options,a=d.pageModel,c=d.dataModel.data,e=a.type;this.rowIndxOffset=0;if(null==c||0==c.length)e&&(a.curPage=0,a.totalPages=0,a.totalRecords=0),this.pdata=c;else{if(e&&"local"==e){a.totalRecords=c.length;a.totalPages=Math.ceil(c.length/a.rPP);a.curPage>a.totalPages&&(a.curPage=a.totalPages);1>a.curPage&&
0<a.totalPages&&(a.curPage=1);var d=(a.curPage-1)*a.rPP,h=a.curPage*a.rPP;h>c.length&&(h=c.length);this.pdata=c.slice(d,h)}else"remote"==e?(d=Math.ceil(a.totalRecords/a.rPP),(a.totalPages=d)&&!a.curPage&&(a.curPage=1),h=a.rPP,h>c.length&&(h=c.length),this.pdata=c.slice(0,h)):this.pdata=d.backwardCompat?c.slice(0):c;if("local"==e||"remote"==e)this.rowIndxOffset=a.rPP*(a.curPage-1);a=this._queueBTriggers;for(b in a)c=a[b],this._trigger(b,c.evt,c.ui);this._queueBTriggers={};this._trigger("dataReady",
null,{})}};a.getQueryStringCRUD=function(){return""};a.remoteRequest=function(a){this.loading&&this.xhr.abort();a=a||{};var b=this,c="",d="",e=this.options,h=!1,g=this.colModel,l=e.dataModel,n=e.sortModel,s=e.filterModel,v=e.pageModel;if("function"==typeof l.getUrl)(e=l.getUrl.call(this.element[0],{colModel:g,dataModel:l,sortModel:n,groupModel:e.groupModel,pageModel:v,filterModel:s}))&&e.url&&(c=e.url),e&&e.data&&(d=e.data);else if("string"==typeof l.url){var c=l.url,d={},e={},m={};"remote"==n.type&&
(a.initBySort||this.sort({initByRemote:!0}),(n=this.iSort.getQueryStringSort())&&(d={pq_sort:n}));"remote"==v.type&&(m={pq_curpage:v.curPage,pq_rpp:v.rPP});"local"!=s.type&&(n=this.iFilterData.getQueryStringFilter())&&(h=!0,e={pq_filter:n});var n=l.postData,k=l.postDataOnce;n&&"function"==typeof n&&(n=n.call(this.element[0],{colModel:g,dataModel:l}));d=f.extend({pq_datatype:l.dataType},e,m,d,n,k)}c&&(this.loading=!0,this.showLoading(),this.xhr=f.ajax({url:c,dataType:l.dataType,async:null==l.async?
!0:l.async,cache:l.cache,contentType:l.contentType,type:l.method,data:d,beforeSend:function(a,p){if("function"==typeof l.beforeSend)return l.beforeSend.call(b.element[0],a,p)},success:function(c,d,e){"function"==typeof l.getData&&(c=l.getData.call(b.element[0],c,d,e));l.data=c.data;v.type&&"remote"==v.type&&(c.curPage&&(v.curPage=c.curPage),c.totalRecords&&(v.totalRecords=c.totalRecords));b.hideLoading();b.loading=!1;b._queueBTriggers.load={ui:{dataModel:l,colModel:g}};a.callback&&a.callback();h&&
(b._queueATriggers.filter={ui:{type:"remote",filterModel:s}})},error:function(a,p,c){b.hideLoading();b.loading=!1;if("function"==typeof l.error)l.error.call(b.element[0],a,p,c);else if("abort"!=c)throw"Error : "+c;}}))};a._refreshTitle=function(){this.$title.html(this.options.title)};a._destroyDraggable=function(){var a=this.element,b=a.parent(".pq-wrapper");b.length&&b.data("draggable")&&(b.draggable("destroy"),this.$title.removeClass("pq-draggable pq-no-capture"),a.unwrap(".pq-wrapper"))};a._refreshDraggable=
function(){var a=this.element,b=this.$title;this.options.draggable?(b.addClass("pq-draggable pq-no-capture"),a.parent(".pq-wrapper").length||a.wrap("<div class='pq-wrapper' />"),a.parent(".pq-wrapper").draggable({handle:b})):this._destroyDraggable()};a._refreshResizable=function(){var a=this,b=this.element,c=this.options,d=-1<(c.width+"").indexOf("%"),e=-1<(c.height+"").indexOf("%"),h="auto"==c.width,g="flex"==c.width,l="flex"==c.height;if(!c.resizable||(l||e)&&(g||d||h))this._destroyResizable();
else{var n="e,s,se";if(l||e)n="e";else if(g||d||h)n="s";d=!0;b.hasClass("ui-resizable")&&(e=b.resizable("option","handles"),n==e?d=!1:this._destroyResizable());d&&b.resizable({helper:"ui-state-default",handles:n,minWidth:c.minWidth,minHeight:c.minHeight?c.minHeight:100,delay:0,start:function(a,b){f(b.helper).css({opacity:.5,background:"#ccc",border:"1px solid steelblue"})},resize:function(a,b){},stop:function(b,d){var e=a.element,u=c.width,h=c.height,g=-1<(u+"").indexOf("%"),l=-1<(h+"").indexOf("%"),
r="auto"==u,u="flex"==u,n=!1;l||"flex"==h||(n=!0,c.height=e.height());g||r||u||(n=!0,c.width=e.width());a.refresh();e.css("position","relative");n&&f(window).trigger("resize")}})}};a._refreshAfterResize=function(){var a=this.options,b=a.width,c=a.height,a=-1!=(b+"").indexOf("%")?!0:!1,b="auto"===b,c=-1!=(c+"").indexOf("%")?!0:!1;(a||b||c)&&this.refresh()};a.refresh=function(a){this.iRefresh.refresh(a)};a._refreshDataIndices=function(){for(var a="JSON"==this.getDataType()?!0:!1,b={},c={},d={},e=this.colModel,
h=e.length,g=0;g<h;g++){var l=e[g],n=l.dataIndx;null==n&&(n=a?"dataIndx_"+g:g,l.dataIndx=n);b[n]=l;c[n]=g;l.validations&&(d[n]=d)}this.columns=b;this.colIndxs=c;this.validations=d};a.refreshView=function(a){null!=this.options.editModel.indices&&this.blurEditor({force:!0});this.refreshDataFromDataModel();this.refresh(a)};a._refreshPager=function(){var a=this.options,b=a.pageModel,c=b.rPP,d=b.totalRecords;b.type?(b=a.pageModel,this.$pager||this._initPager(),this.$pager.pqPager("option",b),d>c?this.$bottom.css("display",
""):a.showBottom||this.$bottom.css("display","none")):(this.$pager&&(this.$pager.pqPager("destroy"),this.$pager=null),a.showBottom?this.$bottom.css("display",""):this.$bottom.css("display","none"))};a.getInstance=function(){return{grid:this}};a._addRowsData=function(a){var b=a.data,c=this.options.dataModel.data;a=a.rowIndx;null==c&&(c=[]);if(null==a)for(var d=0,e=b.length;d<e;d++){var h=b[d];c.push(h)}else if(a<c.length)for(d=0,e=b.length;d<e;d++)h=b[d],c.splice(a,0,h),a++;else return!1;return!0};
a.addRows=function(a){return this._addRowsData(a)?(this.refreshDataFromDataModel(),this.refresh(),!0):!1};a.refreshDataAndView=function(a){if("remote"==this.options.dataModel.location){var b=this;this.remoteRequest({callback:function(){b._onDataAvailable(a)}})}else this._onDataAvailable(a)};a.getColIndx=function(a){var b=a.dataIndx;a=a.column;var c;if(a)c=!0;else if(void 0===b)throw"dataIndx / column NA";var d=this.colModel,e=d.length;if(c)for(c=0;c<e;c++){if(d[c]==a)return c}else for(c=0;c<e;c++)if(d[c].dataIndx==
b)return c;return-1};a.getColumn=function(a){if(null==a.dataIndx)throw"dataIndx N/A";return this.columns[a.dataIndx]};a._setOption=function(a,b){var c=this.options,d=c.dataModel;if("height"===a)"flex"===b?(d=this.$vscroll,b&&d&&d.hasClass("pq-sb-vert")&&(c.virtualY?d.pqScrollBar("option","cur_pos",0):d.pqScrollBar("option","ratio",0)),this.$hscroll.css("position","relative")):"flex"===c.height&&this.$hscroll.css("position",""),this._super(a,b);else if("width"===a&&"flex"==b)this._super(a,b),d=this.$hscroll,
b&&d&&d.hasClass("pq-sb-horiz")&&(c.virtualX?d.pqScrollBar("option","cur_pos",0):d.pqScrollBar("option","ratio",0));else if("title"==a)this._super(a,b),this._refreshTitle();else if("roundCorners"==a)this._super(a,b),b?(this.element.addClass("ui-corner-all"),this.$top.addClass("ui-corner-top"),this.$bottom.addClass("ui-corner-bottom")):(this.element.removeClass("ui-corner-all"),this.$top.removeClass("ui-corner-top"),this.$bottom.removeClass("ui-corner-bottom"));else if("freezeCols"==a)b=parseInt(b),
!isNaN(b)&&0<=b&&b<=this.colModel.length-2&&this._super(a,b);else if("freezeRows"==a)b=parseInt(b),!isNaN(b)&&0<=b&&this._super(a,b);else if("resizable"==a)this._super(a,b),this._refreshResizable();else if("draggable"==a)this._super(a,b),this._refreshDraggable();else if("scrollModel"==a)this._super(a,b);else if("dataModel"==a)b.data!==d.data&&d.dataUF&&d.dataUF.length&&(d.dataUF.length=0),this._super(a,b);else if("groupModel"==a){if(null==b)for(var c=d.data,d=0,e=c.length;d<e;d++)c[d].pq_hidden=!1;
this._super(a,b)}else"pageModel"==a?this._super(a,b):"selectionModel"===a?this._super(a,b):"colModel"===a||"columnTemplate"==a?(this._super(a,b),this._calcThisColModel()):"disabled"===a?(this._super(a,b),!0===b?this._disable():this._enable()):"numberCell"===a?(this._super(a,b),this.iRefresh.decidePanes()):"strLoading"===a?(this._super(a,b),this._refreshLoadingString()):"showTop"===a?(this._super(a,b),!0===b?this.$top.css("display",""):this.$top.css("display","none")):"showTitle"===a?(this._super(a,
b),!0===b?this.$title.css("display",""):this.$title.css("display","none")):"showToolbar"===a?(this._super(a,b),!0===b?this.$toolbar.css("display",""):this.$toolbar.css("display","none")):"toolbar"==a?(this._super(a,b),this.$toolbar.remove(),this._super(a,b),this._createToolbar()):"collapsible"===a?(this._super(a,b),this._createCollapse()):"showBottom"===a?(this._super(a,b),!0===b?this.$bottom.css("display",""):this.$bottom.css("display","none")):this._super(a,b)};a._generateCellRowOutline=function(){var a=
this.options,b=a.editModel;if(this.$div_focus){if(a.debug)throw"this.$div_focus already present assert failed";}else a=this.element,b.inline&&(a=this.getCell(b.indices),a.css("padding",0).empty()),this.$div_focus=f("<div class='pq-editor-outer'><div class='pq-editor-inner'></div></div>").appendTo(a),this.$div_focus.css("zIndex",a.zIndex()+5),b=f.extend({all:!0},b.indices),b=this.getCell(b),b.css("height",b.height()),b.empty(),this.refreshEditorPos()};a._removeCellRowOutline=function(a){if(this.$div_focus){a=
this.$div_focus.find(".pq-editor-focus");a.hasClass("hasDatepicker")&&a.datepicker("hide").datepicker("destroy");if(a[0]==document.activeElement){var b=this._blurEditMode;this._blurEditMode=!0;a.blur();this._blurEditMode=b}this.$div_focus.remove();delete this.$div_focus;a=this.options.editModel;b=f.extend({},a.indices);a.indices=null;this.refreshCell(b)}};a.refreshEditorPos=function(){var a=this.options.editModel,b=a.cellBorderWidth,c=this.$div_focus,d=this.getCell(a.indices);if(!d||!d.length)return!1;
var a=d[0].offsetWidth,e=d[0].offsetHeight,h=this.element.offset(),d=d.offset();c.css({height:e,width:a,borderWidth:b,left:d.left-h.left,top:d.top-h.top-1})};a.setEditorPosTimer=function(){var a=this,b=this.options;this._refreshEditorPosTimer&&(window.clearInterval(this._refreshEditorPosTimer),this._refreshEditorPosTimer=null);this._refreshEditorPosTimer=window.setInterval(function(){b.editModel.indices&&a.refreshEditorPos()},200)};a._findfirstUnhiddenColIndx=function(){for(var a=0;a<this.colModel.length;a++)if(!this.colModel[a].hidden)return a};
a.selectRow=function(a){var b=a.evt;if(b&&("keydown"==b.type||"keypress"==b.type)){if(!1==this.iRows.replace(a))return!1}else if(!1==this.iRows.add(a))return!1;return!0};a.get$Tbl=function(a,b){var c=this.$tbl,d=[];if(c&&c.length){var e=this.pqpanes,h=this.options,g=h.freezeRows,h=h.freezeCols;e.h&&e.v?null==b?a>=g?d.push(c[2],c[3]):d.push(c[0],c[1]):d=b>=h&&a>=g?c[3]:b<h&&a>=g?c[2]:b>=h&&a<g?c[1]:c[0]:d=e.v?null==b?c:b>=h?c[1]:c[0]:e.h?a>=g?c[1]:c[0]:c[0];if(d)return f(d)}};a.scrollCell=function(a){this.scrollRow(a);
this.scrollColumn(a)};a.scrollY=function(a){this.$vscroll.pqScrollBar("option","cur_pos",a).pqScrollBar("scroll")};a.scrollRow=function(a){if(!this.pdata||a.rowIndxPage>=this.pdata.length)return!1;this.options.virtualY?this._scrollRowVirtual(a):this.iMouseSelection.scrollRowNonVirtual(a)};a._scrollRowVirtual=function(a){var b=this.options,c=a.rowIndxPage,d=this.iHierarchy?!0:!1,e=a.rowIndx;a=this.$vscroll;var h=this.scrollCurPos,c=null==c?e-this.rowIndxOffset:c,g=parseInt(b.freezeRows);if(!(c<g)&&
(e=this._calcCurPosFromRowIndxPage(c),null!=e)){e<h&&a.pqScrollBar("option","cur_pos",e).pqScrollBar("scroll");var l=this.get$Tbl(c);if(!l||!l.length)return null;var n=l.children("tbody").children("tr[pq-row-indx="+c+"]"),f=c=n.last();1<n.length&&(f=n.first());var s=c[0],n=parseInt(l.css("marginTop"));if(void 0==s)b.scrollModel.smooth?a.pqScrollBar("option","ratio",e/this.totalVisibleRows).pqScrollBar("drag"):a.pqScrollBar("option","cur_pos",e).pqScrollBar("scroll");else{var b=s.offsetTop+s.offsetHeight,
s=this.$cont[0].offsetHeight,v=this._getSBHeight(),f=f.prev("tr");if(!f.hasClass("pq-row-hidden")&&!f.hasClass("pq-last-frozen-row")&&b>s-v-n){b-=s-v-n;n=l.children().children("tr");f=l=0;g?(g=n.filter("tr.pq-last-frozen-row").last().next(),0==g.length&&(g=n.filter("tr.pq-row-hidden").next())):g=n.filter("tr.pq-row-hidden").next();do{if(!g.length)break;l+=g[0].offsetHeight;if(g[0]==c[0])break;else if(d&&!1!=g.hasClass("pq-detail-child")||f++,l>=b)break;g=g.next()}while(1);d=h+f;d>e&&(d=e);h=a.pqScrollBar("option",
"num_eles");h<d+1&&(h=d+1);a.pqScrollBar("option",{num_eles:h,cur_pos:d}).pqScrollBar("scroll")}}}};a.blurEditor=function(a){if(this.$div_focus){var b=this.$div_focus.find(".pq-editor-focus");if(a&&a.blurIfFocus)document.activeElement==b[0]&&b.blur();else return b.triggerHandler("blur",a)}};a._scrollColumnVirtual=function(a){var b=a.colIndx,b=null==b?this.getColIndx({dataIndx:a.dataIndx}):b;a=this.options.freezeCols;var c=this._calcRightEdgeCol(b).width,d=this._getSBWidth(),d=this.$cont[0].offsetWidth-
d;if(c>d){for(var c=v.call(this,-1,b+1)-d,d=this.colModel,e=d.length,h=0,g=0,l=a;l<e;l++){var n=d[l];n.hidden||(h+=n.outerWidth);if(l==b){g=l-a-this._calcNumHiddenUnFrozens(l);break}else if(h>=c){g=l-a-this._calcNumHiddenUnFrozens(l)+1;break}}this.$hscroll.pqScrollBar("option","cur_pos",g).pqScrollBar("scroll");return!0}return this.hidearrHS[b]?(this.hidearrHS[b]=!1,b=b-a-this._calcNumHiddenUnFrozens(b),this.$hscroll.pqScrollBar("option","cur_pos",b).pqScrollBar("scroll"),!0):!1};a.scrollColumn=function(a){var b=
this.options;return"flex"===b.width?!1:b.virtualX?this._scrollColumnVirtual(a):this.iMouseSelection.scrollColumnNonVirtual(a)};a.selection=function(a){var b=a.method,c=a.type;if("row"==c)return this.iRows[b](a);if("cell"==c)return this.iCells[b](a)};a.goToPage=function(a){var b=this.options.pageModel;if("local"==b.type||"remote"==b.type){var c=a.rowIndx,d=b.rPP;a=null==a.page?Math.ceil((c+1)/d):a.page;a!=b.curPage&&(b.curPage=a,"local"==b.type?(this.refreshDataFromDataModel(),this.refresh()):this.refreshDataAndView())}};
a.setSelection=function(a){if(null==a)return this.iRows.removeAll({raiseEvent:!0}),this.iCells.removeAll({raiseEvent:!0}),!1;var b=this.pdata,d,e;if(a.rowData)e=this.getRowIndx(a),d=e.rowIndx;else{var h=this.rowIndxOffset;d=a.rowIndx;e=a.rowIndxPage;d=null==d?e+h:d}h=null==a.colIndx&&void 0!==a.dataIndx?this.getColIndx({dataIndx:a.dataIndx}):a.colIndx;if(0>d||0>h||h>=this.colModel.length||null==b||0==b.length)return!1;a.rowIndx=d;a.colIndx=h;this.goToPage(a);e=d-this.rowIndxOffset;a.rowIndxPage=e;
null!=h&&(b=(b=this.attr({rowIndx:d,colIndx:h,attr:"style"}).attr)&&"none"==b.display?!0:!1,b?(e=c({rowIndx:d,colIndx:h,that:this,select:!0}),this.data({rowIndx:e.rowIndx,colIndx:e.colIndx,data:{pq_merge_nav:{rowIndx:d,colIndx:h}}}),a.rowIndx=e.rowIndx,a.colIndx=e.colIndx,a.rowIndxPage=e.rowIndx-this.rowIndxOffset):this.removeData({rowIndx:d,colIndx:h,data:"pq_merge_nav"}));this.scrollRow({rowIndxPage:a.rowIndxPage});if(null==h)return this.selectRow(a);this.scrollColumn({colIndx:a.colIndx});return this.selectCell(a)};
a.getColModel=function(){return this.colModel};a.saveEditCell=function(a){var c=this.options,d=c.editModel;if(!d.indices)return null;d=f.extend({},d.indices);a=a?a.evt:null;var e=d.colIndx,d=d.rowIndxPage,h=d+this.rowIndxOffset,g=this.colModel[e],l=g.dataIndx,n=this.pdata,s=n[d],v=c.dataModel,c=this.iGenerateView,m;if(null==s)return null;if(null!=d){var k=this.getEditCellData();if(f.isPlainObject(k)){m={};for(var E in k)m[E]=s[E]}else m=c.readCell(s,g);"<br>"==k&&(k="");null==m&&""===k&&(k=null);
E={rowIndx:h,rowIndxPage:d,dataIndx:l,column:g,newVal:k,value:k,oldVal:m,rowData:s,dataModel:v};if(!1===this._trigger("cellBeforeSave",a,E))return!1;g={};v=!1;f.isPlainObject(k)?(g=k,v=!0):g[l]=k;if((e=b(d,e,this))&&e.rowspan){e=e.rowspan;k={};k[l]=c.readCell(s,l);l=[];if(e)for(s=0;s<e;s++)l.push({newRow:g,rowIndx:h+s,rowData:n[d+s],oldRow:k,type:"update"});d=this._digestData({source:"edit",checkEditable:!1,rowList:l})}else d=this.updateRow({row:g,rowIndx:h,refresh:v,silent:!0,source:"edit",checkEditable:!1});
if(!1===d)return!1;this._trigger("cellSave",a,E);return!0}};a._addInvalid=function(a){};a._digestData=function(a){if(!1===this._trigger("beforeValidate",null,a))return!1;var b=this.options,c=b.editModel,d=b.dataModel,e=d.data,h=b.colModel,g=b.pageModel,l=b.historyModel,n=a.validate,n=null==n?c.validate:n,s=g.type,v=a.allowInvalid,v=null==v?c.allowInvalid:v,m=b.trackModel,c=a.track,c=null==c?null==b.track?m.on:b.track:c,k=a.history,k=null==k?l.on:k,C=a.checkEditable,C=null==C?!0:C,F=a.checkEditableAdd,
F=null==F?C:F,l=this.iGenerateView.saveCell,m=this.columns,D=this.colIndxs,I=a.source,H=this.rowIndxOffset,L=f.paramquery.getValueFromDataType,K=a.rowList,N=K.length;e||(e=b.dataModel.data=[]);for(var Q=[],U=0;U<N;U++){var M=K[U],J=M.newRow,P=M.rowData,O=M.type,W=M.checkEditable,S=M.rowIndx,Y=M.oldRow;null==W&&("update"==O?W=C:"add"==O&&(W=F));if("update"==O){if(!Y||!P)throw"assert failed: oldRow and rowData required while update";if(W&&!0!==b.editable&&!1===this.isEditableRow({rowIndx:S,rowData:P}))continue}else if("delete"==
O){Q.push(M);continue}if("add"==O)for(var V=0,X=h.length;V<X;V++){var T=h[V],R=T.dataIndx;J[R]=J[R]}for(R in J){T=m[R];V=D[R];if(T){if(W&&null!=T.editable&&!1===this.isEditableCell({rowIndx:S,colIndx:V,dataIndx:R})){delete J[R];continue}var X=T.dataType,V=L(J[R],X),Z=Y?Y[R]:void 0,Z=void 0!==Z?L(Z,X):void 0;J[R]=V;if(n&&T.validations)if("edit"==I&&!1===v){if(T=this.isValid({dataIndx:R,rowIndx:S,value:V}),!1==T.valid&&!T.warn)return!1}else T=this.iIsValid.isValidCell({column:T,rowData:"add"==O?J:P,
allowInvalid:v,value:V}),!1===T.valid&&(!1!==v||T.warn||delete J[R]);if("update"==O&&V===Z){if("edit"==I)return null;delete J[R];continue}}"update"==O&&(Y[R]=Z)}if(J)if("update"==O)for(R in J){Q.push(M);break}else Q.push(M)}K=a.rowList=Q;N=K.length;if(!N)return!1;k&&(this.iHistory.increment(),this.iHistory.push({rowList:K}));for(U=0;U<N;U++)if(M=K[U],O=M.type,J=M.newRow,S=M.rowIndx,b=M.rowIndxPage,P=M.rowData,"update"==O)for(R in c&&this.iUCData.update({rowData:P,row:J,refresh:!1}),J)T=m[R],V=J[R],
l(P,T,V);else if("add"==O)c&&this.iUCData.add({rowData:J}),null==S&&null==b?e.push(J):(b=S-H,b="remote"==s?b:S,e.splice(b,0,J)),"remote"==s&&g.totalRecords++;else if("delete"==O){b=this.getRowIndx({rowData:P});h=b.uf;S=b.rowIndx;if(c)this.iUCData["delete"]({rowIndx:S,rowData:P});b=S-H;b="remote"==s?b:S;h?d.dataUF.splice(b,1):(b=e.splice(b,1))&&b.length&&"remote"==s&&g.totalRecords--}this._trigger("change",null,a);return!0};a.refreshColumn=function(a){var b=this.colModel,c=a.colIndx,d=a.dataIndx,c=
null==c?this.getColIndx({dataIndx:d}):c,d=null==d?b[c]:d,e=this.rowIndxOffset;a.colIndx=c;for(var h=this.initV,g=this.finalV,l=h;l<=g;l++){var n=l;a.rowIndx=n+e;a.rowIndxPage=n;a.colIndx=c;a.column=b[c];a.skip=!0;this.refreshCell(a)}this._trigger("refreshColumn",null,{dataModel:this.options.dataModel,colModel:b,initV:h,finalV:g,colIndx:c,dataIndx:d});this.iRefresh.softRefresh()};a.refreshCell=function(a){if(this.pdata){var b=this.rowIndxOffset,c=a.skip,d=a.rowIndx,e=a.rowIndxPage,d=a.rowIndx=null==
d?e+b:d,e=a.rowIndxPage=null==e?d-b:e,b=a.dataIndx,h=a.colIndx,h=a.colIndx=null==h?this.getColIndx({dataIndx:b}):h,g=this.getCell({all:!0,rowIndxPage:e,colIndx:h}),l=a.column,n=this.colModel;a.column=l?l:n[h];if(l=this.pdata[e])a.rowData=l,g&&0<g.length&&(a=this.iGenerateView.renderCell(a),g.replaceWith(a),c||(this._trigger("refreshCell",null,{dataModel:this.options.dataModel,colModel:n,rowData:l,rowIndx:d,rowIndxPage:e,colIndx:h,dataIndx:b}),this.iRefresh.softRefresh()))}};a.refreshRow=function(a){if(this.pdata){var b=
this.rowIndxOffset,c=a.rowIndx;a=a.rowIndxPage;c=null==c?a+b:c;a=null==a?c-b:a;var b=this.getRow({all:!0,rowIndxPage:a}),d=this.colModel,e=this.pdata[a],h=!1,g=document.activeElement;f(g);if(g==b[0]||1<b.length&&g==b[1])h=!0;if(!e||!b||!b.length)return null;g=[];this.iGenerateView.refreshRow(a,d,g,null,null,e.pq_detail&&e.pq_detail.show);d=g.join("");b.replaceWith(d);h&&this.getRow({all:!0,rowIndxPage:a}).attr("tabindex",0).focus();this._trigger("refreshRow",null,{rowData:e,rowIndx:c,rowIndxPage:a});
this.iRefresh.softRefresh();return!0}};a.quitEditMode=function(a){if(!this._quitEditMode){var b=!1,c=!1,d=!1,e=this.options.editModel,h=e.indices,g=void 0;this._quitEditMode=!0;a&&(b=a.old,c=a.silent,d=a.fireOnly,g=a.evt);h&&(c||b||this._trigger("editorEnd",g,h),d||(this._removeCellRowOutline(a),e.indices=null));this._quitEditMode=null}};a.getViewPortRowsIndx=function(){return{beginIndx:this.initV,endIndx:this.finalV}};a.getViewPortIndx=function(){return{initV:this.initV,finalV:this.finalV,initH:this.initH,
finalH:this.finalH}};a.getRowIndxOffset=function(){return this.rowIndxOffset};a.selectCell=function(a){var b=a.evt;if(b&&("keydown"==b.type||"keypress"==b.type)){if(!1==this.iCells.replace(a))return!1}else if(!1===this.iCells.add(a))return!1;return!0};a.getEditCell=function(){var a=this.options.editModel;if(a.indices){var a=this.getCell(a.indices),b=this.$div_focus.children(".pq-editor-inner"),c=b.find(".pq-editor-focus");return{$td:a,$cell:b,$editor:c}}return null};a.editCell=function(a){this.scrollRow(a);
this.scrollColumn(a);var b=this.getCell(a);if(b&&b.length)return this._editCell(a)};a.getFirstEditableColIndx=function(a){if(null==a.rowIndx)throw"rowIndx NA";if(!this.isEditableRow(a))return-1;for(var b=this.colModel,c=0;c<b.length;c++)if(a.colIndx=c,this.isEditableCell(a)&&!b[c].hidden)return c;return-1};a.editFirstCellInRow=function(a){var b=this.rowIndxOffset,c=a.rowIndx;a=a.rowIndxPage;c=null==c?a+b:c;a=null==a?c-b:a;b=this.getFirstEditableColIndx({rowIndx:c});-1!=b&&this.editCell({rowIndxPage:a,
colIndx:b})};a._editCell=function(a){var b=this,c=a.evt,d=this.element[0],e=this.rowIndxOffset,h=a.rowIndxPage,g=a.rowIndx,g=null==g?h+e:g,h=null==h?g-e:h,e=a.colIndx,l=a.dataIndx,e=null==e?this.getColIndx({dataIndx:l}):e,n=this.colModel[e],l=n.dataIndx,s=n.editor,v=this.options,m=v.editModel,k=v.editor,C=s?f.extend({},k,s):k,s=b.pdata[h],v=!1;if(!this.pdata||h>=this.pdata.length)return!1;if(m.indices){var F=m.indices;if(F.rowIndxPage==h&&F.colIndx==e){this.refreshEditorPos();var D=this.$div_focus.find(".pq-editor-focus");
window.setTimeout(function(){D.focus()},0);return!1}if(!1===this.blurEditor({evt:c}))return!1;this.quitEditMode({evt:c})}m.indices={rowIndxPage:h,rowIndx:g,colIndx:e,column:n,dataIndx:l};this._generateCellRowOutline();F=this.$div_focus.children(".pq-editor-inner");"right"==n.align?F.addClass("pq-align-right"):"center"==n.align?F.addClass("pq-align-center"):F.addClass("pq-align-left");var I=b.iGenerateView.readCell(s,n),H,L={rowIndx:g,rowIndxPage:h,$cell:F,cellData:I,rowData:s,dataIndx:l,column:n},
K=C.type;a=null==a.select?C.select:a.select;var N=C.init,Q=C.valueIndx,U=C.dataMap,M=C.mapIndices,M=M?M:{},J=C.cls||"",J="function"===typeof J?J.call(d,L):J;H="pq-editor-focus "+J;var J=H+" pq-cell-editor ",P=C.attr||"",P="function"===typeof P?P.call(d,L):P,O=C.style||"",O=(O="function"===typeof O?O.call(d,L):O)?"style='"+O+"'":"";L.cls=H;"function"==typeof K&&(H=K.call(d,L))&&(K=H);k._type=K;"checkbox"==K?(C=C.subtype,F.html("<input "+(I?"checked='checked'":"")+" class='"+J+"' "+P+" "+O+" type=checkbox name='"+
l+"' />"),k=F.children("input"),"triple"==C&&(k.pqval({val:I}),F.click(function(a){f(this).children("input").pqval({incr:!0})}))):"textarea"==K||"select"==K||"textbox"==K?("textarea"==K?H="<textarea class='"+J+"' "+P+" "+O+" name='"+l+"' ></textarea>":"select"==K?(k=C.options||[],"function"===typeof k&&(k=k.call(d,L)),J=[P," class='",J,"' ",O," name='",l,"'"].join(""),H=f.paramquery.select({options:k,attr:J,prepend:C.prepend,labelIndx:C.labelIndx,valueIndx:Q,groupIndx:C.groupIndx,dataMap:U})):H="<input class='"+
J+"' "+P+" "+O+" type=text name='"+l+"' />",f(H).appendTo(F).val("select"==K&&null!=Q&&(M[Q]||this.columns[Q])?M[Q]?s[M[Q]]:s[Q]:I)):K&&"contenteditable"!=K||(F.html("<div contenteditable='true' tabindx='0' "+O+" "+P+" class='"+J+"'></div>"),F.children().html(I),v=!0);"function"==typeof N&&N.call(d,L);var b=this,D=F.children(".pq-editor-focus"),W=m.filterKeys;(d=n.editModel)&&void 0!==d.filterKeys&&(W=d.filterKeys);var S={$cell:F,$editor:D,dataIndx:l,column:n,colIndx:e,rowIndx:g,rowIndxPage:h,rowData:s};
m.indices=S;D.data({FK:W}).on("click",function(a){f(this).focus()}).on("keydown",function(a){b.iKeyNav._keyDownInEdit(a)}).on("keypress",function(a){return b.iKeyNav._keyPressInEdit(a,{FK:W})}).on("keyup",function(a){return b.iKeyNav._keyUpInEdit(a,{FK:W})}).on("blur",function(a,c){var d=b.options.editModel,e=d.onBlur,h="save"==e,g="validate"==e,p=d.cancelBlurCls,l=c?c.force:!1;if(!b._quitEditMode&&!b._blurEditMode&&d.indices){d=f(a.target);if(!l){if(!1===b._trigger("editorBlur",a,S)||!e||p&&d.hasClass(p))return;
if(d.hasClass("hasDatepicker")){if(d.datepicker("widget").is(":visible"))return!1}else if(d.hasClass("ui-autocomplete-input")){if(d.autocomplete("widget").is(":visible"))return}else if(d.hasClass("ui-multiselect")){if(f(".ui-multiselect-menu").is(":visible")||f(document.activeElement).closest(".ui-multiselect-menu").length)return}else if(d.hasClass("pq-select-button")&&(f(".pq-select-menu").is(":visible")||f(document.activeElement).closest(".pq-select-menu").length))return}b._blurEditMode=!0;if(!b.saveEditCell({evt:a,
silent:l||h||!g})&&!l&&g)return b._deleteBlurEditMode(),!1;b.quitEditMode({evt:a});b._deleteBlurEditMode()}}).on("focus",function(a){b._trigger("editorFocus",a,S)});b._trigger("editorBegin",c,S);D.focus();window.setTimeout(function(){!1===f(document.activeElement).hasClass("pq-editor-focus")&&b.element.find(".pq-editor-focus").focus()},0);if(a)if(v)try{var Y=D[0],V=document.createRange();V.selectNodeContents(Y);var X=window.getSelection();X.removeAllRanges();X.addRange(V)}catch(T){}else D.select()};
a._deleteBlurEditMode=function(a){var b=this;a=a?a:{};b._blurEditMode&&(a.timer?window.setTimeout(function(){delete b._blurEditMode},0):delete b._blurEditMode)};a.getRow=function(a){var b=a.rowIndxPage,c=a.rowIndx,d=this.rowIndxOffset,b=null==b?c-d:b;a=a.all?this.$tbl:this.get$Tbl(b);var e;a&&a.length&&(c=a.children("tbody"),null!=b&&(e=c.children("tr[pq-row-indx="+b+"]"),e.length>a.length&&(e=e.filter(".pq-detail-master"))));return e};a.getCell=function(a){var b=a.rowIndxPage,c=a.rowIndx,b=null==
b?c-this.rowIndxOffset:b,c=a.colIndx,d=a.dataIndx,c=null==c?this.getColIndx({dataIndx:d}):c;return(a=a.all?this.$tbl:this.get$Tbl(b,c))&&a.length?a.children().children("tr[pq-row-indx="+b+"]").children("[pq-col-indx="+c+"]"):f()};a.getCellHeader=function(a){var b=a.colIndx;a=a.dataIndx;b=null==b?this.getColIndx({dataIndx:a}):b;a=this.$tbl_header;var c,d=this.options.freezeCols;void 0!=a&&(1<a.length&&(a=b>=d?f(a[1]):f(a[0])),c=a.children().children("tr.pq-grid-title-row:last").children("[pq-col-indx="+
b+"]"));return 0==c.length||"hidden"==c[0].style.visibility?null:c};a.getEditorIndices=function(){var a=this.options.editModel.indices;return a?f.extend({},a):null};a.getEditCellData=function(){var a=this.options,b=a.editModel.indices;if(!b)return null;var c=b.rowIndxPage,d=b.rowIndx,e=this.colModel[b.colIndx],h=e.editor,g=a.editor,a=h?f.extend({},g,h):g,l=a.valueIndx,n=a.labelIndx,h=(h=a.mapIndices)?h:{},s=e.dataIndx,v=this.$div_focus.children(".pq-editor-inner"),m;if("function"==typeof a.getData)m=
a.getData.call(this.element[0],{$cell:v,rowData:b.rowData,dataIndx:s,rowIndx:d,rowIndxPage:c,column:e});else if(b=g._type,"checkbox"==b)m=v.children(),m="triple"==a.subtype?m.pqval():m.is(":checked")?!0:!1;else if("contenteditable"==b)m=v.children().html();else if((c=v.find('*[name="'+s+'"]'))&&c.length)if("select"==b&&null!=l)if(h[l]||this.columns[l]){if(m={},m[h[l]?h[l]:l]=c.val(),m[h[n]?h[n]:n]=c.find("option:selected").text(),a=a.dataMap)if(b=c.find("option:selected").data("map"))for(c=0;c<a.length;c++)d=
a[c],m[h[d]?h[d]:d]=b[d]}else m=c.val();else m=c.val();else(c=v.find(".pq-editor-focus"))&&c.length&&(m=c.val());return m};a.getCellIndices=function(a){var b=a.$td;if(null==b||0==b.length||b.closest(".pq-grid")[0]!=this.element[0])return{rowIndxPage:null,colIndx:null};a=b.parent("tr").attr("pq-row-indx");var c;null!=a&&(a=parseInt(a),c=a+this.rowIndxOffset);var b=b.attr("pq-col-indx"),d;null!=b&&(b=parseInt(b),0<=b&&(d=this.colModel[b].dataIndx));return{rowIndxPage:a,rowIndx:c,colIndx:b,dataIndx:d}};
a.getRowsByClass=function(a){var b=this.options,c="remote"==b.pageModel.type?!0:!1,d=this.rowIndxOffset,b=b.dataModel.data,e=[];if(null==b)return e;for(var h=0,g=b.length;h<g;h++){var l=b[h];a.rowData=l;this.hasClass(a)&&(l={rowData:l},l.rowIndx=c?h+d:h,e.push(l))}return e};a.getCellsByClass=function(a){var b=this.options,c="remote"==b.pageModel.type?!0:!1,d=this.rowIndxOffset,b=b.dataModel.data,e=this.colModel,h=e.length,g=[],l=function(a){for(var b=0;b<h;b++){var c=e[b].dataIndx;a.dataIndx=c;this.hasClass(a)&&
g.push({rowData:a.rowData,dataIndx:c,colIndx:b,rowIndx:a.rowIndx})}};if(null==b)return g;if(null!=a.rowIndx||null!=a.rowIndxPage||null!=a.rowData)a.rowData=a.rowData||this.getRowData(a),null==a.rowIndx&&(a.rowIndx=this.getRowIndx({rowData:s})),l(a);else for(var n=0,f=b.length;n<f;n++){var s=b[n];a.rowData=s;a.rowIndx=c?n+d:n;l(a)}return g};a.data=function(a){var b=a.dataIndx,c=a.colIndx,b=null!=c?this.colModel[c].dataIndx:b,c=a.data,d=null==c||"string"==typeof c?!0:!1;a=a.rowData||this.getRowData(a);
if(!a)return{data:null};if(null==b){b=a.pq_rowdata;if(d){var e;null!=b&&(e=null==c?b:b[c]);return{data:e}}c=f.extend(!0,a.pq_rowdata,c);a.pq_rowdata=c}else{var h=a.pq_celldata;if(d)return null!=h&&(b=h[b],e=null==c||null==b?b:b[c]),{data:e};h||(a.pq_celldata={});c=f.extend(!0,a.pq_celldata[b],c);a.pq_celldata[b]=c}};a.attr=function(a){var b=a.rowIndx,c=a.dataIndx,d=a.colIndx,c=null!=d?this.colModel[d].dataIndx:c,d=a.attr,e=null==d||"string"==typeof d?!0:!1,h=this.rowIndxOffset,g=a.refresh;a=a.rowData||
this.getRowData(a);if(!a)return{attr:null};e||!1===g||null!=b||(b=this.getRowIndx({rowData:a}).rowIndx);if(null==c){c=a.pq_rowattr;if(e){var l;null!=c&&(l=null==d?c:c[d]);return{attr:l}}d=f.extend(!0,a.pq_rowattr,d);a.pq_rowattr=d;!1!==g&&null!=b&&(b=this.getRow({rowIndxPage:b-h}))&&(c=n(d),b.attr(c))}else{var s=a.pq_cellattr;if(e)return null!=s&&(b=s[c],l=null==d||null==b?b:b[d]),{attr:l};s||(a.pq_cellattr={});d=f.extend(!0,a.pq_cellattr[c],d);a.pq_cellattr[c]=d;!1!==g&&null!=b&&(b=this.getCell({rowIndxPage:b-
h,dataIndx:c}))&&(c=n(d),b.attr(c))}};var n=function(a,b){var c={},d;for(d in a){var e=a[d];if(e)if("title"==d)e=e.replace(/\"/g,"&quot;"),c[d]=e;else if("style"==d&&"object"==typeof e){var h=[],g,l;for(l in e)g=e[l],b&&"display"==l&&"none"==g||g&&h.push(l+":"+g);(e=h.join(";")+(h.length?";":""))&&(c[d]=e)}else"object"==typeof e&&(e=JSON.stringify(e)),c[d]=e}return c};a.removeData=function(a){var b=a.dataIndx,c=a.colIndx,b=null!=c?this.colModel[c].dataIndx:b,c=a.data,c=null==c?[]:c,c="string"==typeof c?
c.split(" "):c,d=c.length,e=a.rowData||this.getRowData(a);if(e)if(null==b){if(b=e.pq_rowdata){if(d)for(a=0;a<d;a++){var h=c[a];delete b[h]}d&&!f.isEmptyObject(b)||delete e.pq_rowdata}}else if((e=e.pq_celldata)&&e[b]){var g=e[b];if(d)for(a=0;a<d;a++)h=c[a],delete g[h];d&&!f.isEmptyObject(g)||delete e[b]}};a.removeAttr=function(a){var b=a.rowIndx,c=a.dataIndx,d=a.colIndx,c=null!=d?this.colModel[d].dataIndx:c,e=a.attr,e=null==e?[]:e,e="string"==typeof e?e.split(" "):e,h=e.length,d=b-this.rowIndxOffset,
g=a.refresh,l=a.rowData||this.getRowData(a);if(l)if(!1!==g&&null==b&&(b=this.getRowIndx({rowData:l}).rowIndx),null==c){if(c=l.pq_rowattr){if(h)for(a=0;a<h;a++){var n=e[a];delete c[n]}else for(n in c)e.push(n);h&&!f.isEmptyObject(c)||delete l.pq_rowattr}!1!==g&&null!=b&&e.length&&(e=e.join(" "),(b=this.getRow({rowIndxPage:d}))&&b.removeAttr(e))}else{if((l=l.pq_cellattr)&&l[c]){var s=l[c];if(h)for(a=0;a<h;a++)n=e[a],delete s[n];else for(n in s)e.push(n);h&&!f.isEmptyObject(s)||delete l[c]}!1!==g&&null!=
b&&e.length&&(e=e.join(" "),(b=this.getCell({rowIndxPage:d,dataIndx:c}))&&b.removeAttr(e))}};f.paramquery.uniqueArray=function(a){for(var b=[],c=f.inArray,d=0,e=a.length;d<e;d++){var h=a[d];-1==c(h,b)&&b.push(h)}return b};a.addClass=function(a){var b=a.rowIndx,c=a.dataIndx,d=f.paramquery.uniqueArray,e=a.cls,h=this.rowIndxOffset,g=a.refresh,l=a.rowData||this.getRowData(a);if(l)if(!1!==g&&null==b&&(b=this.getRowIndx({rowData:l}).rowIndx),null==c){var c=l.pq_rowcls,n;n=d((c?c+" "+e:e).split(/\s+/)).join(" ");
l.pq_rowcls=n;!1!==g&&null!=b&&(b=this.getRow({rowIndxPage:b-h}))&&b.addClass(e)}else{a=[];"function"!=typeof c.push?a.push(c):a=c;var s=l.pq_cellcls;s||(s=l.pq_cellcls={});for(var l=0,v=a.length;l<v;l++)c=a[l],n=(n=s[c])?n+" "+e:e,n=d(n.split(/\s+/)).join(" "),s[c]=n,!1!==g&&null!=b&&(c=this.getCell({rowIndxPage:b-h,dataIndx:c}))&&c.addClass(e)}};a.removeClass=function(a){var b=a.rowIndx,c=this.getRowData(a),d=a.dataIndx,e=a.cls;a=a.refresh;if(c){var h=c.pq_cellcls,g=c.pq_rowcls;!1!==a&&null==b&&
(b=this.getRowIndx({rowData:c}).rowIndx);if(null==d)g&&(c.pq_rowcls=this._removeClass(g,e),null!=b&&!1!==a&&(b=this.getRow({rowIndx:b}))&&b.removeClass(e));else if(h){g=[];"function"!=typeof d.push?g.push(d):g=d;for(var l=0,n=g.length;l<n;l++){var d=g[l],f=h[d];f&&(c.pq_cellcls[d]=this._removeClass(f,e),null!=b&&!1!==a&&(d=this.getCell({rowIndx:b,dataIndx:d}))&&d.removeClass(e))}}}};a.hasClass=function(a){var b=a.dataIndx,c=a.cls;a=this.getRowData(a);c=new RegExp("\\b"+c+"\\b");return a?null==b?(b=
a.pq_rowcls)&&c.test(b)?!0:!1:(a=a.pq_cellcls)&&a[b]&&c.test(a[b])?!0:!1:null};a._removeClass=function(a,b){if(a&&b){for(var c=a.split(/\s+/),d=b.split(/\s+/),e=[],h=0,g=c.length;h<g;h++){for(var l=c[h],n=!1,f=0,s=d.length;f<s;f++)if(l===d[f]){n=!0;break}n||e.push(l)}return 1<e.length?e.join(" "):1===e.length?e[0]:null}};a.getRowIndx=function(a){var b=a.$tr,c=a.rowData;a=a.row;if(c||a){var b=this.options,d=b.dataModel,b="remote"==b.pageModel.type?!0:!1,e=d.data,h=!1,d=d.dataUF;if(c){var g=!1;if(e)for(var l=
0,n=e.length;l<n;l++)if(e[l]==c){g=!0;break}if(!g&&d)for(h=!0,l=0,n=d.length;l<n;l++)if(d[l]==c){g=!0;break}}else for(l=0,n=e;l<n;l++){var c=e[l],g=!0,f;for(f in a)a[f]!==c[f]&&(g=!1);if(g)break}return g?(g=this.rowIndxOffset,{rowIndxPage:h?void 0:b?l:l-g,uf:h,rowIndx:b?l+g:l,rowData:c}):{}}if(null==b||0==b.length)return{rowIndxPage:null};c=b.attr("pq-row-indx");if(null==c)return{rowIndxPage:null};c=parseInt(c);return{rowIndxPage:c,rowIndx:c+this.rowIndxOffset}};var s=function(a){this.options=a.options;
this.that=a;var b=this,c=a.widgetEventPrefix.toLowerCase();a.element.on(c+"celleditkeyup"+a.eventNamespace,function(a,c){return b.filterKeys(a,c)})},l=s.prototype;l._incrRowIndx=function(a,b){var c=this.that,d=a;b=null==b?1:b;for(var c=c.pdata,e=0,h=a+1,g=c.length;h<g&&(c[h].pq_hidden||(e++,d=h,e!=b));h++);return d};l._decrRowIndx=function(a,b){var c=a,d=this.that.pdata;b=null==b?1:b;for(var e=0,h=a-1;0<=h&&(d[h].pq_hidden||(e++,c=h,e!=b));h--);return c};a.addColumn=function(a,b){var c=this.options,
d=c.dataModel.data;c.colModel.push(a);this._calcThisColModel();for(c=0;c<d.length;c++)d[c].push("")};a.rowNextSelect=function(){var a=this.selection({type:"row",method:"getSelection"}),b,c=this.rowIndxOffset;a&&a[0]&&(a=a[0].rowIndx,b=this.iKeyNav._incrRowIndx(a-c));null!=b&&(this.setSelection(null),this._setSelection({rowIndxPage:b}));return b};a.rowPrevSelect=function(){var a=this.selection({type:"row",method:"getSelection"}),b,c=this.rowIndxOffset;a&&a[0]&&(a=a[0].rowIndx,b=this.iKeyNav._decrRowIndx(a-
c));null!=b&&(this.setSelection(null),this.setSelection({rowIndxPage:b}));return b};l._incrIndx=function(a,b){var c=this.that,d=c._getLastVisibleRowIndxPage(c.pdata),c=c.colModel,e=c.length;if(null==b){if(a==d)return null;a=this._incrRowIndx(a);return{rowIndxPage:a}}var h;do{b++;if(b>=e){if(a==d)return null;a=this._incrRowIndx(a);b=0}h=c[b]}while(h&&h.hidden);return{rowIndxPage:a,colIndx:b}};l._decrIndx=function(a,b){var c=this.that,d=c.colModel,e=d.length,c=c._getFirstVisibleRowIndxPage(c.pdata);
if(null==b){if(a==c)return null;a=this._decrRowIndx(a);return{rowIndxPage:a}}var h;do{b--;if(0>b){if(a==c)return null;a=this._decrRowIndx(a);b=e-1}h=d[b]}while(h&&h.hidden);return{rowIndxPage:a,colIndx:b}};l._incrEditIndx=function(a,b){var c=this.that,d=c.colModel,e=d.length,h,g=c.rowIndxOffset,l=c._getLastVisibleRowIndxPage(c.pdata);do{b++;if(b>=e){if(a==l)return null;do{a=this._incrRowIndx(a);var n=a+g;h=c.isEditableRow({rowIndx:n});if(a==l&&!1==h)return null}while(!1==h);b=0}h=d[b];n=a+g;n=c.isEditableCell({rowIndx:n,
colIndx:b,checkVisible:!0})}while(h&&(h.hidden||!1==n));return{rowIndxPage:a,colIndx:b}};l._decrEditIndx=function(a,b){var c=this.that,d=c.colModel,e=d.length,h,g=c.rowIndxOffset,l=c._getFirstVisibleRowIndxPage(c.pdata);do{b--;if(0>b){if(a==l)return null;do{a=this._decrRowIndx(a);var n=a+g;h=c.isEditableRow({rowIndx:n});if(a==l&&!1==h)return null}while(!1==h);b=e-1}h=d[b];n=a+g;n=c.isEditableCell({rowIndx:n,colIndx:b,checkVisible:!0})}while(h&&(h.hidden||!1==n));return{rowIndxPage:a,colIndx:b}};l._incrEditRowIndx=
function(a,b){var c=this.that,d=c.rowIndxOffset,e=c._getLastVisibleRowIndxPage(c.pdata);if(a==e)return null;do{a=this._incrRowIndx(a);var h=a+d,g=c.isEditableRow({rowIndx:h}),h=c.isEditableCell({rowIndx:h,colIndx:b}),g=g&&h;if(a==e&&!g)return null}while(!g);return{rowIndxPage:a,colIndx:b}};l._decrEditRowIndx=function(a,b){var c=this.that,d=c.rowIndxOffset,e=c._getFirstVisibleRowIndxPage(c.pdata);if(a==e)return null;do{a=this._decrRowIndx(a);var h=a+d,g=c.isEditableRow({rowIndx:h}),h=c.isEditableCell({rowIndx:h,
colIndx:b}),g=g&&h;if(a==e&&!g)return null}while(!g);return{rowIndxPage:a,colIndx:b}};a._onKeyPressDown=function(a){if(0<f(a.target).closest(".pq-grid-header").length)return!1==this._trigger("headerKeyDown",a,{dataModel:this.options.dataModel})?!1:!0;if(!1===this.iKeyNav._bodyKeyPressDown(a)||!1==this._trigger("keyDown",a,{dataModel:this.options.dataModel}))return!1};l._saveAndMove=function(a,b){if(null==a)return b.preventDefault(),!1;var c=this.that,d=this.options.selectionModel,e=a.rowIndxPage,
h=a.colIndx;c._blurEditMode=!0;if(!1===c.saveEditCell({evt:b})||!c.pdata)return c.pdata||c.quitEditMode(b),c._deleteBlurEditMode({timer:!0,msg:"_saveAndMove saveEditCell"}),b.preventDefault(),!1;c.quitEditMode(b);if(a.incr)var g,e=(g=b.shiftKey?this._decrEditIndx(e,h):this._incrEditIndx(e,h))?g.rowIndxPage:e,h=g?g.colIndx:h;"row"==d.type?(c.setSelection(null),c.setSelection({rowIndxPage:e}),c.scrollColumn({colIndx:h})):"cell"==d.type?(c.setSelection(null),c.setSelection({rowIndxPage:e,colIndx:h})):
(c.scrollRow({rowIndxPage:e}),c.scrollColumn({colIndx:h}));!1!==a.edit&&c._editCell({rowIndxPage:e,colIndx:h});c._deleteBlurEditMode({timer:!0,msg:"_saveAndMove"});b.preventDefault();return!1};l._keyPressInEdit=function(a,b){var c=this.that,d=c.options.editModel.indices;b=b?b:{};var e=b.FK,h="Backspace Left Right Up Down Del Home End".split(" "),g=d.column.dataType;return a.key&&-1!==f.inArray(a.key,h)?!0:!1===c._trigger("editorKeyPress",a,f.extend({},d))||e&&("float"==g||"integer"==g)&&(c="float"==
g?"0123456789.-":"0123456789-",d=(d=a.charCode)?d:a.keyCode,(d=String.fromCharCode(d))&&-1==c.indexOf(d))?!1:!0};l.getValText=function(a){a=a[0].nodeName.toLowerCase();var b="text";-1!=f.inArray(a,["input","textarea","select"])&&(b="val");return b};l._keyUpInEdit=function(a,b){var c=this.that,d=c.options;b=b?b:{};var e=b.FK,d=d.editModel,h=d.indices;c._trigger("editorKeyUp",a,f.extend({},h));c=h.column.dataType;if(e&&("float"==c||"integer"==c)){var e=f(a.target),h="integer"==c?d.reInt:d.reFloat,d=
this.getValText(e),g=e.data("oldVal"),l=e[d]();if(!1==h.test(l))if(h.test(g))e[d](g);else if(c="float"==c?parseFloat(g):parseInt(g),isNaN(c))e[d](0);else e[d](c)}};l._keyDownInEdit=function(a){var b=this.that,c=b.options,d=c.editModel.indices;if(d){var e=f(a.target),h=f.ui.keyCode,g=c.selectionModel,l=c.editModel,d=f.extend({},d),c=d.rowIndxPage,n=d.colIndx,s=d.column.editModel,l=s?f.extend({},l,s):l,s=this.getValText(e);e.data("oldVal",e[s]());if(!1==b._trigger("cellEditKeyDown",a,d)||!1==b._trigger("editorKeyDown",
a,d))return!1;if(a.keyCode==h.TAB)return d={rowIndxPage:c,colIndx:n,incr:!0},this._saveAndMove(d,a);if(a.keyCode==l.saveKey)return d="next"==l.onSave?{rowIndxPage:c,colIndx:n,incr:!0}:{rowIndxPage:c,colIndx:n,edit:!1},this._saveAndMove(d,a);if(a.keyCode==h.ESCAPE)return b.quitEditMode({evt:a}),"cell"==g.type?b.getCell({rowIndxPage:c,colIndx:n}).attr("tabindex",0).focus():"row"==g.type&&(b=b.getRow({rowIndxPage:c}),f(b[0]).attr("tabindex",0).focus()),a.preventDefault(),!1;if(a.keyCode==h.PAGE_UP||
a.keyCode==h.PAGE_DOWN)return a.preventDefault(),!1;if(l.keyUpDown){if(a.keyCode==h.DOWN)return d=this._incrEditRowIndx(c,n),this._saveAndMove(d,a);if(a.keyCode==h.UP)return d=this._decrEditRowIndx(c,n),this._saveAndMove(d,a)}}};l.select=function(a){var b=this.that,c=a.rowIndx,d=a.colIndx,e=b.options.selectionModel;a=a.evt;a.shiftKey&&"single"!=e.mode?"row"==e.type?(b.scrollRow({rowIndx:c}),b.iRows.extendSelection({rowIndx:c,evt:a})):"cell"==e.type&&(b.scrollCell({rowIndx:c,colIndx:d}),b.iCells.extendSelection({rowIndx:c,
colIndx:d,evt:a})):b.setSelection({rowIndx:c,colIndx:d,evt:a,setFirst:!0})};l._bodyKeyPressDown=function(a){var d=this.that,e,h,g=d.rowIndxOffset,l=this.options,n=d.colModel,s=l.selectionModel,v=l.editModel,m=a.ctrlKey||a.metaKey,k,A,E=f.ui.keyCode,C=a.keyCode;if(v.indices)d.$div_focus.find(".pq-cell-focus").focus();else{if("row"==s.type){h=m?d.iRows.getFocusSelection({old:!0}):d.iRows.getFocusSelection({old:!1});if(null==h)return;k=h.rowIndx;l=k-g;if(null==k)return;if(!1==d._trigger("rowKeyDown",
a,{rowData:d.pdata[l],rowIndx:k,rowIndxPage:l}))return!1}else if("cell"==s.type){e=m?d.iCells.getFocusSelection({old:!0}):d.iCells.getFocusSelection({old:!1});if(null==e)return;A=e;k=A.rowIndx;var l=k-g,F=A.dataIndx;A=d.getColIndx({dataIndx:F});if(null==k||null==A)return;if(!1==d._trigger("cellKeyDown",a,{rowData:d.pdata[l],rowIndx:k,rowIndxPage:l,colIndx:A,dataIndx:F,column:n[A]}))return!1;if(a.cancelBubble)return}else return;if(C==E.LEFT||C==E.RIGHT||C==E.UP||C==E.DOWN){e=b(l,A,d);var D;e&&(D=d.data({rowIndx:k,
colIndx:A,data:"pq_merge_nav"}).data);if(C==E.LEFT){if(k=D?D.rowIndx:k,A=this._decrIndx(k-g,A))k=A.rowIndxPage+g,this.select({rowIndx:k,colIndx:A.colIndx,evt:a})}else if(C==E.RIGHT){if(k=D?D.rowIndx:k,A+=e&&e.colspan?e.colspan-1:0,A=this._incrIndx(k-g,A))k=A.rowIndxPage+g,this.select({rowIndx:k,colIndx:A.colIndx,evt:a})}else C==E.UP?(e?(k=c({rowIndx:k,colIndx:A,that:d}),k=k.rowIndx,l=this._decrRowIndx(k-g),k=l+g,k=c({rowIndx:k,colIndx:A,that:d}),k=k.rowIndx):(l=this._decrRowIndx(l),k=l+g),A=D?D.colIndx:
A,null!=l&&this.select({rowIndx:k,colIndx:A,evt:a})):C==E.DOWN&&(l+=e&&e.rowspan&&l+e.rowspan<d.pdata.length?e.rowspan-1:0,A=D?D.colIndx:A,l=this._incrRowIndx(l),null!=l&&(k=l+g,this.select({rowIndx:k,colIndx:A,evt:a})));a.preventDefault()}else if(C==E.PAGE_DOWN||C==E.SPACE){if(d=this.pageDown(l))l=d.rowIndxPage,null!=l&&(k=l+g,this.select({rowIndx:k,colIndx:A,evt:a}));a.preventDefault()}else if(C==E.PAGE_UP){if(d=this.pageUp(l))l=d.rowIndxPage,null!=l&&(k=l+g,this.select({rowIndx:k,colIndx:A,evt:a}));
a.preventDefault()}else C==E.HOME?("row"==s.type||m?(k=d._getFirstVisibleRowIndxPage(d.pdata)+g,this.select({rowIndx:k,colIndx:A,evt:a})):"cell"==s.type&&(A=d._getFirstVisibleColIndx(),this.select({rowIndx:k,colIndx:A,evt:a})),a.preventDefault()):C==E.END?("row"==s.type||m?(k=d._getLastVisibleRowIndxPage(d.pdata)+g,this.select({rowIndx:k,colIndx:A,evt:a})):"cell"==s.type&&(A=d._getLastVisibleColIndx(),this.select({rowIndx:k,colIndx:A,evt:a})),a.preventDefault()):C==E.ENTER?("row"==s.type?null!=h&&
d.editFirstCellInRow({rowIndx:l+g}):null!=e&&(D=d.getCell({rowIndxPage:l,colIndx:A}))&&0<D.length&&(k=l+g,g=d.isEditableRow({rowIndx:k}),D=d.isEditableCell({rowIndx:k,colIndx:A}),g&&D&&d.editCell({rowIndxPage:l,colIndx:A})),a.preventDefault()):m&&"65"==C?("row"==s.type&&"single"!=s.mode?d.iRows.selectAll({all:s.all}):"cell"==s.type&&"single"!=s.mode&&d.iCells.selectAll({all:s.all}),a.preventDefault()):v.pressToEdit&&32<=C&&127>=C&&!m&&null!=e&&(D=d.getCell({rowIndxPage:l,colIndx:A}))&&0<D.length&&
(k=l+g,g=d.isEditableRow({rowIndx:k}),D=d.isEditableCell({rowIndx:k,colIndx:A}),g&&D&&d.editCell({rowIndxPage:l,colIndx:A,select:!0}))}};l.incrPageSize=function(){for(var a=this.that,b=a.$tbl,c=b.children("tbody").children("tr.pq-grid-row").not(".pq-group-row,.pq-summary-row"),b=parseInt(b.css("marginTop")),b=a.iRefresh.getEContHt()-b,d=c.length-1;0<=d;d--){var e=c[d];if(e.offsetTop<b)break}return{rowIndxPage:a.getRowIndx({$tr:f(e)}).rowIndxPage}};l.pageNonVirtual=function(a,b){var c=this.that,d=
c.$cont[0].offsetHeight-c._getSBHeight(),e=c.getRow({rowIndxPage:a}),h=0,g=0,l=f(e[0])[b]("tr.pq-grid-row"),n=l.length;if(0<n){do{e=l[g];h+=e.offsetHeight;if(h>=d)break;g++}while(g<n);g=0<g?g-1:g;do if(e=f(l[g]),a=c.getRowIndx({$tr:e}).rowIndxPage,null!=a)break;else g--;while(0<=g)}return a};l.pageDown=function(a){var b=this.that,c=b.options,d=b.$vscroll.pqScrollBar("option"),e=d.cur_pos,h=d.num_eles,d=d.ratio;if(c.virtualY){if(e<h-1){a=this.incrPageSize().rowIndxPage;var g=b._calcCurPosFromRowIndxPage(a);
if(null==g)return;b.$vscroll.pqScrollBar("option","cur_pos",g).pqScrollBar("scroll")}}else null!=a?a=this.pageNonVirtual(a,"nextAll"):1>d&&(c=b.iRefresh.getEContHt(),b=b.iMouseSelection,b.updateTableY(-1*c),b.syncScrollBarVert());return{rowIndxPage:a,curPos:g}};l.pageUp=function(a){var b=this.that,c=b.options,d=b.$vscroll.pqScrollBar("option"),e=d.cur_pos,d=d.ratio;if(c.virtualY){if(0<e){a=this.decrPageSize().rowIndxPage;var h=b._calcCurPosFromRowIndxPage(a);if(null==h)return;b.$vscroll.pqScrollBar("option",
"cur_pos",h).pqScrollBar("scroll")}}else null!=a?a=this.pageNonVirtual(a,"prevAll"):0<d&&(c=b.iRefresh.getEContHt(),b=b.iMouseSelection,b.updateTableY(c),b.syncScrollBarVert());return{rowIndxPage:a,curPos:h}};l.decrPageSize=function(){var a=this.that,b=a.$tbl.children("tbody").children("tr.pq-grid-row").not(".pq-group-row,.pq-summary-row"),c=a.options.freezeRows,d=0;if(b.length){var e;c?(e=b.filter("tr.pq-last-frozen-row"),e.length&&(e=e.next())):2<=b.length&&(e=f(b[1]));e&&e.length&&(d=a.getRowIndx({$tr:e}).rowIndxPage,
d=d-a.pageSize+4,0>d&&(d=0))}return{rowIndxPage:d}};a._calcNumHiddenFrozens=function(){for(var a=0,b=this.options.freezeCols,c=0;c<b;c++)this.colModel[c].hidden&&a++;return a};a._calcNumHiddenUnFrozens=function(a){var b=0;a=null!=a?a:this.colModel.length;for(var c=this.options.freezeCols;c<a;c++)this.colModel[c].hidden&&b++;return b};a._getSBHeight=function(){return this.iRefresh.getSBHeight()};a._getSBWidth=function(a){return this.iRefresh.getSBWidth()};a._getFirstVisibleRowIndxPage=function(a){for(var b=
0,c=a.length;b<c;b++)if(!a[b].pq_hidden)return b};a._getLastVisibleRowIndxPage=function(a){for(var b=a.length-1;0<=b;b--)if(!a[b].pq_hidden)return b;return null};a._getFirstVisibleColIndx=function(){for(var a=this.colModel,b=a.length,c=0;c<b;c++)if(!a[c].hidden)return c;return null};a._getLastVisibleColIndx=function(){for(var a=this.colModel,b=a.length-1;0<=b;b--)if(!a[b].hidden)return b;return null};a.getTotalVisibleColumns=function(){for(var a=this.colModel,b=a.length,c=0,d=0;d<b;d++)a[d].hidden||
c++;return c};a._calcCurPosFromRowIndxPage=function(a){var b=this.options,c=b.groupModel,d=c?this.dataGM:this.pdata,e=b.freezeRows;if(a<e)return 0;for(var b=0,h=e,g=d.length;e<g;e++){var l=d[e];if(!c||!l.groupSummary&&!l.groupTitle){if(h==a)break;h++}l.pq_hidden||b++}return b>=g?null:b};a._calcCurPosFromColIndx=function(a){var b=this.colModel,c=this.options.freezeCols;if(a<c)return 0;for(var d=0,e=c,h=b.length;c<h;c++){var g=b[c];if(e==a)break;e++;g.hidden||d++}return d>=h?null:d};var v=function(a,
b,c){var d=0,e=this.options.numberCell,h=this.colModel;-1==a&&(e.show&&(d=c?d+(parseInt(e.width)+1):d+e.outerWidth),a=0);if(c)for(;a<b;a++){if((c=h[a])&&!c.hidden){if(!c._width)throw"assert failed";d+=c._width+0}}else for(;a<b;a++)(c=h[a])&&!c.hidden&&(d+=c.outerWidth);return d};f.paramquery.pqgrid.calcWidthCols=v;a.calcHeightFrozenRows=function(){var a=this.$tbl,b=0;a&&a.length&&(a=f(a[0]).find("tr.pq-last-frozen-row"))&&a.length&&(b=a[0],b=b.offsetTop+b.offsetHeight);return b};a._calcRightEdgeCol=
function(a){var b=0,c=0,d=this.colModel,e=this.hidearrHS,h=this.options.numberCell;h.show&&(b+=h.outerWidth,c++);for(h=0;h<=a;h++){var g=d[h];g.hidden||!1!=e[h]||(b+=g.outerWidth,c++)}return{width:b,cols:c}};a.nestedCols=function(a,b,c){var d=a.length,e=[];null==b&&(b=1);for(var h=b,g=0,l=0,n=0;n<d;n++){var f=a[n];if(!0===c||!1===c)f.hidden=c;if(null!=f.colModel&&0<f.colModel.length){var s=this.nestedCols(f.colModel,b+1,f.hidden),e=e.concat(s.colModel);0<s.colSpan?(s.depth>h&&(h=s.depth),f.colSpan=
s.colSpan,g+=s.colSpan):(f.colSpan=0,f.hidden=!0);f.childCount=s.childCount;l+=s.childCount}else f.hidden?f.colSpan=0:(f.colSpan=1,g++),f.childCount=0,l++,e.push(f)}return{depth:h,colModel:e,colSpan:g,width:0,childCount:l}};a.getHeadersCells=function(){for(var a=this.options.colModel,b=this.colModel.length,c=this.depth,d=[],e=0;e<c;e++){d[e]=[];for(var h=0,g=0,l=0;l<b;l++){var n;if(0==e)n=a[h];else{var f=d[e-1][l];n=f.colModel;if(null==n||0==n.length)n=f;else{for(var f=l-f.leftPos,s=0,v=0,k=0;k<n.length;k++)if(s+=
0<n[k].childCount?n[k].childCount:1,f<s){v=k;break}n=n[v]}}f=n.childCount?n.childCount:1;l==g?(n.leftPos=l,d[e][l]=n,g+=f,a[h+1]&&h++):d[e][l]=d[e][l-1]}}return this.headerCells=d};a.getDataType=function(){var a=this.colModel;if(a&&a[0])return"string"==typeof a[0].dataIndx?"JSON":"ARRAY";throw"dataType unknown";};a.assignRowSpan=function(){for(var a=this.colModel.length,b=this.headerCells,c=this.depth,d=0;d<a;d++)for(var e=0;e<c;e++){var h=b[e][d];if(!(0<d&&h==b[e][d-1]||0<e&&h==b[e-1][d])){for(var g=
1,l=e+1;l<c;l++)h==b[l][d]&&g++;h.rowSpan=g}}return b};a._autoGenColumns=function(){var a=this.options,b=a.columnTemplate||{},c=b.dataType,d=b.title,e=b.width,b=a.dataModel.data,h=f.paramquery.validation,g=[];b&&b.length&&f.each(b[0],function(a,b){var l="string";h.isInteger(b)?l=-1<b+-1?"float":"integer":h.isDate(b)?l="date":h.isFloat(b)&&(l="float");g.push({dataType:c?c:l,dataIndx:a,title:d?d:a,width:e?e:100})});a.colModel=g};a._calcThisColModel=function(){var a=this.options,b=a.columnTemplate,c=
a.colModel;c||(this._autoGenColumns(),c=a.colModel);a=this.nestedCols(c);this.colModel=a.colModel;this.depth=a.depth;a=this.colModel;c=a.length;if(b)for(var d=0;d<c;d++){var e=a[d],h=f.extend({},b,e,!0);f.extend(e,h,!0)}this.getHeadersCells();this.assignRowSpan();this._refreshDataIndices()};a._createHeader=function(){this.iHeader.createHeader()};a.createTable=function(a){a.other=!0;this.iGenerateView.generateView(a)};f.widget("paramquery._pqGrid",f.ui.mouse,a)})(jQuery);
(function(f){function k(a){this.that=a}function m(a,b,c){for(var d=0;b<c;b++)!0!==a[b].hidden&&d++;return d}function b(a){if(a.length)var b=a.css({tableLayout:"auto",width:""}).addClass("pq-no-wrap").removeClass("pq-wrap").children("tbody").children(".pq-row-hidden").children("td").css("width","");return b||f()}var c=f.paramquery._pqGrid.prototype;c.getHeaderColumnFromTD=function(a){var b=a.attr("pq-col-indx");a=a.attr("pq-row-indx");var c;null!=b&&null!=a&&(b=parseInt(b),a=parseInt(a),c=this.headerCells[a][b]);
var d=!0;if(!c||c.colModel&&c.colModel.length)d=!1;return{column:c,colIndx:b,rowIndx:a,leaf:d}};c.flex=function(a){this.iResizeColumns.flex(a)};f.paramquery.cHeader=k;c=k.prototype;c.createHeader=function(){var a=this.that,b=this,c=a.options,d=c.bootstrap,h=c.hwrap,l=a.pqpanes,n=parseInt(c.freezeCols),s=c.numberCell,v=a.colModel,p=c.sortModel,k=a.depth,m=c.virtualX,r=a.initH,t=a.finalH,y=a.headerCells,w=a.$header_o;if(null==t)throw"finalH required for _createHeader";if(!1===c.showHeader)w.empty().css("display",
"none");else{w.css("display","");c=(d.on?d.thead:"")+" pq-grid-header-table ";h=["<table class='"+(h?c+"pq-wrap ":c+"pq-no-wrap ")+"' cellpadding=0 cellspacing=0 >"];if(1<=k){h.push("<tr class='pq-row-hidden'>");s.show&&h.push("<td style='width:"+s.width+"px;' ></td>");for(c=0;c<=t;c++){if(c<r&&c>=n&&m&&(c=r,c>t))throw"initH>finalH";d=v[c];d.hidden||h.push("<td style='width:"+d.outerWidth+"px;' pq-col-indx="+c+"></td>")}h.push("</tr>")}for(d=0;d<k;d++){h.push("<tr class='pq-grid-title-row'>");0==
d&&s.show&&h.push(["<th pq-col-indx='-1' class='pq-grid-number-col' rowspan='",k,"'><div class='pq-td-div'>",s.title?s.title:"&nbsp;","</div></th>"].join(""));for(c=0;c<=t;c++){if(c<r&&c>=n&&m&&(c=r,c>t))throw"initH>finalH";b.createHeaderCell(d,c,y,h,"pq-grid-col ",n,r,k,p)}h.push("</tr>")}a.ovCreateHeader(h,"pq-grid-col ");h.push("</table>");n=h.join("");w.empty();w[0].innerHTML=l.vH?["<span class='pq-grid-header pq-grid-header-left ui-state-default'><div class='pq-grid-header-inner'>",n,"</div></span><span class='pq-grid-header ui-state-default'><div class='pq-grid-header-inner'>",
n,"</div></span>"].join(""):["<span class='pq-grid-header ui-state-default'><div class='pq-grid-header-inner'>",n,"</div></span>"].join("");w=a.$header=w.children(".pq-grid-header");n=w.children(".pq-grid-header-inner");a.$tbl_header=n.children("table");a.$header_left=f(w[0]);a.$header_left_inner=f(n[0]);l.vH&&(a.$header_right=f(w[1]),a.$header_right_inner=f(n[1]));w.click(function(a){return b._onHeaderClick(a)});b._refreshResizeColumn(r,t,v);a._trigger("refreshHeader",null,null)}};c._onHeaderClick=
function(a){var b=this.that;if(!b.iDragColumns||"stop"==b.iDragColumns.status){var c=f(a.target).closest(".pq-grid-col");if(c.length&&(a.stopImmediatePropagation(),c=b.getHeaderColumnFromTD(c),b=c.colIndx,!1!=c.leaf))return this._onHeaderCellClick(b,a)}};c.createHeaderCell=function(a,b,c,d,h,l,n,f,v){var p=c[a][b],k=this.that.colModel,q=p.colSpan;if(!(p.hidden||0<a&&p==c[a-1][b])){if(0<b&&p==c[a][b-1]){if(b>n)return;a:{c=c[a];for(var r=0;r<c.length;r++)if(c[r]==p){c=r;break a}c=void 0}if(c<l)return;
q-=m(k,c,b)}else l&&b<l&&b+q>l&&(q-=m(k,l,n),k=m(k,b,l),q=Math.max(q,k));c=p.halign;r=p.align;k=p.title;k="function"==typeof k?k({column:p,colIndx:b}):k;k=null!=k?k:"";p.pqtitle=k;null!=c?h+=" pq-align-"+c:null!=r&&(h+=" pq-align-"+r);b==l-1&&1==f&&(h+=" pq-last-frozen-col");b<=l-1?h+=" pq-left-col":b>=n&&(h+=" pq-right-col");(l=p.cls)&&(h=h+" "+l);if(null==p.colModel||0==p.colModel.length)h+=" pq-grid-col-leaf";l=v.space?"pq-space":"";d.push(["<th  ","pq-col-indx="+b," ","pq-row-indx="+a,"  class='",
h,"' rowspan=",p.rowSpan," colspan=",q,"><div class='pq-td-div'>",k,"<span class='pq-col-sort-icon ",l,"'></span>",v.number?"<span class='pq-col-sort-count "+l+"'></span>":"","</div></th>"].join(""))}};c._onHeaderCellClick=function(a,b){var c=this.that,d=c.colModel[a],h=c.options,l=d.dataIndx;!1!==c._trigger("headerCellClick",b,{column:d,colIndx:a,dataIndx:l})&&h.sortModel.on&&!1!=d.sortable&&c.sort({sorter:[{dataIndx:l}],addon:!0,evt:b})};c._refreshResizeColumn=function(a,b,c){var d=this.that,h=
d.options,l=h.filterModel.ficon?!0:!1,n=h.numberCell,h=parseInt(h.freezeCols),f=[],k=[],p=d.pqpanes.vH,m=0,q=0;n.show&&(m=n.outerWidth,n.resizable&&f.push("<div pq-col-indx='-1' style='left:",m-5,"px;'"," class='pq-grid-col-resize-handle'>&nbsp;</div>"));for(n=0;n<=b;n++){if(n<a&&n>=h&&(n=a,n>b))throw"initH>finalH";q=c[n];if(!q.hidden){var r=q.ficon,t=r||null==r&&l,r=f,m=m+q.outerWidth;if(!1!==q.resizable||t)p&&n>=h&&(r=k),q=m-5,r.push("<div pq-col-indx='",n,"' style='left:",q,"px;'"," class='pq-grid-col-resize-handle'>&nbsp;</div>")}}k.length&&
d.$header_right_inner.append(k.join(""));d.$header_left_inner.append(f.join(""))};c.refreshHeaderSortIcons=function(){var a=this.that,b=a.$header;if(b){var c=a.iSort.getSorter(),d=c.length,h=!1,l=a.options.sortModel;b.find(".pq-grid-col-leaf").removeClass("pq-col-sort-asc pq-col-sort-desc ui-state-active active");b.find(".pq-col-sort-icon").removeClass("ui-icon ui-icon-triangle-1-n ui-icon-triangle-1-s");l.number&&1<d&&(h=!0);for(l=0;l<d;l++){var n=c[l],f=a.getColIndx({dataIndx:n.dataIndx}),k=n.dir,
n="active ui-state-active pq-col-sort-"+("up"==k?"asc":"desc"),k="ui-icon ui-icon-triangle-1-"+("up"==k?"n":"s")+" glyphicon glyphicon-arrow-"+k,f=b.find(".pq-grid-col-leaf[pq-col-indx="+f+"]");f.addClass(n);f.find(".pq-col-sort-icon").addClass(k);h&&f.find(".pq-col-sort-count").html(l+1)}}};c=function(a){this.that=a;var b=this;a.$header_o.on({mousedown:function(a){if(!a.pq_composed){var c=f(a.target);b.setDraggables(a);a.pq_composed=!0;a=f.Event("mousedown",a);c.trigger(a)}},dblclick:function(a){b.doubleClick(a)}},
".pq-grid-col-resize-handle");var c=a.options.flex;if(c.on&&c.one){var d=a.widgetEventPrefix.toLowerCase(),h=a.eventNamespace;a.element.one(d+"dataready"+h,function(){f(this).one(d+"refresh"+h,function(a){b.belongs(a)&&b.flex()})})}};f.paramquery.cResizeColumns=c;c=c.prototype=new f.paramquery.cClass;c.doubleClick=function(a){var b=this.that.options,c=b.flex;a=f(a.target);a=parseInt(a.attr("pq-col-indx"));isNaN(a)||c.on&&this.flex(c.all&&!b.scrollModel.autoFit?{}:{colIndx:[a]})};c.flex=function(a){a=
a||{};var c=this.that,g=c.options,d=c.element,h=g.virtualX,l=g.freezeCols,n=g.numberCell,g=a.colIndx,s,k=a.dataIndx;a=null==a.refresh?!0:a.refresh;var p=c.initH,m=c.finalH,q=!1,r=c.colModel,t=c.$tbl,y=c.$tbl_header,w=t&&t.length?f(t[0]).clone():f(),x=c.tables&&c.tables.length?c.tables[0].$tbl:null,x=x?f(x[0]).clone():f(),z=y&&y.length?f(y[0]).clone():f();if(null!=k)for(g=[],y=0,t=k.length;y<t;y++){var B=c.colIndxs[k[y]];null!=B&&g.push(B)}null!=g&&(g.sort(function(a,b){return a-b}),s=g.length);z.find("tr.pq-grid-header-search-row").remove();
k=b(w);t=b(x);B=b(z);w=f("<div class='pq-grid' style='width:1px;height:1px;position:absolute;left:0px;top:0px;'>").append(z).append(x).append(w);w.addClass(d.attr("class"));d.parent().append(w);d=n.show?0:-1;for(y=0;y<=m;y++)if(h&&y<p&&y>=l&&(y=p),n=r[y],!n.hidden){d++;if(g)if(g.length)if(g[0]===y)g.splice(0,1);else continue;else break;var x=k[d],z=B[d],G=t[d],x=Math.max(x?x.offsetWidth:0,G?G.offsetWidth:0,z?z.offsetWidth:0)-0+1;n._width!==x&&(q=!0,n.width=x,1===s&&(n._resized=!0))}w.remove();q&&
a&&c.refresh({source:"flex"})};c.setDraggables=function(a){var b=this,c,d,h;f(a.target).draggable({axis:"x",helper:function(a,c){var d=f(a.target),h=parseInt(d.attr("pq-col-indx"));b._setDragLimits(h);b._getDragHelper(a,c);return d},start:function(a,d){c=d.position.left;h=parseInt(b.$cl[0].style.left)},drag:function(a,n){d=n.position.left;b.$cl[0].style.left=h+(d-c)+"px"},stop:function(a,d){return b.resizeStop(a,d,c)}})};c._getDragHelper=function(a){var b=this.that,c=parseInt(b.options.freezeCols);
a=f(a.target);var d=b.$grid_center;a=parseInt(a.attr("pq-col-indx"));var h=d.outerHeight();this.$cl=f("<div class='pq-grid-drag-bar'></div>").appendTo(d);this.$clleft=f("<div class='pq-grid-drag-bar'></div>").appendTo(d);this.$cl.height(h);this.$clleft.height(h);d=f("[pq-col-indx="+a+"]",b.$header)[0];h=d.offsetLeft;b.pqpanes.vH?a>=c&&(h-=b.$header[1].scrollLeft):(h+=b.$header[0].offsetLeft,h-=b.$header[0].scrollLeft);this.$clleft.css({left:h});h+=d.offsetWidth;this.$cl.css({left:h})};c._setDragLimits=
function(a){if(!(0>a)){var b=this.that,c=b.colModel[a],d=b.$header_left;a>=b.options.freezeCols&&b.pqpanes.vH&&(d=b.$header_right);b=d.find("th[pq-col-indx='"+a+"']").offset().left+c._minWidth;c=b+c._maxWidth-c._minWidth;d.find("div.pq-grid-col-resize-handle[pq-col-indx="+a+"]").draggable("option","containment",[b,0,c,0])}};c.resizeStop=function(a,b,c){var d=this.that,h=d.colModel,l=d.options.numberCell;this.$clleft.remove();this.$cl.remove();c=b.position.left-c;b=f(b.helper);b=parseInt(b.attr("pq-col-indx"));
if(-1==b){var h=null,n=parseInt(l.width);l.width=n+c}else h=h[b],n=parseInt(h.width),h.width=n+c,h._resized=!0;d.refresh();d._trigger("columnResize",a,{colIndx:b,column:h,dataIndx:h?h.dataIndx:null,oldWidth:n,newWidth:h?h.width:l.width})};c=function(a){this.that=a;this.$drag_helper=null;var b=a.options.dragColumns,c=b.topIcon,d=b.bottomIcon,h=this;this.status="stop";this.$arrowTop=f("<div class='pq-arrow-down ui-icon "+c+"'></div>").appendTo(a.element);this.$arrowBottom=f("<div class='pq-arrow-up ui-icon "+
d+"' ></div>").appendTo(a.element);this.hideArrows();if(b&&b.enabled)a.$header_o.on("mousedown",".pq-grid-col",function(a,b){if(!f(a.target).is("input,select,textarea")&&!a.pq_composed){h.setDraggables(a,b);a.pq_composed=!0;var c=f.Event("mousedown",a);f(a.target).trigger(c)}})};f.paramquery.cDragColumns=c;c=c.prototype;c.showFeedback=function(a,b){var c=this.that,d=a[0],h=c.$grid_center[0].offsetTop,l=d.offsetLeft-d.offsetParent.offsetParent.offsetParent.scrollLeft+(b?0:d.offsetWidth)-8,c=h+c.$header[0].offsetHeight;
this.$arrowTop.css({left:l,top:h+d.offsetTop-16,display:""});this.$arrowBottom.css({left:l,top:c,display:""})};c.showArrows=function(){this.$arrowTop.show();this.$arrowBottom.show()};c.hideArrows=function(){this.$arrowTop.hide();this.$arrowBottom.hide()};c.updateDragHelper=function(a){var b=this.that.options.dragColumns,c=b.acceptIcon,b=b.rejectIcon,d=this.$drag_helper;d&&(a?(d.children("span.pq-drag-icon").addClass(c).removeClass(b),d.removeClass("ui-state-error")):(d.children("span.pq-drag-icon").removeClass(c).addClass(b),
d.addClass("ui-state-error")))};c.setDraggables=function(a,b){var c=f(a.currentTarget),d=this.that,h=d.options.dragColumns.rejectIcon,l=this;c.hasClass("ui-draggable")||!1!==d.getHeaderColumnFromTD(c).leaf&&c.draggable({distance:10,cursorAt:{top:-18,left:-10},zIndex:"1000",appendTo:d.element,revert:"invalid",helper:function(){var a=f(this);l.status="helper";l.setDroppables(a);d.$header.find(".pq-grid-col-resize-handle").hide();var b=a.attr("pq-col-indx"),c=a.attr("pq-row-indx");a.droppable("destroy");
a=f("<div class='pq-col-drag-helper ui-widget-content ui-corner-all panel panel-default' ><span class='pq-drag-icon ui-icon "+h+" glyphicon glyphicon-remove'></span>"+d.headerCells[c][b].pqtitle+"</div>");l.$drag_helper=a;return a[0]},drag:function(a,b){l.status="drag";var c=f(".pq-drop-hover",d.$header);if(0<c.length){l.showArrows();l.updateDragHelper(!0);var e=c.width();a.clientX-c.offset().left+f(document).scrollLeft()<e/2?(l.leftDrop=!0,l.showFeedback(c,!0)):(l.leftDrop=!1,l.showFeedback(c,!1))}else l.hideArrows(),
d.$toolbar.hasClass("pq-drop-hover")?l.updateDragHelper(!0):l.updateDragHelper()},stop:function(a,b){l.status="stop";d.$header.find(".pq-grid-col-resize-handle").show();l.hideArrows()}})};c._columnIndexOf=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]==b)return c;return-1};c.setDroppables=function(a){var b=this.that,c=this,d={hoverClass:"pq-drop-hover ui-state-highlight",tolerance:"pointer",drop:function(a,d){if(!c.dropPending){var h=parseInt(d.draggable.attr("pq-col-indx")),k=parseInt(d.draggable.attr("pq-row-indx")),
p=f(this),m=parseInt(p.attr("pq-col-indx")),q=parseInt(p.attr("pq-row-indx")),r=b.options.colModel,t=b.headerCells,y=1<t.length,p=t[q][m],w=k?t[k-1][h].colModel:r,m=q?t[q-1][m].colModel:r,k=c._columnIndexOf(w,t[k][h]),t=c.leftDrop?1:0,x=w.splice(k,1)[0],z=c._columnIndexOf(m,p)+1-t;m.splice(z,0,x);c.dropPending=!0;window.setTimeout(function(){b._calcThisColModel();!1!==b._trigger("columnOrder",null,{dataIndx:x.dataIndx,column:x,oldcolIndx:h,colIndx:y?b.getColIndx({column:x}):z})&&b.refresh();c.dropPending=
!1},0)}}};a=b.$header_left.find(".pq-left-col");var h=b.pqpanes.v||b.pqpanes.vH?b.$header_right.find(".pq-right-col"):b.$header_left.find(".pq-right-col");a=a.add(h);a.each(function(a,b){var c=f(b);c.hasClass("ui-droppable")||c.droppable(d)})}})(jQuery);
(function(f){function k(b){var c=this;this.that=b;this.type="detail";this.refreshComplete=!0;this.detachView=!1;var a=b.widgetEventPrefix.toLowerCase(),e=b.eventNamespace;b.element.on(a+"cellclick"+e,function(a,b){if(c.belongs(a))return c.toggle(a,b)}).on(a+"cellkeydown"+e,function(a,b){if(c.belongs(a)&&a.keyCode==f.ui.keyCode.ENTER)return c.toggle(a,b)}).on(a+"refresh"+e,function(a,b){if(c.belongs(a))return c.aftertable()}).on(a+"beforetableview"+e,function(a,b){if(c.belongs(a))return c.beforeTableView(a,
b)}).on(a+"tablewidthchange"+e,function(a,b){if(c.belongs(a))return c.tableWidthChange(a,b)})}f.paramquery.cHierarchy=k;var m=k.prototype=new f.paramquery.cClass;m.tableWidthChange=function(){if(this.refreshComplete){this.refreshComplete=!1;for(var b=this.that.$tbl.children("tbody").children("tr.pq-detail-child").children("td.pq-detail-child"),c=0,a=b.length;c<a;c++)for(var e=f(b[c]).find(".pq-grid"),g=0,d=e.length;g<d;g++){var h=f(e[g]);h.is(":visible")&&h.pqGrid("onWindowResize")}this.refreshComplete=
!0}};m.aftertable=function(b){var c=this.that,a=c.options.detailModel.init,e=c.pdata;if(this.refreshComplete){this.refreshComplete=!1;b=b?b:c.$tbl.children("tbody").children("tr.pq-detail-child");for(var g=0,d=b.length;g<d;g++){var h=f(b[g]),l=h.attr("pq-row-indx"),n=e[l],l=!1,s=n.pq_detail.child;s||"function"!=typeof a||(l=!0,s=a.call(c.element[0],{rowData:n}),n.pq_detail.child=s,n.pq_detail.height=25);h=h.children("td.pq-detail-child");h.append(s);h=h.find(".pq-grid");s=0;for(n=h.length;s<n;s++){var k=
f(h[s]);l?k.hasClass("pq-pending-refresh")&&k.is(":visible")&&(k.removeClass("pq-pending-refresh"),k.pqGrid("refresh")):k.is(":visible")&&k.pqGrid("onWindowResize")}}this.refreshComplete=!0;this.detachView=!1}};m.beforeTableView=function(b,c){this.detachView||(this.detachInitView(),this.detachView=!0)};m.detachInitView=function(b){var c=this.that.$tbl;if(c&&c.length)for(b=b?b:c.children("tbody").children("tr.pq-detail-child"),c=0;c<b.length;c++)f(b[c]).children("td.pq-detail-child").children().detach()};
m.toggle=function(b,c){var a=this.that,e=c.column,g=c.rowData,d=c.rowIndx,h=this.type;e&&e.type===h&&(e={rowIndx:d,focus:!0},null==g.pq_detail?a.rowExpand(e):!1===g.pq_detail.show?a.rowExpand(e):this.rowCollapse(e))};m.rowExpand=function(b){this.normalize(b);var c=this.that,a=b.rowData,e=b.rowIndx,g=b.rowIndxPage,d=c.options.detailModel;if(null!=a){if(!1===c._trigger("beforeRowExpand",null,b))return!1;null==a.pq_detail?a.pq_detail={show:!0}:!1===a.pq_detail.show&&(a.pq_detail.show=!0);d.cache||this.rowInvalidate(b);
c.refreshRow({rowIndx:e});d=[];c.iGenerateView._generateDetailRow(a,g,c.colModel,d,null,!1);a=c.getRow({rowIndxPage:g});a.after(d.join(""));this.aftertable(a.next());b.focus&&c.getCell({rowIndx:e,dataIndx:"pq_detail"}).attr("tabindex","0").focus();b.scrollRow&&this.scrollRow({rowIndx:e})}};m.rowInvalidate=function(b){b=this.that.getRowData(b);var c=b.pq_detail;if(c=c?c.child:null)c.remove(),b.pq_detail.child=null,b.pq_detail.height=0};m.normalize=function(b){var c=this.that,a=b.rowIndx,e=b.rowIndxPage,
g=c.rowIndxOffset;b.rowIndx=null==a?e+g:a;b.rowIndxPage=null==e?a-g:e;b.rowData=c.getRowData(b)};m.rowCollapse=function(b){this.normalize(b);var c=this.that,a=c.options,e=b.rowData,g=b.rowIndx,d=b.rowIndxPage,h=a.detailModel;null!=e&&null!=e.pq_detail&&!0===e.pq_detail.show&&(h.cache||this.rowInvalidate(b),e.pq_detail.show=!1,a.virtualY?c.refresh():(a=c.getRow({rowIndxPage:d}).next("tr.pq-detail-child"),a.length&&(this.detachInitView(a),a.remove(),c.refreshRow({rowIndx:g})),b.focus&&c.getCell({rowIndx:g,
dataIndx:"pq_detail"}).attr("tabindex","0").focus()),b.scrollRow&&(g=b.rowIndx,this.scrollRow({rowIndx:g})))}})(jQuery);
(function(f){var k=f.paramquery.pqgrid.calcWidthCols,m=function(b){this.that=b};f.paramquery.cRefresh=m;m=m.prototype;m._computeOuterWidths=function(){for(var b=this.that,c=b.options.numberCell,b=b.colModel,a=b.length,e=0;e<a;e++){var g=b[e];g.outerWidth=g._width+0}c.show&&(c.outerWidth=c.width)};m.autoFit=function(){var b=this.that,c=b.colModel,a=c.length,b=k.call(b,-1,a,!0),e=this.contWd-this.getSBWidth();if(b!==e){for(var b=b-e,g,e=[],d=0;d<a;d++){var h=c[d],l=h._percent,n=h._resized;h.hidden||
l||n||(0>b?(l=h._maxWidth-h._width)&&e.push({availWd:-1*l,colIndx:d}):(l=h._width-h._minWidth)&&e.push({availWd:l,colIndx:d}));n&&(g=h,delete h._resized)}e.sort(function(a,b){return a.availWd>b.availWd?1:a.availWd<b.availWd?-1:0});d=0;for(a=e.length;d<a;d++){var h=e[d],l=h.availWd,h=h.colIndx,n=Math.round(b/(a-d)),h=c[h],f;f=h._width;Math.abs(l)>Math.abs(n)?(f-=n,b-=n):(f-=l,b-=l);h.width=h._width=f}0!=b&&g&&(f=g._width-b,f>g._maxWidth?f=g._maxWidth:f<g._minWidth&&(f=g._minWidth),g.width=g._width=
f)}};m.autoLastColumn=function(){var b=this.that,c=b.colModel,a=c.length,e=b.options.freezeCols,g=this.contWd-this.getSBWidth(),d=k.call(b,-1,e,!0),g=g-d,d=!1,b=b._getLastVisibleColIndx();if(null!=b&&(b=c[b],!b._percent)){for(var h=b._width,l,n=b._minWidth,f=b._maxWidth,a=a-1;a>=e;a--){var m=c[a];if(!m.hidden&&(m=m._width+0,g-=m,0>g)){d=!0;l=h+g>=n?h+g:h+m+g;break}}d||(l=h+g);l>f?l=f:l<n&&(l=n);b.width=b._width=l}};m.numericVal=function(b,c){var a;a=-1<(b+"").indexOf("%")?parseInt(b)*c/100:parseInt(b);
return Math.round(a)};m.refreshColumnWidths=function(b){b=b||{};var c=this.that,a=c.options,e=a.numberCell,g="flex"===a.width,d=c.colModel,h=a.scrollModel,l=h.lastColumn,h=h.autoFit,n=this.contWd,f=d.length,k=this.getSBWidth(),p=a._minColWidth,m=a._maxColWidth,q=0;e.show&&(e.width<e.minWidth&&(e.width=e.minWidth),e.outerWidth=e.width+1,q=e.outerWidth);e=g?null:n-k-q;p=Math.floor(this.numericVal(p,e));m=Math.ceil(this.numericVal(m,e));n=0;if(!g&&5>e||isNaN(e)){if(a.debug)throw"availWidth N/A";}else{delete c.percentColumn;
for(k=0;k<f;k++)if(q=d[k],!q.hidden){var r=q.width,t=-1<(r+"").indexOf("%")?!0:null,y=q.minWidth,w=q.maxWidth,y=y?this.numericVal(y,e):p,w=w?this.numericVal(w,e):m;w<y&&(w=y);if(void 0!=r){var x=0;!g&&t?(c.percentColumn=!0,q.resizable=!1,q._percent=!0,r=this.numericVal(r,e)-0,x=Math.floor(r),n+=r-x,1<=n&&(x+=1,n-=1)):r&&(x=parseInt(r));x<y?x=y:!g&&x>w&&(x=w);q._width=x}else q._width=y;t||(q.width=q._width);q._minWidth=y;q._maxWidth=g?1E3:w}!1===g&&!1!==b.refreshWidth&&(h&&this.autoFit(),"auto"===
l&&a.virtualX&&this.autoLastColumn());this._computeOuterWidths()}};m.estRowsInViewPort=function(){var b=Math.ceil(this.contHt/this.rowHt);return this.that.pageSize=b};m._refreshFrozenLine=function(){};m._refreshHideArrHS=function(){for(var b=this.that,c=b.colModel,a=b.hidearrHS,e=b.initH,g=b.finalH,d=parseInt(b.options.freezeCols),b=0;b<d;b++)a[b]=!1;for(b=d;b<e;b++)a[b]=!0;for(b=e;b<=g;b++)a[b]=!1;b=g+1;for(c=c.length;b<c;b++)a[b]=!0};m.setScrollVNumEles=function(b){var c=this.that;b=c.$vscroll;
var a=c.options;if(!a.maxHeight&&"flex"===a.height)return b.pqScrollBar("option","num_eles",0),0;var e=c.iHierarchy?!0:!1,g=b.pqScrollBar("option"),d=parseInt(g.num_eles),g=parseInt(g.cur_pos),d=this.getSBHeight(),d=this.contHt-d+1,a=(a.groupModel?c.dataGM:c.pdata)?c.totalVisibleRows:0,h,l=0;c.$tbl&&0<c.$tbl.length&&(h=c.$tbl[c.$tbl.length-1],l=h.scrollHeight,h=f(h));if(0<l){h=h.children().children("tr");for(l=g=c=0;l<h.length;l++){var n=h[l],c=c+n.offsetHeight;if(c>=d){e&&f(n).hasClass("pq-detail-child")?
(g--,g=1<g?g-1:1):g=1<g?g-1:0;break}else e?!1===f(n).hasClass("pq-detail-child")&&g++:g++}d=a-g+1}else d=g+1;d>a&&(d=a);b.pqScrollBar("option","num_eles",d);return d};m._setScrollVLength=function(b){b=this.that;var c=b.options;if("flex"!==c.height||c.maxHeight){var c=this.getSBHeight(),a=this.contHt-c+this.headerHt-2;b.$vscroll.css("bottom",c).pqScrollBar("option","length",a)}};m.setHeaderHeight=function(){var b=this.that,c=b.$header,a,e,g;if(c&&c.length){if(1<c.length){if(a=c[0].offsetHeight,e=c[1].offsetHeight,
g=Math.max(a,e),a!==e){var d=f(c[0]).find(".pq-grid-header-search-row"),h=f(c[1]).find(".pq-grid-header-search-row");d.css("height","");h.css("height","");a=c[0].offsetHeight;e=c[1].offsetHeight;g=Math.max(a,e);a<g?d.height(h[0].offsetHeight):h.height(d[0].offsetHeight)}}else g=a=c[0].offsetHeight;b.$header_o.height(g-2);this.headerHt=g}else b.$header_o.height(0),this.headerHt=0};m.initContHeight=function(){var b=this.that,c=b.options;if("flex"!=c.height||c.maxHeight)this.contHt=this.height-(c.showHeader?
this.rowHt:0)-(c.showTop?b.$top[0].offsetHeight:0)-(c.showBottom?b.$bottom[0].offsetHeight:0)};m.initContWidth=function(){var b=this.that.options;if("flex"!==b.width||b.maxWidth)this.contWd=this.width};m.setContHeight=function(b){b=this.that;var c=this.height-b.$header_o[0].offsetHeight-(b.options.showTop?b.$top[0].offsetHeight:0)-b.$bottom[0].offsetHeight;b.$cont.height(c);this.contHt=c};m.setContAndGridHeightForFlex=function(){var b=this.that;if(this.vscroll)b.$hscroll.css("position","");else{b.$hscroll.css("position",
"relative");var c=b.$cont,a=b.options.cls,e=c.children("."+a.cont_inner_b);c.height("");e.length||(e=c.children("."+a.cont_inner));e.height("");b.element.height("");b.$grid_center.height("")}};m.setContAndGridWidthFromTable=function(){var b=this.that,c=k.call(b,-1,b.colModel.length),b=b.element,a=this.getSBWidth();this.contWd=c+a;b.width(this.contWd+"px")};m.getTotalVisibleRows=function(b,c,a){var e=this.that,g=this.estRowsInViewPort(),d=0,h=a?a.length:0,l=c,n=0,f=0,k=null,p=!1,m=!1,q=e.iHierarchy?
!0:!1,e=e.options,r=e.detailModel.offset,t=0,y=this.rowHt,w=q?this.contHt:void 0;if(null==a||0==h)return{initV:null,finalV:null,tvRows:d,lastFrozenRow:null};for(var x=0,z=h>c?c:h;x<z;x++){var B=a[x],G=B.pq_hidden;G||(k=x,d++,q&&((B=B.pq_detail)&&B.show?(B=B.height||0,B>r&&(B=r),t+=B+y):t+=y))}if(h<c)return{initV:k,finalV:k,tvRows:d,lastFrozenRow:k};if(1E4<h&&null==e.groupModel)return n=b+g,n>=h&&(n=h-1),{initV:b+c,finalV:n,tvRows:h,lastFrozenRow:k};g-=d;x=c;for(z=h;x<z;x++)B=a[x],G=B.pq_hidden,p?
m||(G?n++:f===g?m=!0:(n++,f++)):G?l++:f===b?(p=!0,n=l,f=0):(l++,f++),G||(d++,q&&p&&((B=B.pq_detail)&&B.show?(B=B.height||0,B>r&&(B=r),t+=B+y):t+=y,t>w&&(m=!0)));l>=h&&(l=h-1);n<l&&(n=l);return{initV:l,finalV:n,tvRows:d,lastFrozenRow:k}};m.calcInitFinal=function(){var b=this.that,c=b.options,a=c.virtualY,e=c.freezeRows,g="flex"===c.height,d=c.groupModel?b.dataGM:b.pdata;if(null==d||0===d.length)e=this.getTotalVisibleRows(h,e,d),b.totalVisibleRows=e.tvRows,b.initV=e.initV,b.finalV=e.finalV,b.lastFrozenRow=
e.lastFrozenRow;else if(a){var a=b.$vscroll.pqScrollBar("option"),h=parseInt(a.cur_pos);if(isNaN(h)||0>h)throw"cur_pos NA";b.scrollCurPos=h;e=this.getTotalVisibleRows(h,e,d);b.totalVisibleRows=e.tvRows;b.initV=e.initV;b.lastFrozenRow=e.lastFrozenRow;b.finalV=g&&!c.maxHeight?d.length-1:e.finalV}else e=this.getTotalVisibleRows(0,e,d),b.lastFrozenRow=e.lastFrozenRow,b.totalVisibleRows=e.tvRows,b.initV=0,b.finalV=d.length-1};m.calcInitFinalH=function(){var b=this.that,c=b.options,a=c.virtualX,e=b.colModel,
g=e.length;if(a){for(var d=parseInt(b.$hscroll.pqScrollBar("option","cur_pos")),h=parseInt(c.freezeCols),l="flex"===c.width,n=h,f=0,m=h;m<g;m++)if(e[m].hidden)n++;else if(f===d)break;else n++,f++;n>g-1&&(n=g-1);b.initH=n;if(l||!a)b.finalH=g-1;else{a=k.call(b,-1,h);d=this.getEContWd();for(m=n;m<g;m++)if(n=e[m],!n.hidden){n=n.outerWidth;if(!n&&c.debug)throw"outerwidth N/A";a+=n;if(a>d)break}c=m;c>g-1&&(c=g-1);b.finalH=c}}else b.initH=0,b.finalH=g-1};m._calcOffset=function(b){return(b=/(-|\+)([0-9]+)/.exec(b))&&
3===b.length?parseInt(b[1]+b[2]):0};m.setMax=function(b){var c=this.that,a=c.element;(c=c.options[b])?(c==parseInt(c)&&(c+="px"),a.css(b,c)):a.css(b,"")};m.refreshGridWidthAndHeight=function(){var b=this.that,c=b.options,a,e,g=-1<(c.width+"").indexOf("%")?!0:!1,d=-1<(c.height+"").indexOf("%")?!0:!1,h=-1<(c.maxHeight+"").indexOf("%")?!0:!1,l="flex"==c.height,n=h&&l,s=-1<(c.maxWidth+"").indexOf("%")?!0:!1,k="flex"==c.width,p=s&&k,b=b.element;if(g||d||n||p){var m=b.parent();if(!m.length)return;var q;
m[0]==document.body||"fixed"==b.css("position")?(q=f(window).width(),m=window.innerHeight?window.innerHeight:f(window).height()):(q=m.width(),m=m.height());var r=this._calcOffset,t=g?r(c.width):0,r=d?r(c.height):0;p?a=parseInt(c.maxWidth)*q/100:g&&(a=parseInt(c.width)*q/100+t);n?e=parseInt(c.maxHeight)*m/100:d&&(e=parseInt(c.height)*m/100+r)}a||(k&&c.maxWidth?s||(a=c.maxWidth):g||(a=c.width));e||(l&&c.maxHeight?h||(e=c.maxHeight):d||(e=c.height));parseFloat(a)==a?(a=a<c.minWidth?c.minWidth:a,b.css("width",
a)):"auto"===a&&b.width(a);parseFloat(e)==e&&(e=e<c.minHeight?c.minHeight:e,b.css("height",e));this.width=Math.round(b.width());this.height=Math.round(b.height())};m.decidePanes=function(){var b=this.that,c=b.pqpanes={v:!1,h:!1,vH:!1},a=b.options,b=a.virtualX,e=a.virtualY,g="flex"==a.height&&!a.maxHeight,d="flex"==a.width&&!a.maxWidth,h=a.numberCell,l=a.freezeRows,a=a.freezeCols;!l||g||!a&&!h.show||d?l&&!g?e||(c.h=!0):!a&&!h.show||d||b||(c.v=!0,c.vH=!0):(e||(c.h=!0),b||(c.v=!0,c.vH=!0))};m._storeColumnWidths=
function(b){var c=this.that,a=c.colModel,e=b?a.length-1:c.finalH,g=[];for(b=b?0:c.initH;b<=e;b++)g[b]={outerWidth:a[b].outerWidth};return g};m._isColumnWidthChanged=function(b){for(var c=this.that,a=c.colModel,e=c.options,g=e.virtualX,e=e.freezeCols,d=c.initH,c=c.finalH,h=0;h<=c;h++)if(g&&h<d&&h>=e&&(h=d),a[h].outerWidth!==b[h].outerWidth)return!0;return!1};m.softRefresh=function(){var b=this.that,c=b.options;this.refreshScrollbars();b.iGenerateView.setPanes();b._saveDims();b.iMouseSelection.syncScrollBarVert();
"flex"==c.height&&this.setContAndGridHeightForFlex();"flex"==c.width&&this.setContAndGridWidthFromTable();this._refreshFrozenLine()};m.refreshScrollbars=function(b){b=b||{};var c=this.that,a=c.options,e="flex"===a.height,g="flex"===a.width;if((e||this.contHt)&&(g||this.contWd)&&null!==c.totalVisibleRows){var d=this.setScrollVNumEles(b),d=1<d?!0:!1;if((!e||a.maxHeight)&&d!==this.vscroll)if(this.vscroll=d,a.scrollModel.autoFit||a.virtualX||g){if(a=this._storeColumnWidths(),this.refreshColumnWidths(),
this._isColumnWidthChanged(a)||g)this.ignoreTResize=!0,this._refreshTableWidths(a,{table:!0,header:!0}),delete this.ignoreTResize,this.setHeaderHeight(),this.setContHeight(),c.iGenerateView.setPanes(),d=this.setScrollVNumEles(!0),this.vscroll=1<d?!0:!1}else c.iGenerateView.setPanes();d=this.setScrollHNumEles();this.hscroll=1<d?!0:!1;this._setScrollHLength();this._setScrollVLength(b);this._setScrollHVLength()}};m._setScrollHVLength=function(){var b=this.that;this.vscroll&&this.hscroll||b.$hvscroll.css("visibility",
"hidden")};m._setScrollHLength=function(){var b=this.that,c=b.$hscroll,a=b.$hvscroll;b.options.scrollModel.horizontal?(c.css("visibility",""),a.css("visibility",""),b=this.contWd,a=this.getSBWidth(),c.css("right",0===a?0:""),c.pqScrollBar("option","length",b-a)):(c.css("visibility","hidden"),a.css("visibility","hidden"))};m.estVscroll=function(){var b=this.that,c=!0;null==b.totalVisibleRows||null==this.contHt?c=!1:b.totalVisibleRows*this.rowHt<this.contHt&&(c=!1);this.vscroll=c};m.getSBWidth=function(){null==
this.vscroll&&this.estVscroll();return this.vscroll?17:0};m.estHscroll=function(){var b=this.that;if(null==this.contWd)throw"failed";var c=!1;1<this.calcColsOutsideCont(b.colModel)+1&&(c=!0);this.hscroll=c};m.getSBHeight=function(){if("flex"===this.that.options.width)return 0;null==this.hscroll&&this.estHscroll();return this.hscroll?17:0};m.getEContHt=function(){if(null==this.contHt)throw"contHt N/A";return this.contHt-this.getSBHeight()};m.getEContWd=function(){if(null==this.contWd)throw"contWd N/A";
return this.contWd-this.getSBWidth()};m.calcColsOutsideCont=function(b){var c=this.that.options,a=c.numberCell,c=c.freezeCols,e=this.contWd-this.getSBWidth(),g=0;a.show&&(g+=a.outerWidth);for(a=0;a<b.length;a++){var d=b[a];d.hidden||(g+=d.outerWidth)}var h=0,l=0,d=Math.round(g);d>e&&l++;for(a=c;a<b.length;a++)if(d=b[a],!d.hidden)if(h+=d.outerWidth,d=g-h,d>e)l++;else break;return l};m.setScrollHNumEles=function(){var b=this.that,c=b.options,a=b.colModel,e=c.scrollModel,g=0;if("flex"!==c.width||c.maxWidth)g=
"fullScroll"===e.lastColumn?a.length-c.freezeCols-b._calcNumHiddenUnFrozens():this.calcColsOutsideCont(a)+1;b.$hscroll.pqScrollBar("option","num_eles",g);return g};m.init=function(){var b=this.that,c=b.options;this.hscroll=this.vscroll=this.contHt=this.contWd=null;b.initH=b.initV=b.finalH=b.finalV=null;b.totalVisibleRows=b.lastFrozenRow=null;this.rowHt=c.rowHeight;this.headerHt=0;this.height=null};m.refresh=function(b){b=b||{};var c=this.that,a=b.header,e=b.table,g=b.pager,d=c.iGenerateView,h=c.element;
if(h[0].offsetWidth){c.iMouseSelection.resetMargins();this.init();h=c.options;this.decidePanes();h.collapsible._collapsed=!1;this.setMax("maxHeight");this.refreshGridWidthAndHeight();this.initContHeight();this.initContWidth();this.calcInitFinal();if(!1===a||!1===e)var l=this._storeColumnWidths(!0);this.refreshColumnWidths();this.calcInitFinalH();this._refreshHideArrHS();!1!==a?c._createHeader():this._isColumnWidthChanged(l)&&this._refreshTableWidths(l,{header:!0});c._refreshHeaderSortIcons();!1!==
g&&c._refreshPager();this.setHeaderHeight();this.setContHeight();!1!==e?d.generateView({source:b.source}):(this._refreshTableWidths(l,{table:!0}),d.setPanes());c._saveDims();d.scrollView();this.refreshScrollbars();"flex"==h.height&&this.setContAndGridHeightForFlex();"flex"==h.width&&this.setContAndGridWidthFromTable();this._refreshFrozenLine();c._createCollapse();h.dataModel.postDataOnce=void 0}else h.addClass("pq-pending-refresh")};m.refreshVscroll=function(b){b=this.that;var c=b.options;c.virtualY&&
!c.scrollModel.smooth&&(b.scrollMode=!0,this.calcInitFinal(),b.iGenerateView.generateView(),b._saveDims(),b.iGenerateView.scrollView(),1>=this.setScrollVNumEles()&&this.refreshScrollbars())};m._refreshTableWidths=function(b,c){var a=this.that,e=a.colModel,g=a.$tbl_header,d=c.header&&g,h=a.$tbl,l=c.table&&h,n=a.options,f=n.freezeCols,n=n.virtualX,k=a.initH,p=a.finalH,g=d?g.children().children(".pq-row-hidden"):null,m=d?a.$header.find(".pq-grid-col-resize-handle"):null,h=l&&h?h.children().children(".pq-row-hidden"):
null,q,r=!1,t=0;l&&a.tables.length&&(l=a.tables[0].$tbl.children().children(".pq-row-hidden"),h=h?h.add(l):l);for(l=0;l<=p;l++){n&&l<k&&l>=f&&(l=k);var y=e[l],w=b[l];y.hidden||(w=w.outerWidth,y=y.outerWidth,y!==w&&(d&&(q=g.find("td[pq-col-indx="+l+"]"),q.width(y)),h&&(q=h.find("td[pq-col-indx="+l+"]"),q.length&&(r=!0,q.width(y)))),t+=y-w,d&&0!==t&&(w=m.filter("[pq-col-indx="+l+"]"),y=parseInt(w.css("left")),w.css("left",y+t)))}r&&a._trigger("tableWidthChange");a._saveDims()}})(jQuery);
(function(f){var k={getFocusElement:function(){var a=document.activeElement;if(a){var a=f(a),b=a.closest(".pq-grid");if(b.length)return b[0]==this.element[0]?{$ae:a,$grid:b}:{$ae:a,$childGrid:b}}},rowExpand:function(a){this.iHierarchy.rowExpand(a)},rowInvalidate:function(a){this.iHierarchy.rowInvalidate(a)},rowCollapse:function(a){this.iHierarchy.rowCollapse(a)},saveState:function(a){a=a||{};var b=this.options,c=b.dataModel,e=this.element[0].id,b=JSON.stringify({colModel:b.colModel,height:b.height,
width:b.width,groupModel:b.groupModel,pageModel:b.pageModel,sortModel:b.sortModel,filter:c.dataUF&&c.dataUF.length?!0:!1});!1!==a.save&&"undefined"!==typeof Storage&&localStorage.setItem("pq-grid"+(e?e:""),b);return b},loadState:function(a){a=a||{};if("undefined"===typeof Storage)return!1;var b=this.element[0].id;if(b=a.state||localStorage.getItem("pq-grid"+(b?b:"")))"string"==typeof b&&(b=JSON.parse(b));else return!1;for(var c=this.colModel,e=b.colModel,e=this.nestedCols(e).colModel,g=0,k=e.length;g<
k;g++){var p=e[g],m=p.dataIndx;a:{for(var q=0,r=c.length;q<r;q++){var t=c[q];if(m==t.dataIndx){m=t;break a}}m=void 0}f.extend(!0,m,p);f.extend(!0,p,m)}this.option({colModel:e,height:b.height,width:b.width,sortModel:b.sortModel,pageModel:b.pageModel,groupModel:b.groupModel});!1!==a.refresh&&this.refreshDataAndView();return!0}},m=function(a){function b(c,e,h){a.filter({data:[{dataIndx:c,value:e,value2:h}]})}this.that=a;var c=this;this.dataHS={};var e=a.widgetEventPrefix.toLowerCase(),g=a.eventNamespace;
a.element.on(e+"headerkeydown"+g,function(a,b){if(c.belongs(a)){var d=f(a.originalEvent.target);return d.hasClass("pq-grid-hd-search-field")?c.onKeyDown(a,b,d):!0}});a.element.on(e+"createheader"+g,function(a,b){if(c.belongs(a))return c._onCreateHeader()});this.changeListener={change:function(a,c){b(c.dataIndx,c.value,c.value2)}};this.keyupListener={keyup:function(a,c){b(c.dataIndx,c.value,c.value2)}};this.clickListener={click:function(a,c){b(c.dataIndx,c.value)}}},b=m.prototype=new f.paramquery.cClass;
b.get$Ele=function(a,b){var c=this.that,e=c.options.freezeCols,g=f(c.$tbl_header[0]),k=".pq-grid-hd-search-field[name='"+b+"']",c=f(c.$tbl_header[2==c.$tbl_header.length?1:0]);return a>=e?c.find(k):g.find(k)};b.onKeyDown=function(a,b,c){b=this.that;if(a.keyCode===f.ui.keyCode.TAB){var e=c.attr("name"),g=b.getColIndx({dataIndx:e}),k=b.colModel,p,m=a.shiftKey,q=k[g];if("between"==q.filter.condition&&(b.scrollColumn({colIndx:g}),e=this.get$Ele(g,e),e[0]==c[0]?m||(p=e[1]):m&&(p=e[0]),p))return p.focus(),
a.preventDefault(),!1;do{m?g--:g++;if(0>g||g>=k.length)break;q=k[g];c=q.filter;if(!q.hidden&&c){b.scrollColumn({colIndx:g});e=q.dataIndx;p=this.get$Ele(g,e);"between"==c.condition&&(p=m?f(p[1]):f(p[0]));if(p)return p.focus(),a.preventDefault(),!1;break}}while(1)}else return!0};b._bindFocus=function(){function a(d){d=f(d.target).closest(".pq-grid-hd-search-field").attr("name");if(b.scrollColumn({dataIndx:d})){var e=b.getColIndx({dataIndx:d});c.get$Ele(e,d).focus()}}for(var b=this.that,c=this,e=b.$header.find(".pq-grid-header-search-row"),
g=0;g<e.length;g++)f(e[g]).on("focusin",a)};b._onCreateHeader=function(){var a=this.that,b=a.options;if(b.filterModel.header){this._bindFocus();var c=a.colModel,e=b.freezeCols,g=b.virtualX,k=b.virtualXHeader,b=!1===k?a.initHH:a.initH,k=!1===k?a.finalHH:a.finalH,p=a.$tbl_header,m=f(p[0]),q=f(p[1]),r="input,select";if(1<p.length){m.find(r).css("visibility","hidden");for(var t=0;t<e;t++){var y=c[t],r="*[name='"+y.dataIndx+"']";m.find(r).css("visibility","visible");q.find(r).css("visibility","hidden")}}for(t=
0;t<=k;t++){if(t<b&&t>=e&&g&&(t=b,t>k))throw"initH>finalH";y=c[t];if(!y.hidden){var w=y.filter;if(w){var r=y.dataIndx,x=m;t>=e&&1<p.length&&(x=q);x=x.find("*[name='"+r+"']");if(0!=x.length){var z=w.type,B=w.value,G=w.value2;"checkbox"==z&&"triple"==w.subtype?x.pqval({val:B}):"select"==z&&null!=B&&x.val(B);(z=w.init)&&z.call(x,{dataIndx:r,column:y});if(y=w.listeners)for(w=0;w<y.length;w++){z=y[w];"string"==typeof z&&(z=this[z+"Listener"]);for(var A in z)(function(b,c,e){b.bind(A,function(h){var g=
a.getColumn({dataIndx:e}),l=g.filter;"checkbox"==l.type?B="triple"==l.subtype?b.pqval({incr:!0}):b.is(":checked")?!0:!1:"between"==l.condition?(B=f(b[0]).val(),G=f(b[1]).val()):B=b.val();return c.call(this,h,{column:g,dataIndx:e,value:B,value2:G})})})(x,z[A],r)}}}}}}};b.createDOM=function(a,b){var c=this.that,e=c.options,g=e.virtualX,k=e.virtualXHeader,p=!1===k?c.initHH:c.initH,k=!1===k?c.finalHH:c.finalH,m=e.freezeCols,q=c.colModel,r=e.numberCell,e=function(a,b){return["<div class='pq-from-div'>",
a,"</div><span class='pq-from-to-center'>-</span><div class='pq-to-div'>",b,"</div>"].join("")};a.push("<tr class='pq-grid-header-search-row'>");r.show&&a.push("<td pq-col-indx='-1' class='pq-grid-number-col' rowspan='1'><div class='pq-td-div'>&nbsp;</div></td>");for(r=0;r<=k;r++){if(r<p&&r>=m&&g&&(r=p,r>k))throw"initH>finalH";var t=q[r];if(!t.hidden){var y=b,w=t.halign;w||(w=t.align);"right"==w?y+=" pq-align-right":"center"==w&&(y+=" pq-align-center");(w=t.cls)&&(y=y+" "+w);if(w=t.filter){var x=
t.dataIndx,z=w.type,B=w.value,G=w.condition,A=w.cls,A="pq-grid-hd-search-field "+(A?A:""),E=w.style,E=E?E:"",C=w.attr,C=C?C:"",F="";if("between"==G)var D=w.value2,D=null!=D?D:"";"textbox"===z?(B=B?B:"",A+=" ui-corner-all pq-search-txt",F="between"==G?e(this._input(x,B,A+" pq-from",E,C),this._input(x,D,A+" pq-to",E,C)):this._input(x,B,A,E,C)):"textarea"===z?(B=B?B:"",A+=" ui-corner-all pq-search-txt",F="between"==G?e(this._textarea(x,B,A+" pq-from",E,C),this._textarea(x,D,A+" pq-to",E,C)):this._textarea(x,
B,A,E,C)):"select"===z?w.cache?F=w.cache:(z=w.options,"function"===typeof z&&(z=z.call(c.element[0],{column:t,value:B,dataIndx:x,cls:A,style:E,attr:C})),A+=" ui-corner-all",t=["name='",x,"' class='",A,"' style='",E,"' ",C].join(""),F=f.paramquery.select({options:z,attr:t,prepend:w.prepend,valueIndx:w.valueIndx,labelIndx:w.labelIndx,groupIndx:w.groupIndx}),w.cache=F):"checkbox"==z?F=["<input ",null==B||!1==B?"":"checked=checked"," name='",x,"' type=checkbox class='"+A+"' style='"+E+"' "+C+"/>"].join(""):
"string"==typeof z?F=z:"function"==typeof z&&(F=z.call(c.element[0],{width:t.outerWidth,value:B,value2:D,column:t,dataIndx:x,cls:A,attr:C,style:E}));a.push(["<td class='",y,"'><div class='pq-td-div' >",F,"</div></td>"].join(""))}else a.push(["<td class='",y,"'><div class='pq-td-div' >&nbsp;</div></td>"].join(""))}}a.push("</tr>")};b._input=function(a,b,c,e,g){return['<input value="',b,"\" name='",a,"' type=text style='"+e+"' class='"+c+"' "+g+" />"].join("")};b._textarea=function(a,b,c,e,g){return["<textarea name='",
a,"' style='"+e+"' class='"+c+"' "+g+" >",b,"</textarea>"].join("")};f.paramquery.select=function(a){var b=a.options,c=a.groupIndx,e=a.labelIndx,g=a.valueIndx,f=null!=e&&null!=g,k=null!=c,m=a.prepend,q=a.dataMap,r,t,y;a=["<select ",a.attr," >"];if(m)for(var w in m)a.push('<option value="',w,'">',m[w],"</option>");if(b&&b.length){for(var m=0,x=b.length;m<x;m++){var z=b[m];if(f){var B=z[g],G=z.pq_disabled?'disabled="disabled" ':"",A=z.pq_selected?'selected="selected" ':"";if(null!=B){if(q){r={};for(y=
0;y<q.length;y++){var E=q[y];r[E]=z[E]}r="data-map='"+JSON.stringify(r)+"'"}else r="";y=r;k&&(E=z.pq_disabled_group?'disabled="disabled" ':"",r=z[c],t!=r&&(null!=t&&a.push("</optgroup>"),a.push('<optgroup label="',r,'" ',E," >"),t=r));e==g?a.push("<option ",A,G,y,">",B,"</option>"):a.push("<option ",A,G,y,' value="',B,'">',z[e],"</option>")}}else if("object"==typeof z)for(w in z)a.push('<option value="',w,'">',z[w],"</option>");else a.push("<option>",z,"</option>")}k&&a.push("</optgroup>")}a.push("</select>");
return a.join("")};f.fn.pqval=function(a){if(a){if(a.incr)return a=this.data("pq_value"),this.prop("indeterminate",!1),a?(a=!1,this.prop("checked",!1)):!1===a?(a=null,this.prop("indeterminate",!0),this.prop("checked",!1)):(a=!0,this.prop("checked",!0)),this.data("pq_value",a),a;a=a.val;this.data("pq_value",a);this.prop("indeterminate",!1);null==a?(this.prop("indeterminate",!0),this.prop("checked",!1)):a?this.prop("checked",!0):this.prop("checked",!1);return this}return this.data("pq_value")};var c=
{_generateTitleRow:function(a,b,c,e){var g=this.that.options.numberCell,f=b.groupTitle,k=b.level,m=b.GMRowIndx,q=a.title,r=a.icon,r=(r=r?r[k]:null)&&r.length&&2==r.length&&"function"===typeof r.push?r:["ui-icon-minus glyphicon glyphicon-minus","ui-icon-plus glyphicon glyphicon-plus"];if(q&&null!=q[k]){q=q[k];if(!1===q)return;"function"==typeof q?f=q(b):(f=q.replace("{0}",f),f=f.replace("{1}",b.items))}else f=f+" - "+b.items+" item(s)";e="pq-group-row pq-grid-row"+(e?" pq-last-frozen-row":"");(a=a.titleCls)&&
(a=a[k])&&(e+=" "+a);c.push(["<tr class='",e,"' title=\"",b.groupTitle,"\" level='",k,"' GMRowIndx='",m,"'>"].join(""));g.show&&c.push("<td class='pq-grid-number-cell ui-state-default'>&nbsp;</td>");g=r[0];b.collapsed&&(g=r[1]);c.push("<td class='pq-grid-cell' colSpan='100' >","<div class='pq-td-div' style='margin-left:",16*k,"px;'>","<span class='ui-icon ",g,"'></span>",f,"</div></td>");c.push("</tr>")},_generateSummaryRow:function(a,b,c,e,g){var f=b.level,k=b.rowData,m="pq-summary-row pq-grid-row"+
(g?" pq-last-frozen-row":"");(a=a.summaryCls)&&(a=a[f])&&(m+=" "+a);a=this.that;var q=a.options;g=q.virtualX;var r=a.initH,t=a.finalH,y=q.freezeCols,w=q.numberCell,q=q.columnBorders;e.push("<tr class='"+m+"'>");w.show&&e.push("<td class='pq-grid-number-cell ui-state-default'>&nbsp;</td>");for(m=0;m<=t;m++){if(m<r&&m>=y&&g&&(m=r,m>t))throw"initH>finalH";var w=c[m],x=w.dataIndx;if(!w.hidden){var z="pq-grid-cell ";"right"==w.align?z+=" pq-align-right":"center"==w.align&&(z+=" pq-align-center");m==y-
1&&q&&(z+=" pq-last-frozen-col");w.cls&&(z=z+" "+w.cls);var B=k[x],G;B&&(G=w.summary.title)&&(G=G[f])&&("function"==typeof G?(b.dataIndx=x,b.cellData=B,B=G.call(a.element[0],b)):B=G.replace("{0}",B));B=null==B?"&nbsp;":B;w=["<td class='",z,"' style='' >",B,"</td>"].join("");e.push(w)}}e.push("</tr>");return e},_generateDetailRow:function(a,b,c,e,g,f){c="pq-grid-row pq-detail-child";f&&(c+=" pq-last-frozen-row");var k=this.that.options;f=k.numberCell;var m="pq-grid-cell ";if(!k.wrap||g)m+="pq-wrap-text ";
k.stripeRows&&b/2==parseInt(b/2)&&(c+=" pq-grid-oddRow");a.pq_rowselect&&(c+=" pq-row-select ui-state-highlight");a=a.pq_rowcls;null!=a&&(c+=" "+a);e.push("<tr pq-row-indx='"+b+"' class='"+c+"' >");f.show&&e.push("<td class='pq-grid-number-cell ui-state-default'>&nbsp;</td>");e.push("<td class='"+m+" pq-detail-child' colSpan='20'></td>");e.push("</tr>");return e}},a=function(a){this.that=a},b=a.prototype;b._refreshDataFromDataModel=function(){this._groupData();this.initcollapsed()};b.bindEvents=function(){var a=
this;this.that.$cont.on("click","tr.pq-group-row",function(b){return a.onClickGroupRow(b)})};b.showHideRows=function(a,b,c){for(var e=[],g=this.that.dataGM,f=g.length;a<f;a++){var k=g[a],m=k;if(m.groupSummary)if(k.level<b)break;else k.pq_hidden=c;else if(m.groupTitle)if(k.collapsed&&e.push({indx:a,level:k.level}),k.level<=b)break;else k.pq_hidden=c;else k.pq_hidden=c}return e};b.onClickGroupRow=function(a){var b=f(a.currentTarget);a=this.that;var c=parseInt(b.attr("level")),b=parseInt(b.attr("GMRowIndx")),
e=!0,e=a.dataGM[b];e=e.collapsed?e.collapsed=!1:e.collapsed=!0;if(e)this.showHideRows(b+1,c,!0);else for(b=this.showHideRows(b+1,c,!1),e=0;e<b.length;e++){var g=b[e].indx,c=b[e].level;this.showHideRows(g+1,c,!0)}a.refresh()};b.initcollapsed=function(){var a=this.that.dataGM;if(a)for(var b=0,c=a.length;b<c;b++){var e=a[b];if(void 0!==e.groupTitle){var g=e.level;e.collapsed&&this.showHideRows(b+1,g,!0)}}};b.max=function(a,b){var c;"integer"==b||"float"==b?(c=Math.max.apply(Math,a),"float"===b&&(c=c.toFixed(2))):
(a="date"==b?a.sort(function(a,b){a=Date.parse(a);b=Date.parse(b);return a-b}):a.sort(),c=a[a.length-1]);return c};b.min=function(a,b){var c;"integer"==b||"float"==b?(c=Math.min.apply(Math,a),"float"===b&&(c=c.toFixed(2))):(a="date"==b?a.sort(function(a,b){a=Date.parse(a);b=Date.parse(b);return a-b}):a.sort(),c=a[0]);return c};b.count=function(a){return a.length};b.sum=function(a,b){var c=0,e;e="float"===b?parseFloat:"integer"===b?parseInt:function(a){return a};for(var g=0,f=a.length;g<f;g++)c+=e(a[g]);
"float"===b&&(c=c.toFixed(2));return c};b._groupData=function(){for(var a=this.that,b=a.pdata,c=a.options,e=c.groupModel,g=c.pageModel,c=a.colModel,g=g.type?(g.curPage-1)*g.rPP:0,k=c.length,m=e.dataIndx,u=m.length,q=e.collapsed,r=[],t=0;t<u;t++){r[t]=!1;for(var y=0;y<k;y++){var w=c[y],x=w.summary;if(x&&(x=x.type)&&"function"==typeof x.push&&x[t]){r[t]=!0;break}}}if(e&&b&&0<b.length){for(var e=[],y=[],z=[],B=[],G=[],t=0;t<u;t++)B[t]=null,z[t]="",G[t]={};for(var A=0,E=b.length;A<=E;A++){for(var C=b[A],
w=!1,F=null,t=0;t<u;t++)z[t]=A<E?f.trim(C[m[t]]):"",B[t]!=z[t]&&(w=!0),w&&null==F&&(F=t);if(w){for(w=0;w<u;w++)B[w]=z[w];if(0<A){for(t=u-1;t>=F;t--)if(r[t]){for(var D=[],I=0;I<k;I++)if(w=c[I],x=(x=w.summary)?x.type?x.type[t]:null:null){var H=w.dataIndx,L="",L="function"==typeof x?x(G[t][H],w.dataType):this[x](G[t][H],w.dataType);D[H]=L}e.push({groupSummary:!0,level:t,prevRowData:b[A-1],rowData:D})}for(w=F;w<u;w++)e[y[w]].items=G[w][c[0].dataIndx].length}if(A==E)break;for(t=u-1;t>=F;t--)for(x=0;x<
k;x++)w=c[x],G[t][w.dataIndx]=[];for(w=F;w<u;w++)e.push({groupTitle:z[w],level:w,nextRowData:C,GMRowIndx:e.length,collapsed:q&&null!=q[w]?q[w]:!1}),y[w]=e.length-1}if(A==E)break;C.rowIndx=A+g;C.pq_hidden=!1;e.push(C);for(F=0;F<k;F++)for(w=c[F],H=w.dataIndx,t=0;t<u;t++)G[t][H].push(C[H])}a.dataGM=e}else a.dataGM=null};k.options={cls:{cont_inner:"pq-grid-cont-inner",cont_inner_b:"pq-grid-cont-inner-b"},flex:{on:!0,one:!1,all:!0},detailModel:{cache:!0,offset:100,expandIcon:"ui-icon-triangle-1-se glyphicon glyphicon-minus",
collapseIcon:"ui-icon-triangle-1-e glyphicon glyphicon-plus"},dragColumns:{enabled:!0,acceptIcon:"ui-icon-check glyphicon-ok",rejectIcon:"ui-icon-closethick glyphicon-remove",topIcon:"ui-icon-circle-arrow-s glyphicon glyphicon-circle-arrow-down",bottomIcon:"ui-icon-circle-arrow-n glyphicon glyphicon-circle-arrow-up"},track:null,mergeModel:{on:!1},sortModel:{on:!0,type:"local",number:!0,single:!0,cancel:!0,sorter:[]},filterModel:{on:!0,type:"local",mode:"AND",header:!1}};k._create=function(){f.extend(f.paramquery.cGenerateView.prototype,
c);var b=f.paramquery,e=this.options;this._queueATriggers={};this._queueBTriggers={};this.iHistory=new b.cHistory(this);this.iGroupView=new a(this);b.cMerge&&(this.iMerge=new b.cMerge(this));this.iFilterData=new b.cFilterData(this);this.iHeaderSearch=new m(this);this.iUCData=new b.cUCData(this);this.iMouseSelection=new b.cMouseSelection(this);this._super();this.iGroupView.bindEvents();this.iDragColumns=new b.cDragColumns(this);this._createToolbar();"remote"===e.dataModel.location&&this.refresh({table:!0});
this.__init();this.refreshDataAndView({header:!0})};var e="__init,body,appendTo,,join,<div style='position:fixed;bottom:0;right:0;padding:0 2px;margin:0;opacity:0.5;z-index:10000;border:1px solid lightgray;border-radius:5px;'></div>".split(","),g;k[e[0]]=function(){g||(g=f([e[5],e[6],e[7]][e[4]](e[3]))[e[2]](document[e[1]]))};k._createToolbar=function(){var a=this.options,b=a.toolbar;if(b){var c=
b.cls,e=b.style,g=b.attr,b=b.items,c=f("<div class='"+(c?c:"")+"' style='"+(e?e:"")+"' "+(g?g:"")+" ></div>").appendTo(f(".pq-grid-top",this.element));c.pqToolbar({items:b,gridInstance:this});a.showToolbar||c.css("display","none");this.$toolbar=c}};k.isLeftOrRight=function(a){return a>this.freezeCols?"right":"left"};k.ovCreateHeader=function(a,b){this.options.filterModel.header&&this.iHeaderSearch.createDOM(a,b)};k._createHeader=function(){this._super();this.options.showHeader&&this._trigger("createHeader")};
k.filter=function(a){var b=this,c=this.options,e=void 0===a.apply?!0:a.apply,g=void 0===a.sort?!0:a.sort,k=c.dataModel,c=c.filterModel;if(void 0!=a){var m="replace"==a.oper?!0:!1;a=a.data;for(var u=this.colModel,u=e?u:f.extend(!0,[],u),q=0,r=u.length,t=a.length,y=0;y<r;y++){for(var w=u[y],x=!1,z=0;z<t&&q!=t;z++){var B=a[z];if(B.dataIndx==w.dataIndx){x=!0;q++;var z=w.filter,G=B.condition,A=B.value;z?z.on=!0:z=w.filter={on:!0};G&&(z.condition=G);G=z.condition;z.value=A;if("between"==G)z.value2=B.value2;
else if("range"==G){B=[];if(A)if("string"==typeof A){var G=z.options,E=A.indexOf('"'),C=A.lastIndexOf('"'),A=A.substr(E,C+1),A=JSON.parse("["+A+"]");if(G)for(E=0,C=G.length;E<C;E++){var F=G[E];-1!=f.inArray(F,A)&&B.push(F)}else B=A.split(",s*")}else"function"==typeof A.push&&(B=A);z.value=B}break}}m&&!x&&w.filter&&(w.filter.on=!1)}}var D={header:!1,apply:e,sort:g,CM:u};if("remote"==k.location&&"local"!=c.type)this.remoteRequest({apply:e,CM:u,callback:function(){return b._onDataAvailable(D)}});else return D.source=
"filter",b._onDataAvailable(D)};k._initTypeColumns=function(){for(var a=this.colModel,b=0,c=a.length;b<c;b++){var e=a[b],g=e.type;"checkBoxSelection"===g?new f.paramquery.cCheckBoxColumn(this,e):"detail"===g&&(e.dataIndx="pq_detail",this.iHierarchy=new f.paramquery.cHierarchy(this))}};k.refreshHeader=function(){this._createHeader();this.iGenerateView.setPanes();this._refreshHeaderSortIcons()};k.refreshDataFromDataModel=function(){this._super();this.options.groupModel&&this.iGroupView._refreshDataFromDataModel()};
k._refreshHeaderSortIcons=function(){this.iHeader.refreshHeaderSortIcons()};k.getLargestRowCol=function(a){for(var b=0;b<a.length;b++);};k.bringCellToView=function(a){this._bringCellToView(a)};k._setUrl=function(a){this.options.dataModel.getUrl=function(){return{url:this.url+(null!=a?a:"")}}};k.pageData=function(){return this.pdata};k.getData=function(a){var b=a.dataIndx,c=b.length;a=a.data;var e=this.options.dataModel,g=e.data,e=e.dataUF,f=[],k=function(a){for(var e=0,d=a.length;e<d;e++){for(var g=
a[e],n={},k=0;k<c;k++){var m=b[k];n[m]=g[m]}f.push(n)}};a?k(a):(g&&k(g),e&&k(e));a=[];for(g=0;g<c;g++)e=b[g],k=this.getColumn({dataIndx:e}),a.push({dataIndx:e,dir:"up",dataType:k.dataType,sortType:k.sortType});f=this.iSort._sortLocalData(a,f);a=[];g=void 0;for(e=0;e<f.length;e++){var k=f[e],m=JSON.stringify(k);m!==g&&(a.push(k),g=m)}return a};k._onDataAvailable=function(a){a=a||{};var b=this.options,c=null==a.apply?!0:a.apply,e=a.source,g=a.sort,f=[],f=b.filterModel,k=b.dataModel,b=b.sortModel,m=
k.location;!1!==c&&this._trigger("dataAvailable",a.evt,{dataModel:k,source:e});f=f&&f.on&&("local"==m&&"remote"!=f.type||"remote"==m&&"local"==f.type)?this.iFilterData.filterLocalData(a).data:k.data;"local"==b.type&&!1!==g&&(c?this.sort({refresh:!1}):f=this.iSort.sortLocalData(f));if(!1===c)return f;k.data=f;this.refreshView(a)};k.sort=function(a){a=a||{};var b=this,c=this.options,e=c.dataModel.data,g=c.sortModel.type;if(e&&e.length||"local"!=g){var f=c.editModel,c=this.iSort,k=c.getSorter(),m,q=
a.evt,r=null==a.single?c.readSingle():a.single;m=c.readCancel();a.sorter?a.addon?(a.single=r,a.cancel=m,m=c.refreshSorter(a)):m=a.sorter:m=c.readSorter();if(m.length||k.length)f.indices&&b.blurEditor({force:!0}),f={dataIndx:m.length?m[0].dataIndx:null,oldSorter:k,sorter:m,source:a.source,single:r},!1===b._trigger("beforeSort",q,f)?c.cancelSort():(c.resumeSort(),"local"==g&&c.saveOrder(),c.setSorter(m),c.setSingle(r),c.writeSorter(m),c.writeSingle(r),"local"==g?(c.sortLocalData(e),this._queueATriggers.sort=
{evt:q,ui:f},!1!==a.refresh&&this.refreshView()):"remote"==g&&(this._queueATriggers.sort={evt:q,ui:f},a.initByRemote||this.remoteRequest({initBySort:!0,callback:function(){b._onDataAvailable()}})))}};f.widget("paramquery.pqGrid",f.paramquery._pqGrid,k);f.paramquery.pqGrid.regional={};f.paramquery.pqGrid.regional.en=k._regional})(jQuery);
(function(f){var k=f.paramquery._pqGrid.prototype;f.paramquery=f.paramquery||{};f.paramquery.pqgrid=f.paramquery.pqgrid||{};k.exportExcel=function(b){b.format="xls";return m.call(this,b)};k.exportCsv=function(b){b.format="csv";return m.call(this,b)};k.exportXml=function(b){b.format="xml";return m.call(this,b)};k.exportHtml=function(b){b.format="html";return m.call(this,b)};var m=function(b){var c=this,a=void 0===b.urlPost?b.url:b.urlPost,e=b.url,g=null==b.sheetName?"pqGrid":b.sheetName,d=b.format,
h=function(){for(var a=c.colModel,b=a.length,e=c.options.dataModel.data,d=e.length,g=[],h=[],f=[],k=0;k<b;k++){var m=a[k];!1!==m.copy&&(m=m.title.replace(/\"/g,'""'),h.push('"'+m+'"'))}g.push(h.join(","));for(k=0;k<d;k++){for(var h=e[k],y=0;y<b;y++)m=a[y],!1!==m.copy&&(m=h[m.dataIndx]+"",m=m.replace(/\"/g,'""'),f.push('"'+m+'"'));g.push(f.join(","));f=[]}return g.join("\n")};b="xls"==d?function(){for(var a=c.colModel,b=a.length,e=c.options.dataModel.data,d=e.length,h,f=[],k=[],m=0;m<b;m++){var t=
a[m];!1!==t.copy&&(h=t._width,h||(h=parseInt(t.width))||(h=100),k.push('<Column ss:AutoFitWidth="1"  ss:Width="'+h+'" />'))}k.push("<Row>");for(m=0;m<b;m++)t=a[m],!1!==t.copy&&k.push('<Cell><Data ss:Type="String">'+t.title+"</Data></Cell>");k.push("</Row>");k=k.join("\n");for(m=0;m<d;m++){h=e[m];f.push("<Row>");for(var y=0;y<b;y++)t=a[y],!1!==t.copy&&f.push('<Cell><Data ss:Type="String"><![CDATA['+h[t.dataIndx]+"]]\x3e</Data></Cell>");f.push("</Row>")}f=f.join("\n");return['<?xml version="1.0"?>\n<?mso-application progid="Excel.Sheet"?>\n<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet"\n xmlns:o="urn:schemas-microsoft-com:office:office"\n xmlns:x="urn:schemas-microsoft-com:office:excel"\n xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"\n xmlns:html="http://www.w3.org/TR/REC-html40">\n<Worksheet ss:Name="',
g,'">\n<Table>',k,f,"</Table>\n</Worksheet>\n</Workbook>"].join("\n")}():"xml"==d?getXMLContent():"html"==d?getHTMLContent(b):h();f.ajax({url:a,type:"POST",cache:!1,data:{extension:"xls"==d?"xml":d,excel:b},success:function(a){a=e+((0<e.indexOf("?")?"&":"?")+"filename="+a);f(document.body).append("<iframe height='0' width='0' frameborder='0'  src="+a+"></iframe>")}})}})(jQuery);
(function(f){var k=f.paramquery.pqGrid.prototype.options,m={on:!1,dirtyClass:"pq-cell-dirty"};k.trackModel=k.trackModel||m;k=(f.paramquery.cUCData=function(b){this.that=b;this.udata=[];this.ddata=[];this.adata=[];this.options=b.options;var c=this,a=b.eventNamespace,e=b.widgetEventPrefix.toLowerCase();b.element.on(e+"dataavailable"+a,function(a,b){c.belongs(a)&&"filter"!=b.source&&(c.udata=[],c.ddata=[],c.adata=[])})}).prototype=new f.paramquery.cClass;k.add=function(b){var c=this.that,a=this.adata;
b=b.rowData;for(var e=this.options.trackModel.dirtyClass,g=c.getRecId({rowData:b}),d=0,h=a.length;d<h;d++){var l=a[d];if(null!=g&&l.recId==g)throw"primary key violation";if(l.rowData==b)throw"same data can't be added twice.";}var d=[],f;for(f in b)d.push(f);c.removeClass({rowData:b,dataIndx:d,cls:e});b={recId:g,rowData:b};a.push(b)};k.update=function(b){var c=this.that,a=this.options.trackModel.dirtyClass,e=b.rowData||c.getRowData(b),g=c.getRecId({rowData:e}),d=b.dataIndx,h=b.refresh,l=c.columns,
k=f.paramquery.getValueFromDataType;b=b.row;var m=this.udata,v=m.slice(0),p=!1;if(null!=g){for(var u=0,q=m.length;u<q;u++){var r=m[u],t=r.oldRow;if(r.rowData==e){p=!0;for(d in b)m=l[d].dataType,q=b[d],q=k(q,m),r=t[d],r=k(r,m),t.hasOwnProperty(d)&&r===q?(m={rowData:e,dataIndx:d,refresh:h,cls:a},c.removeClass(m),delete t[d]):(m={rowData:e,dataIndx:d,refresh:h,cls:a},c.addClass(m),t.hasOwnProperty(d)||(t[d]=e[d]));f.isEmptyObject(t)&&v.splice(u,1);break}}if(!p){t={};for(d in b)t[d]=e[d],m={rowData:e,
dataIndx:d,refresh:h,cls:a},c.addClass(m);m={rowData:e,recId:g,oldRow:t};v.push(m)}this.udata=v}};k["delete"]=function(b){var c=this.that,a=b.rowIndx,e=b.rowIndxPage,g=c.rowIndxOffset,a=null==a?e+g:a,e="remote"==c.options.pageModel.type?null==e?a-g:e:a,g=this.adata,d=this.ddata;b=c.getRowData(b);for(var c=0,h=g.length;c<h;c++)if(g[c].rowData==b){g.splice(c,1);return}d.push({indx:e,rowData:b,rowIndx:a})};k.isDirty=function(b){var c=this.udata,a=this.adata,e=this.ddata,g=!1;if(b=this.that.getRowData(b))for(a=
0;a<c.length;a++){if(b==c[a].rowData){g=!0;break}}else if(c.length||a.length||e.length)g=!0;return g};k.getChangesValue=function(){for(var b=this.udata,c=this.adata,a=this.ddata,e={updateList:[],addList:[],deleteList:[]},g=[],d=[],h=[],l=[],k=[],m=0,v=a.length;m<v;m++){var p=a[m],p=p.rowData,u={};l.push(p);for(var q in p)0!=q.indexOf("pq_")&&(u[q]=p[q]);k.push(u)}for(m=0;m<b.length;m++)if(p=b[m],p=p.rowData,-1==f.inArray(p,l)&&-1==f.inArray(p,g)){u={};for(q in p)0!=q.indexOf("pq_")&&(u[q]=p[q]);g.push(p);
d.push(u)}for(m=0;m<c.length;m++){p=c[m];p=p.rowData;u={};for(q in p)0!=q.indexOf("pq_")&&(u[q]=p[q]);h.push(u)}e.updateList=d;e.addList=h;e.deleteList=k;return e};k.getChanges=function(){for(var b=this.udata,c=this.adata,a=this.ddata,e={updateList:[],addList:[],deleteList:[]},g=[],d=[],h=[],l=0,k=a.length;l<k;l++){var m=a[l],m=m.rowData;h.push(m)}l=0;for(k=b.length;l<k;l++)m=b[l],m=m.rowData,-1==f.inArray(m,h)&&-1==f.inArray(m,g)&&g.push(m);l=0;for(k=c.length;l<k;l++)m=c[l],m=m.rowData,d.push(m);
e.updateList=g;e.addList=d;e.deleteList=h;return e};k.getChangesRaw=function(){var b=this.adata,c=this.ddata,a={updateList:[],addList:[],deleteList:[]};a.updateList=this.udata;a.addList=b;a.deleteList=c;return a};k.commitAdd=function(b,c){for(var a=this.that.colModel,e=a.length,g=this.adata,d=f.inArray,h=g.length,l=f.paramquery.getValueFromDataType,k=[],m=b.length,v=[],p=0;p<m;p++)for(var u=b[p],q=0;q<h;q++){var r=g[q].rowData,t=!0;if(-1==d(r,v)){for(var y=0;y<e;y++){var w=a[y],x=w.dataType,z=w.dataIndx;
if(!w.hidden&&z!=c&&(w=r[z],w=l(w,x),z=u[z],z=l(z,x),w!==z)){t=!1;break}}if(t){q={};t={};q[c]=u[c];t[c]=r[c];k.push({type:"update",rowData:r,oldRow:t,newRow:q});v.push(r);break}}}a=[];for(q=0;q<h;q++)r=g[q].rowData,-1==d(r,v)&&a.push(g[q]);this.adata=a;return k};k.commitUpdate=function(b,c){for(var a=this.that,e=this.options.trackModel.dirtyClass,g=a.colModel,d=g.length,h=this.udata,l=h.length,k=b.length,m=[],v=0;v<l;v++){var p=h[v],u=p.rowData,p=p.oldRow;if(-1==f.inArray(u,m))for(var q=0;q<k;q++)if(u[c]==
b[q][c]){m.push(u);for(var r=0;r<d;r++)var t=g[r].dataIndx;for(t in p)a.removeClass({rowData:u,dataIndx:t,cls:e})}}a=[];for(v=0;v<l;v++)u=h[v].rowData,-1==f.inArray(u,m)&&a.push(h[v]);this.udata=a;return[]};k.commitDelete=function(b,c){for(var a=this.ddata,e=a.length,g=b.length,d=[],h=0;h<e;h++)for(var l=a[h].rowData,k=0;k<g;k++)l[c]==b[k][c]&&d.push(l);g=[];for(h=0;h<e;h++)l=a[h].rowData,-1==f.inArray(l,d)&&g.push(a[h]);this.ddata=g};k.commitUpdateAll=function(){for(var b=this.that,c=this.options.trackModel.dirtyClass,
a=this.udata,e=0,g=a.length;e<g;e++){var d=a[e],h=d.oldRow,d=d.rowData,l;for(l in h)b.removeClass({rowData:d,dataIndx:l,cls:c})}this.udata=[]};k.commitAddAll=function(){this.adata=[]};k.commitDeleteAll=function(){this.ddata=[]};k.commit=function(b){var c=this.that,a=b?b.history:null,a=null==a?!1:a,e=[],e=[],g=[],d=c.options.dataModel.recIndx;if(null==b)this.commitAddAll(),this.commitUpdateAll(),this.commitDeleteAll();else{var h=b.type;b=b.rows;"add"==h?b?e=this.commitAdd(b,d):this.commitAddAll():
"update"==h?b?g=this.commitUpdate(b,d):this.commitUpdateAll():"delete"==h&&(b?this.commitDelete(b,d):this.commitDeleteAll())}e=e.concat(g);e.length&&(c._digestData({source:"commit",checkEditable:!1,track:!1,history:a,rowList:e}),c.refreshView())};k.rollbackAdd=function(b,c){for(var a=this.adata,e=[],g=0,d=a.length;g<d;g++)e.push({type:"delete",rowData:a[g].rowData});this.adata=[];return e};k.rollbackDelete=function(b,c){for(var a=this.ddata,e=[],g=a.length-1;0<=g;g--){var d=a[g];e.push({type:"add",
rowIndx:d.rowIndx,newRow:d.rowData})}this.ddata=[];return e};k.rollbackUpdate=function(b,c){for(var a=this.that,e=this.options.trackModel.dirtyClass,g=this.udata,d=[],h=0,l=g.length;h<l;h++){var f=g[h],k=f.rowData,m={},p=f.oldRow;if(null!=f.recId){var f=[],u;for(u in p)m[u]=k[u],f.push(u);a.removeClass({rowData:k,dataIndx:f,cls:e,refresh:!1});d.push({type:"update",rowData:k,newRow:p,oldRow:m})}}this.udata=[];return d};k.rollback=function(b){var c=this.that,a=c.options.pageModel,e=b&&null!=b.refresh?
b.refresh:!0;b=b&&null!=b.type?b.type:null;var g=[],g=[],d=[],h=[],l=c.options.dataModel.data;if(null==b||"update"==b)d=this.rollbackUpdate(a,l);if(null==b||"delete"==b)g=this.rollbackDelete(a,l);if(null==b||"add"==b)h=this.rollbackAdd(a,l);g=g.concat(h,d);c._digestData({history:!1,allowInvalid:!0,checkEditable:!1,source:"rollback",track:!1,rowList:g});e&&c.refreshView()};k=f.paramquery.pqGrid.prototype;k.getChanges=function(b){this.blurEditor({force:!0});if(b&&(b=b.format)){if("byVal"==b)return this.iUCData.getChangesValue();
if("raw"==b)return this.iUCData.getChangesRaw()}return this.iUCData.getChanges()};k.rollback=function(b){this.blurEditor({force:!0});this.iUCData.rollback(b)};k.isDirty=function(b){return this.iUCData.isDirty(b)};k.commit=function(b){this.iUCData.commit(b)};k._getRowIndx=function(){var b=this.selection({type:"row",method:"getSelection"});if(b&&0<b.length){var b=b[0].rowIndx,c=this.options.pageModel,a=b-this.rowIndxOffset,e=c.rPP;if(c.type){if(0<=a&&a<e)return b}else return b}else return null};k.updateRow=
function(b){var c=b.rowIndx,a=b.row,e=b.rowData||this.getRowData({rowIndx:c});if(!e)return!1;var g={},d;for(d in a){var h=this.columns[d];h&&(g[d]=this.iGenerateView.readCell(e,h))}if(!1===this._digestData({source:b.source||"update",history:b.history,checkEditable:b.checkEditable,track:b.track,allowInvalid:b.allowInvalid,rowList:[{newRow:a,oldRow:g,rowData:e,rowIndx:c,type:"update"}]}))return!1;!1!==b.refresh&&this.refreshRow({rowIndx:c})};k.updateElseAdd=function(b){var c=b.row;null==this.getRowData({rowIndx:b.rowIndx})?
(b.rowData=c,this.addRow(b)):this.updateRow(b)};k._fillForm=function(b){var c=this.colModel,a=this.rowIndxOffset,e=null==b.rowIndxPage?b.rowIndx-a:b.rowIndxPage;b=null==b.rowIndx?e+a:b.rowIndx;this.rowData=e=this.options.dataModel.data["remote"==this.options.pageModel.type?e:b];this.$crudDialog.dialog("option","title","Edit Record ("+(b+1)+")");b=this.$crudForm;for(a=0;a<c.length;a++){var g=c[a].dataIndx,d=e[g];b.find("*[name='"+g+"']").val(d)}};k.getRecId=function(b){b.dataIndx=this.options.dataModel.recIndx;
b=this.getCellData(b);return null==b?null:b};k.getCellData=function(b){var c=b.rowData||this.getRowData(b);b=b.dataIndx;return c?c[b]:null};k.getRowData=function(b){if(!b)return null;var c=b.rowData;if(null!=c)return c;var a=this.options,c=a.dataModel,a=a.pageModel.type,e=c.recIndx,g=b.recId,c=c.data;if(null!=g)for(b=0,a=c.length;b<a;b++){var d=c[b];if(d[e]==g)return d}else return e=b.rowIndx,b=b.rowIndxPage,g=this.rowIndxOffset,e=null!=e?e:b+g,b="remote"==a?null!=b?b:e-g:e,d=c?c[b]:null;return null};
k.deleteRow=function(b){var c=b.rowIndx,a=b.rowIndxPage,e=this.rowIndxOffset,c=null!=a?a+e:c;null!=c&&(a=b.rowData||this.getRowData({rowIndx:c}),this._digestData({source:b.source||"delete",history:b.history,track:b.track,rowList:[{rowIndx:c,rowData:a,oldRow:a,type:"delete"}]}),!1!==b.refresh&&this.refreshView())};k.addRow=function(b){var c=b.rowData||b.row,a=b.rowIndx,e=b.rowIndxPage,g=this.rowIndxOffset,a=null!=e?e+g:a,e=this.options.dataModel,g=e.data;if(null==c)return null;null==g&&(e.data=[],
g=e.data);if(!1===this._digestData({source:b.source||"add",history:b.history,track:b.track,checkEditable:b.checkEditable,rowList:[{newRow:c,rowIndx:a,type:"add"}]}))return!1;!1!==b.refresh&&this.refreshView();return null==a?g.length-1:a}})(jQuery);
(function(f){f.widget("paramquery.pqToolbar",{options:{items:[],gridInstance:null},_create:function(){var k=this.options,m=k.gridInstance,b=m.colModel,c=k.items,a=this.element;a.closest(".pq-grid");a.addClass("pq-toolbar");for(var e=0,g=c.length;e<g;e++){var d=c[e],k=d.type,h=d.icon,l=d.label,n=d.listener,s=n?[n]:d.listeners,n=d.cls,n="ui-corner-all "+(n?n:""),v=d.style,v=v?'style="'+v+'"':"",p=d.attr,p=p?p:"",u;"textbox"==k?u=f("<input type='text' class='"+n+"' "+p+" "+v+">").appendTo(a):"checkbox"==
k?u=f("<input type='checkbox' class='"+n+"' "+p+" "+v+">").appendTo(a):"separator"==k?f("<span class='pq-separator '"+n+"' "+p+" "+v+"></span>").appendTo(a):"button"==k?(k=d.options?d.options:{},f.extend(k,{text:l?!0:!1,icons:{primary:h}}),u=f("<button type='button' class='"+n+"' "+p+" "+v+">"+l+"</button>").button(k).appendTo(a)):"select"==k?(k=d.options?d.options:[],"function"===typeof k&&(k=k.call(m.element[0],{colModel:b})),u=f.paramquery.select({options:k,attr:" class='"+n+"' "+p+" "+v,prepend:d.prepend,
groupIndx:d.groupIndx,valueIndx:d.valueIndx,labelIndx:d.labelIndx}),u=f(u).appendTo(a)):"string"==typeof k?u=f(k).appendTo(a):"function"==typeof k&&(u=k.call(m.element[0],{colModel:b,cls:n}),u=f(u).appendTo(a));if(s)for(d=0;d<s.length;d++){var n=s[d],q;for(q in n)u.bind(q,n[q])}}},_destroy:function(){this.element.empty().removeClass("pq-toolbar").enableSelection()},_disable:function(){null==this.$disable&&(this.$disable=f("<div class='pq-grid-disable'></div>").css("opacity",.2).appendTo(this.element))},
_enable:function(){this.$disable&&(this.element[0].removeChild(this.$disable[0]),this.$disable=null)},_setOption:function(f,m){"disabled"==f&&(!0==m?this._disable():this._enable())}})})(jQuery);
(function(f){var k=function(){this.focusSelection=null},m=k.prototype;m.triggerSelectChange=function(a){var b=this.that;if(b.options.selectionModel.fireSelectChange){var c=b.iRows.getSelection(),d=b.iCells.getSelection(),h=a.evt;a=a.ui;c={rows:c,cells:d};a=null==a?c:f.extend(c,a);b._trigger("selectChange",h,a)}};m.getOldRowSel=function(){var a=this.that,b;if((b=this.focusSelection)&&this.isSelected(b))return a=a.getRowIndx(b),a.rowData=b.rowData,a};m.getOldCellSel=function(){var a=this.that,b;if((b=
this.focusSelection)&&this.isSelected(b)){var c=b.rowData,a=a.getRowIndx({rowData:c});a.rowData=c;a.dataIndx=b.dataIndx;return a}};m.getNewRowSel=function(){var a=this.that,b=document.activeElement?f(document.activeElement):null;if(b&&b.hasClass("pq-grid-row")&&b.closest(".pq-grid")[0]==a.element[0])return a=a.getRowIndx({$tr:b}),a.$tr=b,a};m.getNewCellSel=function(){var a=this.that,b=document.activeElement?f(document.activeElement):null;if(b&&b.hasClass("pq-grid-cell")&&b.closest(".pq-grid")[0]==
a.element[0])return a=a.getCellIndices({$td:b}),a.$td=b,a};m.getFocusSelection=function(a){if(this instanceof b)return a&&!0===a.old?this.getOldRowSel():this.getNewRowSel();if(this instanceof c)return a&&!0===a.old?this.getOldCellSel():this.getNewCellSel()};m.getFirstSelection=function(){var a=this.firstSelection;if(a&&this.isSelected(a))return a;this.refresh();a=this.selection;if(a.length)return this.firstSelection=a[0],a[0]};m.getLastSelection=function(){var a=this.lastSelection;if(a){var b=a.rowData,
c=this.that.getRowData({rowIndx:rowIndx});return b==c&&this.isSelected(a)?a:!1}return null};m.getLastSelectionCurPage=function(){var a=this.lastSelection;if(a&&this.isSelected(a)){var b=a.rowIndx,c=this.that.options.pageModel;if(c.type){var d=c.curPage;return Math.ceil((b+1)/c.rPP)==d?a:null}return a}return null};m.getSelection=function(){this.refresh();return this.selection};m.getSelectionCurPage=function(){var a=this.that,b=this.getSelection(),c=[],d=a.options.pageModel;if(d.type){for(var a=d.curPage,
d=d.rPP,h=0;h<b.length;h++){var l=b[h];Math.ceil((l.rowIndx+1)/d)==a&&c.push(l)}return c}return b};m.inViewRow=function(a){var b=this.that,c=this.options,d=b.rowIndxOffset,h=b.initV,l=b.finalV;if(a<c.freezeRows)return!0;if(c.groupModel){if((b=b.dataGM)&&b.length)for(;h<=l;h++)if(c=b[h].rowIndx-d,null!=c&&c==a)return!0;return!1}return a>=h&&a<=l};m.setDirty=function(){};var b=function(a){this.that=a;this.options=a.options;this.selection=[]};f.paramquery.cRows=b;var c=function(a){this.options=a.options;
this.that=a;this.selection=[]};f.paramquery.cCells=c;m=c.prototype=new k;k=b.prototype=new k;k.extendSelection=function(a){var b=this.that,c=a.rowIndx,d=b.options.selectionModel.mode;a=a.evt;var h=this.getFirstSelection();null==h?b.setSelection({rowIndx:c}):"single"!=d&&(d=b=h.rowIndx,h=c,b>c&&(d=c,h=b),this.selectRange({initRowIndx:d,finalRowIndx:h,evt:a}),this.add({rowIndx:c}))};k.refresh=function(){this.selection=[];var a=this.that,b=a.options,c="remote"==b.pageModel.type?!0:!1,a=a.rowIndxOffset,
d=[];if(b=b.dataModel.data){for(var h=0,l=b.length;h<l;h++){var f=b[h];f.pq_rowselect&&d.push({rowIndx:c?h+a:h,rowData:f})}this.selection=d}};k.replace=function(a){var b=a.rowIndx,c=null==a.offset?this.that.getRowIndxOffset():a.offset;a.offset=c;a.rowIndxPage=b-c;this.removeAll({raiseEvent:!0});this.add(a)};k.indexOf=function(a){this.refresh();a=a.rowIndx;for(var b=this.selection,c=0;c<b.length;c++)if(b[c].rowIndx==a)return c;return-1};k.isSelected=function(a){var b=this.that;return(a=a.rowData||
b.getRowData(a))?null==a.pq_rowselect?!1:a.pq_rowselect:null};k._boundRow=function(a){var b=a.rowIndxPage,c=this.that;a=null==a.$tr?c.getRow({rowIndxPage:b}):a.$tr;if(null==a||0==a.length)return!1;a.addClass("pq-row-select ui-state-highlight");return a};k.selectRange=function(a){var b=a.initRowIndx,c=a.finalRowIndx;a=a.evt;for(var d=this.getSelection().slice(0),h=[],l=0;l<d.length;l++){var f=d[l],k=f.rowIndx;(k<b||k>c)&&h.push({rowIndx:k,rowData:f.rowData})}this.remove({rows:h,evt:a});h=[];b>c&&(d=
b,b=c,c=d);for(k=b;k<=c;k++)h.push({rowIndx:k,evt:a});this.add({rows:h,evt:a})};m._addToData=function(a){var b=a.dataIndx;a=this.that.getRowData(a);a.pq_cellselect||(a.pq_cellselect={});a.pq_cellselect[b]=!0};m.extendSelection=function(a){var b=this.that,c=this.getFirstSelection(),d=a.rowIndx,h=a.colIndx,l=b.options.selectionModel.mode;a=a.evt;if(null==c)b.setSelection({rowIndx:d,colIndx:h});else{var f=c.rowIndx,b=b.getColIndx({dataIndx:c.dataIndx}),c=f,k=d,m=b,p=h;f>d&&(c=d,k=f);"range"==l?(f>d&&
(m=h,p=b),d==f&&h<b&&(m=h,p=b),this.selectRange({initRowIndx:c,initColIndx:m,finalRowIndx:k,finalColIndx:p,evt:a}),this.add({rowIndx:d,colIndx:h})):"block"==l&&(b>h&&(m=h,p=b),this.selectBlock({initRowIndx:c,initColIndx:m,finalRowIndx:k,finalColIndx:p,evt:a}),this.add({rowIndx:d,colIndx:h}))}};m._removeFromData=function(a){var b=a.rowData;b&&b.pq_cellselect&&delete b.pq_cellselect[a.dataIndx]};m.removeAll=function(){this.refresh();var a=this.selection.slice(0);this.remove({cells:a});this.lastSelection=
null};k.removeAll=function(a){if(a&&null!=a.page)throw"objP.page not supported in removeAll";var b=this.that,c=a&&null!=a.all?a.all:!0;this.refresh();a=this.selection.slice(0);if(c)this.remove({rows:a}),this.lastSelection=null;else{for(var c=[],d=b.rowIndxOffset,b=(b=b.pdata)?b.length:0,h=0,l=a.length;h<l;h++){var f=a[h],k=f.rowIndx-d;if(0<=k)if(k<b)c.push(f);else break}this.remove({rows:c})}};m.isSelected=function(a){var b=this.that,c=a.rowData||b.getRowData(a),d=a.dataIndx;a=a.colIndx;if(null==
a&&null==d||null==c)return null;d=null==d?b.colModel[a].dataIndx:d;return c.pq_cellselect&&c.pq_cellselect[d]?!0:!1};m.refresh=function(){this.selection=[];var a=this.that,b=a.options.dataModel.data,c=[],d="remote"==a.options.pageModel.type?!0:!1,a=a.rowIndxOffset,h=this.that.colModel,l=h.length;if(b){for(var f=[],k=0;k<l;k++){var m=h[k].dataIndx;f[k]=m}for(var k=0,p=b.length;k<p;k++){var u=b[k],q=u.pq_cellselect;if(q)for(var r=d?k+a:k,t=0;t<l;t++)m=f[t],q[m]&&c.push({rowIndx:r,rowData:u,dataIndx:m,
colIndx:t,column:h[t]})}this.selection=c}};m.replace=function(a){var b=a.rowIndx,c=null==a.offset?this.that.getRowIndxOffset():a.offset;a.rowIndxPage=b-c;a.offset=c;this.removeAll({raiseEvent:!0});this.add(a)};m.inViewCell=function(a,b){var c=this.that,d=this.options.freezeCols;return this.inViewRow(a)?b<d||b>=c.initH&&b<=c.finalH:!1};m._add=function(a){var b=this.that,c=a.rowIndx,d=a.rowIndxPage,h=a.rowData||b.getRowData(a),l=b.rowIndxOffset,f,c=null==c?d+l:c,d=null==d?c-l:d,l=a.colIndx,k=a.dataIndx,
l=null==l?b.getColIndx({dataIndx:k}):l,m=b.colModel[l],k=null==k?m.dataIndx:k,p=a.evt,u=this.isSelected({rowData:h,dataIndx:k});if(null==u)return!1;var q=this.inViewCell(d,l);if(!1===u){if(q){var r=b.getCell({rowIndxPage:d,colIndx:l});r&&r.addClass("pq-state-select ui-state-highlight")}this._addToData({rowData:h,dataIndx:k});!1!==a.trigger&&b._trigger("cellSelect",p,{rowIndx:c,rowIndxPage:d,colIndx:l,dataIndx:k,column:m,rowData:h});f=!0}this.lastSelection={rowIndx:c,dataIndx:k,rowData:h};!1!==a.focus&&
q&&(r&&r.length||(r=b.getCell({rowIndxPage:d,dataIndx:k})),r&&r.length&&(r.attr("tabindex","0"),r.focus(),this.focusSelection={rowData:h,rowIndx:c,dataIndx:k}));a.setFirst&&(this.firstSelection={rowIndx:c,rowData:h,dataIndx:k});if(f)return{rowIndx:c,rowData:h,dataIndx:k,colIndx:l,column:m}};k._add=function(a){var b=this.that,c,d=a.rowIndx,h=a.rowIndxPage,l=b.rowIndxOffset,d=null==d?h+l:d,h=null==h?d-l:h,k=null==k?b.getRowData(a):k,l=a.$tr,m=a.evt,v=this.isSelected({rowData:k});a.rowIndxPage=h;if(null==
v)return!1;var p=this.inViewRow(h);!1===v&&(p&&(l=this._boundRow(a)),k.pq_rowselect=!0,!1!==a.trigger&&b._trigger("rowSelect",m,{rowIndx:d,rowIndxPage:h,rowData:k,$tr:l}),c=!0);this.lastSelection={rowIndx:d,rowData:k};!1!==a.focus&&p&&(l&&l.length||(l=b.getRow({rowIndxPage:h})),l&&(l=f(l[0]),l.attr("tabindex","0"),l.focus(),this.focusSelection={rowData:k,rowIndx:d}));a.setFirst&&(this.firstSelection={rowIndx:d,rowData:k});if(c)return{rowIndx:d,rowData:k}};m.add=function(a){var b=this.that,c=a.evt,
d=a.cells,h=!1,l=[];if(d&&"function"==typeof d.push){a=0;for(var f=d.length;a<f;a++)h=d[a],h.trigger=!1,(h=this._add(h))&&l.push(h);l.length&&(h=!0,b._trigger("cellSelect",c,{cells:l}))}else h=this._add(a);h&&this.triggerSelectChange({evt:c})};k.add=function(a){var b=this.that,c=a.evt,d=a.rows,h=!1,l=[];if(d&&"function"==typeof d.push){a=0;for(var f=d.length;a<f;a++)h=d[a],h.trigger=!1,(h=this._add(h))&&l.push(h);l.length&&(h=!0,b._trigger("rowSelect",c,{rows:l}))}else h=this._add(a);h&&this.triggerSelectChange({evt:c})};
m._remove=function(a){var b=this.that,c=a.rowIndx,d=a.rowIndxPage,h=b.rowIndxOffset,c=null==c?d+h:c,d=null==d?c-h:d,h=a.rowData||b.getRowData(a),l=a.colIndx,f=a.dataIndx,l=null==l?b.getColIndx({dataIndx:f}):l,k=a.column,k=null==k?b.colModel[l]:k,f=null==f?k.dataIndx:f,m=a.evt;if(this.isSelected({rowData:h,dataIndx:f}))return this.inViewCell(d,l)&&(d=b.getCell({rowIndxPage:d,colIndx:l,all:!0}))&&(d.removeClass("pq-state-select ui-state-highlight"),d.removeAttr("tabindex")),this._removeFromData({rowData:h,
dataIndx:f}),!1!==a.trigger&&b._trigger("cellUnSelect",m,{rowIndx:c,colIndx:l,dataIndx:f,rowData:h}),{rowIndx:c,rowData:h,dataIndx:f,colIndx:l,column:k}};k._remove=function(a){var b=this.that,c=a.rowIndx,d=a.rowIndxPage,h=b.rowIndxOffset,c=null==c?d+h:c,d=null==d?c-h:d,h=a.rowData,h=null==h?b.getRowData(a):h,l=a.$tr,f=a.evt;if(this.isSelected({rowData:h}))return this.inViewRow(d)&&(l=b.getRow({rowIndxPage:d}))&&(l.removeClass("pq-row-select ui-state-highlight"),l.removeAttr("tabindex")),h.pq_rowselect=
!1,!1!==a.trigger&&b._trigger("rowUnSelect",f,{rowIndx:c,rowData:h,$tr:l}),{rowIndx:c,rowData:h}};m.remove=function(a){var b=a.cells,c=a.evt,d=!1;if(b&&"function"==typeof b.push){a=[];for(var h=0,f=b.length;h<f;h++)d=b[h],d.trigger=!1,(d=this._remove(d))&&a.push(d);a.length&&(d=!0,this.that._trigger("cellUnSelect",c,{cells:a}))}else d=this._remove(a);d&&this.triggerSelectChange({evt:c})};k.remove=function(a){var b=a.rows,c=a.evt,d=!1;if(b&&"function"==typeof b.push){a=[];for(var h=0,f=b.length;h<
f;h++)d=b[h],d.trigger=!1,(d=this._remove(d))&&a.push(d);a.length&&(d=!0,this.that._trigger("rowUnSelect",c,{rows:a}))}else d=this._remove(a);d&&this.triggerSelectChange({evt:c})};m.indexOf=function(a){this.refresh();var b=a.rowIndx,c=this.that,c=null==a.dataIndx?c.colModel[a.colIndx].dataIndx:a.dataIndx;a.dataIndx=c;a=this.selection;for(var d=0;d<a.length;d++){var h=a[d];if(h.rowIndx==b&&h.dataIndx==c)return d}return-1};m.selectAll=function(a){var b=this.that,c=a&&a.all?!0:!1;a=c?this.options.dataModel.data:
b.pdata;var d=b.rowIndxOffset,h=b.colModel,f=h.length,k=[],b=function(a,b){for(var c=0;c<f;c++){var d=h[c];d.hidden||k.push({rowIndx:b,rowData:a,colIndx:c,dataIndx:d.dataIndx,focus:!1})}};if(a){for(var m=0,v=a.length;m<v;m++)var p=a[m];if(c)for(c="remote"==this.options.pageModel.type?!0:!1,m=0,v=a.length;m<v;m++){var p=a[m],u=m;c&&(u=m+d);b(p,u)}else for(m=0,v=a.length;m<v;m++)p=a[m],u=m+d,b(p,u);this.add({cells:k})}};k.selectAll=function(a){var b=this.that,c=a&&a.all?!0:!1,b=c?this.options.dataModel.data:
b.pdata;a=[];if(b){if(c)for(var c="remote"==this.options.pageModel.type?!0:!1,d=0,h=b.length;d<h;d++){var f={rowData:b[d],focus:!1};c?f.rowIndxPage=d:f.rowIndx=d;a.push(f)}else for(d=0,h=b.length;d<h;d++)a.push({rowIndxPage:d,rowData:b[d],focus:!1});this.add({rows:a})}};m.selectRange=function(a){var b=this.that,c=a.initRowIndx,d=a.initColIndx,h=a.finalRowIndx;a=a.finalColIndx;for(var f=b.colModel,k=f.length,m=this.getSelection().slice(0),v=[],p=0;p<m.length;p++){var u=m[p],q=u.rowIndx,r=u.dataIndx,
u=b.getColIndx({dataIndx:r});q<c||q>h?v.push({rowIndx:q,colIndx:u,dataIndx:r}):q==c&&u<d?v.push({rowIndx:q,colIndx:u,dataIndx:r}):q==h&&u>a&&v.push({rowIndx:q,colIndx:u,dataIndx:r})}this.remove({cells:v});v=[];for(u=0;u<k;u++)if(b=f[u],!b.hidden){r=b.dataIndx;q=c;do{if(!(q==c&&u<d))if(q==h&&u>a)break;else v.push({rowIndx:q,colIndx:u,dataIndx:r,focus:!1});q++}while(q<=h)}this.add({cells:v})};m.selectBlock=function(a){var b=this.that,c=a.initRowIndx,d=a.initColIndx,h=a.finalRowIndx,f=a.finalColIndx;
a=a.evt;for(var k=this.getSelection().slice(0),m=b.colModel,v=[],p=0;p<k.length;p++){var u=k[p],q=u.rowIndx,u=u.dataIndx,r=b.getColIndx({dataIndx:u});r<d||r>f?v.push({rowIndx:q,colIndx:r,dataIndx:u}):(q<c||q>h)&&v.push({rowIndx:q,colIndx:r,dataIndx:u})}this.remove({cells:v});v=[];for(r=d;r<=f;r++)if(b=m[r],u=b.dataIndx,!b.hidden){q=c;do v.push({rowIndx:q,colIndx:r,dataIndx:u,focus:!1}),q++;while(q<=h)}this.add({cells:v,evt:a})}})(jQuery);
(function(f){var k=(f.paramquery.cCheckBoxColumn=function(k,b){var c=this;this.that=k;this.options=k.options;this.column=b;b.cb=f.extend({},{all:!1,header:!0,select:!0},b.cb);this.dataIndx=b.dataIndx;var a=k.widgetEventPrefix.toLowerCase(),e=k.element,g=k.eventNamespace;e.on(a+"dataavailable"+g,function(a,b){if(c.belongs(a))return c._onDataAvailable(a,b)});e.on(a+"cellclick"+g,function(a,b){if(c.belongs(a))return c.cellClick(a,b)});b.cb.reverse&&(e.on(a+"rowselect"+g,function(a,b){if(c.belongs(a))return c.rowSelect(a,
b)}),e.on(a+"rowunselect"+g,function(a,b){if(c.belongs(a))return c.rowUnSelect(a,b)}));e.on(a+"cellkeydown"+g,function(a,b){if(c.belongs(a))return c.cellKeyDown(a,b)});e.on(a+"refresh"+g+" "+a+"refreshrow"+g,function(a,b){if(c.belongs(a))return c.refreshHeader(a,b)})}).prototype=new f.paramquery.cClass;k.hasHeaderChkBox=function(){return this.column.cb.header};k.setValCBox=function(){if(this.hasHeaderChkBox()){for(var f=this.that,b=this.options,c=this.dataIndx,f=this.column.cb.all?b.dataModel.data:
f.pdata,b=null,a=0,e=0,g=0,d=f.length;g<d;g++)f[g][c]?a++:e++;a==d?b=!0:e==d&&(b=!1);this.$inp.pqval({val:b})}};k.onHeaderClick=function(k){var b=this.that,c=f(k.currentTarget).find("input"),a=this.column,e=a.dataIndx,g=b.getColIndx({dataIndx:e}),d=a.cb,h=d.all?b.options.dataModel.data:b.pdata,a={column:a,dataIndx:e,source:"header"},l=f(k.target).is("input")?!0:!1,n=c.is(":checked"),s=n;l||(s=!n);if(s){if(!1===b._trigger("beforeCheck",k,a))return!1;l||c.pqval({val:!0});c=0;for(l=h.length;c<l;c++)n=
h[c],n[e]=!0;b.$tbl.children().children().children("[pq-col-indx="+g+"]").find("input").prop("checked",!0);!1!==b._trigger("check",k,a)&&d.select&&this.selectAllRows()}else{if(!1===b._trigger("beforeunCheck",k,a))return!1;l||c.pqval({val:!1});c=0;for(l=h.length;c<l;c++)n=h[c],n[e]=!1;b.$tbl.children().children().children("[pq-col-indx="+g+"]").find("input").prop("checked",!1);!1!==b._trigger("unCheck",k,a)&&d.select&&this.unSelectAllRows()}};k.refreshHeader=function(f,b){if(this.hasHeaderChkBox()){var c=
this.that;if(c.pdata){var a=this;if(c=c.getCellHeader({dataIndx:this.dataIndx}))c.html("<input type='checkbox'/>"),this.$inp=c.find("input"),c.click(function(b){return a.onHeaderClick(b)}),this.setValCBox()}}};k.selectAllRows=function(){this.that.iRows.selectAll({all:this.column.cb.all})};k.unSelectAllRows=function(){this.that.iRows.removeAll({all:this.column.cb.all})};k._onDataAvailable=function(){var f=this.that,b=this.options,c=b.dataModel.data,b="remote"==b.pageModel.type?f.rowIndxOffset:0,a=
this.column,e=a.cb,g=a.dataIndx;if(null!=g&&c){for(var d=[],h=0,l=c.length;h<l;h++){var k=c[h];k[g]&&d.push({rowIndx:h+b,rowData:k})}if(!1!==f._trigger("check",null,{rows:d,column:a,dataIndx:g,source:"dataAvailable"})&&e.select)for(h=0;h<l;h++)k=c[h],k[g]&&(k.pq_rowselect=!0)}};k.cellClick=function(f,b){if(b.dataIndx===this.dataIndx)return this.raiseEvent(f,b)};k.rowSelect=function(f,b){var c=this.that,a=b.rows,e=b.rowData,g=this.dataIndx;if(a)for(var d=0,h=a.length;d<h;d++){var e=a[d],l=e.rowIndx,
e=e.rowData;e[g]=!0;c.refreshCell({rowIndx:l,dataIndx:g})}else e&&(e[g]=!0,l=b.rowIndx,c.refreshCell({rowIndx:l,dataIndx:g}));this.setValCBox()};k.rowUnSelect=function(f,b){var c=this.that,a=b.rows,e=b.rowData,g=this.dataIndx;if(a)for(var d=0,h=a.length;d<h;d++){var e=a[d],l=e.rowIndx,e=e.rowData;e[g]=!1;c.refreshCell({rowIndx:l,dataIndx:g})}else e&&(e[g]=!1,l=b.rowIndx,c.refreshCell({rowIndx:l,dataIndx:g}));this.setValCBox()};k.raiseEvent=function(k,b){var c=this.that,a=b.rowData,e=this.column.cb,
g=f(k.originalEvent.target).is("input")?!0:!1,d=b.rowIndx,h=b.dataIndx;if(a[h]){if(!1===c._trigger("beforeunCheck",k,b))return!1;a[h]=!1;g||(a=c.getCell(b).find("input"),a.pqval({val:!1}));!1!==c._trigger("unCheck",k,b)&&e.select&&c.iRows.remove({rowIndx:d})}else{if(!1===c._trigger("beforeCheck",k,b))return!1;a[h]=!0;g||(a=c.getCell(b).find("input"),a.pqval({val:!0}));!1!==c._trigger("check",k,b)&&e.select&&c.iRows.add({rowIndx:d})}this.setValCBox();if(!g)return!1};k.cellKeyDown=function(f,b){if(b.dataIndx=
this.dataIndx)if(13==f.keyCode||32==f.keyCode)return this.raiseEvent(f,b)}})(jQuery);
(function(){for(var f=0,k=["moz","webkit"],m=0;!window.requestAnimationFrame&&m<k.length;m++)window.requestAnimationFrame=window[k[m]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[k[m]+"CancelAnimationFrame"]||window[k[m]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),c=Math.max(0,16-(c-f));return window.setTimeout(function(){f=(new Date).getTime();b()},c)});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(b){clearTimeout(b)})})();
(function(f){function k(b){this.that=b;var a=this,e=b.element,g=b.widgetEventPrefix.toLowerCase(),d=b.eventNamespace;this.borderBottomExtra=this.borderBottom=this.borderLeftExtra=this.borderLeft=this.borderTopExtra=this.borderTop=this.borderRightExtra=this.borderRight=this.scrollLeft=this.scrollTop=0;this.maxBorder=5E3;this.rowht=b.options.rowHeight;this.colwd=60;e.on(g+"contmousedown"+d,function(b,c){if(a.belongs(b))return a._onContMouseDown(b,c)}).on(g+"mousedrag"+d,function(b,c){if(a.belongs(b)&&
a.swipedown)return a._onMouseDrag(b,c)}).on(g+"mousestop"+d,function(b,c){return a._onMouseStop(b,c)}).on(g+"mousepqup"+d,function(b,c){return a._onMousePQUp(b,c)}).on(g+"rowmousedown"+d,function(b,c){if(a.belongs(b))return a._onRowMouseDown(b,c)}).on(g+"cellmousedown"+d,function(b,c){if(a.belongs(b))return a._onCellMouseDown(b,c)}).on(g+"beforetableview"+d,function(b,c){if(a.belongs(b))return a._beforeTableView(b,c)}).on(g+"refresh"+d,function(b,c){if(a.belongs(b))return a._onRefresh(b,c)}).on(g+
"cellmouseenter"+d,function(b,c){if(a.belongs(b))return a._onCellMouseEnter(b,c)}).on(g+"rowmouseenter"+d,function(b,c){if(a.belongs(b))return a._onRowMouseEnter(b,c)})}var m=f.paramquery.pqgrid.calcWidthCols;f.paramquery.cMouseSelection=k;var b=k.prototype=new f.paramquery.cClass;b._beforeTableView=function(b,a){var e=this.that,g=e.getFocusElement();this.lastFocus=null;g&&g.$grid&&(g=g.$ae,g.hasClass("pq-grid-row")?this.lastFocus=e=e.getRowIndx({$tr:g}):g.hasClass("pq-grid-cell")&&(this.lastFocus=
e=e.getCellIndices({$td:g})))};b.inViewPort=function(b){var a=this.that.iRefresh,e=a.getEContHt(),a=a.getEContWd()+1;b=b[0];var g=this.scrollLeft;if(e>=b.offsetTop+b.offsetHeight+this.marginTop)if("TD"==b.nodeName.toUpperCase()){if(a>=b.offsetLeft+b.offsetWidth+g)return!0}else return!0};b._onRefresh=function(b,a){var e=this.that,g=this.lastFocus;g&&(e=null!=g.dataIndx?e.getCell(g):e.getRow(g))&&e.length&&e.attr("tabindex","0").focus()};b._onCellMouseDown=function(b,a){var e=this.that,g=a.rowIndx,
d=a.colIndx,h=e.options.selectionModel,f=h.mode;if("cell"==h.type&&null!=d)return b.shiftKey?(e.iCells.extendSelection({rowIndx:g,colIndx:d,mode:f,evt:b}),b.preventDefault()):(b.ctrlKey||b.metaKey)&&"single"!=f?e.iCells.isSelected({rowIndx:g,colIndx:d})?e.iCells.remove({rowIndx:g,colIndx:d}):e.iCells.add({rowIndx:g,colIndx:d}):h.addon?e.iCells.isSelected({rowIndx:g,colIndx:d})?e.iCells.remove({rowIndx:g,colIndx:d}):(e.iCells.add({rowIndx:g,colIndx:d}),this.mousedown={r1:g,c1:d}):(this.mousedown={r1:g,
c1:d},e.setSelection(null),e.iCells.add({rowIndx:g,colIndx:d,setFirst:!0})),!0};b._onCellMouseEnter=function(b,a){var e=this.that;if("cell"==e.options.selectionModel.type&&this.mousedown){var g=this.mousedown,d=g.c1,h=a.rowIndx,f=a.colIndx;if(g.r1!=h||d!=f)if(g.r2!=h||g.c2!=f)this.mousedown.r2=h,this.mousedown.c2=f,e.scrollCell({rowIndx:h,colIndx:f}),e.iCells.extendSelection({rowIndx:h,colIndx:f,evt:b})}};b._onRowMouseEnter=function(b,a){var e=this.that;if("row"==e.options.selectionModel.type&&this.mousedown){var g=
a.rowIndx;this.mousedown.r1!=g&&this.mousedown.r2!=g&&(this.mousedown.r2=g,e.scrollRow({rowIndx:g}),e.iRows.extendSelection({rowIndx:g,evt:b}))}};b._onRowMouseDown=function(b,a){var e=this.that,g=a.rowIndx,d=e.options.selectionModel,h=d.mode;if("row"==d.type&&null!=g)return b.shiftKey?(e.iRows.extendSelection({rowIndx:g,evt:b}),b.preventDefault()):(b.ctrlKey||b.metaKey)&&"single"!=h?e.iRows.isSelected({rowIndx:g})?e.iRows.remove({rowIndx:g}):e.iRows.add({rowIndx:g}):(this.mousedown={r1:g,y1:b.pageY,
x1:b.pageX},e.setSelection(null),e.iRows.add({rowIndx:g,setFirst:!0})),!0};b._onContMouseDown=function(b,a){this.that.options.swipeModel.on&&(this._stopSwipe(!0),this.swipedown={x:b.pageX,y:b.pageY});return!0};b._onMousePQUp=function(b,a){this.mousedown=null};b._stopSwipe=function(b){b&&(this.swipedownPrev=this.swipedown=null);window.clearInterval(this.intID);window.cancelAnimationFrame(this.intID);this.intID=null};b._onMouseStop=function(b,a){var e=this,g=this.that;if(this.swipedownPrev){var d=g.options.swipeModel,
g=this.swipedownPrev,h=g.ts,f=(new Date).getTime()-h,k=b.pageX,m=b.pageY,v=k-g.x,p=m-g.y;if(Math.sqrt(v*v+p*p)/f>d.ratio){var u=0,q=d.repeat;e._stopSwipe();var r=function(){u+=d.speed;q--;e._onMouseDrag({pageX:k+u*v/f,pageY:m+u*p/f});0<q?e.intID=window.requestAnimationFrame(r):e._stopSwipe(!0)};r()}else e.swipedown=null,e.swipedownPrev=null}};b._onMouseDrag=function(b,a){var e=this.that.options;if(this.swipedown){var g=this.swipedown,d=g.x,h=g.y,f=b.pageX,k=b.pageY;this.swipedownPrev={x:d,y:h,ts:(new Date).getTime()};
var m=e.scrollModel.smooth;if(!e.virtualY||m)this.scrollVertSmooth(h,k),this.syncScrollBarVert();e.virtualX&&!m||"flex"===e.width||(this.scrollHorSmooth(d,f),this.syncScrollBarHor());g.x=f;g.y=k}return!0};b.updateTableY=function(b){if(0==b)return!1;var a=this.that,e=this.getTableForVertScroll(),a=a.iRefresh.getEContHt();if(!e||!e.length)return!1;var g=e.data("offsetHeight")-1,d=this.scrollTop-b;this.setScrollTop(0>d?0:0>b&&0<a-g+d?g-a:d,e,a);return!0};b.setScrollTop=function(b,a,e){0<=b&&(this.scrollTop=
b=Math.round(b),a.parent("div").scrollTop(b))};b.getScrollLeft=function(b){return this.scrollLeft};b.getScrollTop=function(b){return this.scrollTop};b.setScrollLeft=function(b,a,e,g){0<=b&&(this.scrollLeft=b=Math.round(b),e=e?e.parent():f(),e=e.add(a?a.parent("div"):f()),e.scrollLeft(b))};b.scrollVertSmooth=function(b,a){b!=a&&this.updateTableY(a-b)};b.scrollHorSmooth=function(b,a){if(b!=a){var e=this.that,g=e.options,d=a-b,h=this.getTableForHorScroll(),f=this.getTableHeaderForHorScroll(),e=e.iRefresh.getEContWd();
if(h||f){var k=h?h:f,g=g.virtualX?this.getScrollWidth(k):k.data("scrollWidth"),d=this.scrollLeft-d;this.setScrollLeft(0>d?0:0>g-e-d?g-e:d,h,f,e)}}};b.syncViewWithScrollBarVert=function(b){if(null!=b){var a=this.that,e=this.getTableForVertScroll();if(e&&e.length){var g=a.options;g.editModel.indices&&a.blurEditor({force:!0});var d=e.data("offsetHeight"),a=a.iRefresh.getEContHt();b*=d-a;if((!d||!a)&&g.debug)throw"_syncViewWithScrollBarVert !scrollHt || !contHt";0>b&&(b=0);this.setScrollTop(b,e,a)}}};
b.syncViewWithScrollBarHor=function(b){if(null!=b){var a=this.that,e=this.getTableForHorScroll(),g=this.getTableHeaderForHorScroll();if(e||g){var d=a.options;d.editModel.indices&&a.blurEditor({force:!0});var h=e?e:g,d=d.virtualX?this.getScrollWidth(h):h.data("scrollWidth"),a=a.iRefresh.getEContWd();b*=d-a;d&&a&&(0>b&&(b=0),this.setScrollLeft(b,e,g,a))}}};b.resetMargins=function(){this.scrollTop=this.scrollLeft=0};b.syncHeaderViewWithScrollBarHor=function(b){if(null!=b){var a=this.that,e=this.getTableHeaderForHorScroll();
if(e){var g=a.options,d=g.freezeCols;g.editModel.indices&&a.blurEditor({force:!0});var g=e.data("scrollWidth"),h=a.iRefresh.getEContWd();b=m.call(a,d,b+d);g&&h&&(0>b&&(b=0),e.css("marginLeft",-b))}}};b.syncScrollBarVert=function(){var b=this.that,a=this.getTableForVertScroll();if(a&&a.length){var a=a.data("offsetHeight"),e=b.iRefresh.getEContHt(),a=this.scrollTop/(a-e);0<=a&&1>=a&&b.$vscroll.hasClass("pq-sb-vert")&&b.$vscroll.pqScrollBar("option","ratio",a)}};b.syncScrollBarHor=function(){var b=this.that,
a=b.options,e=this.getTableForHorScroll(),g=this.getTableHeaderForHorScroll();if(e||g)e=e?e:g,a=a.virtualX?this.getScrollWidth(e):e.data("scrollWidth"),e=b.iRefresh.getEContWd(),a=this.scrollLeft/(a-e),0<=a&&1>=a&&b.$hscroll.hasClass("pq-sb-horiz")&&b.$hscroll.pqScrollBar("option","ratio",a)};b.getTableForVertScroll=function(){var b=this.that,a=b.pqpanes;if((b=b.$tbl)&&b.length)return a.h&&a.v?b=f([b[2],b[3]]):a.v?b=f([b[0],b[1]]):a.h&&(b=f(b[1])),b};b.getTableForHorScroll=function(){var b=this.that,
a=b.pqpanes,e=[],g=b.$tbl;if(g&&g.length)return a.h&&a.v?e.push(g[1],g[3]):a.v?e.push(g[1]):a.h?e.push(g[0],g[1]):e.push(g[0]),b.tables.length&&(b=b.tables[0].$tbl,a.v?e.push(b[1]):e.push(b[0])),f(e)};b.getTableHeaderForHorScroll=function(){var b=this.that,a=b.pqpanes;if((b=b.$tbl_header)&&b.length)return b=a.vH?f(b[1]):f(b[0]),b.parent()};b.scrollRowNonVirtual=function(b){var a=this.that,e=a.options,g=b.rowIndxPage,d=b.rowIndx;b=a.iRefresh.getEContHt();g=null==g?d-a.rowIndxOffset:g;e=parseInt(e.freezeRows);
if(!(g<e)){var e=a.get$Tbl(g),h=a.getRow({rowIndxPage:g})[0];h&&(a=e[0].offsetTop+1,g=h.offsetHeight,d=this.getScrollTop(),h=h.offsetTop,0>a+h-d?(a=a+h+-1,this.setScrollTop(0>a?0:a,e,b),this.syncScrollBarVert()):h+g-d>b&&(this.setScrollTop(g+h-b,e,b),this.syncScrollBarVert()))}};b.scrollColumnNonVirtual=function(b){var a=this.that,e=b.colIndx,e=null==e?a.getColIndx({dataIndx:b.dataIndx}):e,g=a.options.freezeCols;if(!(e<g)){b=a._calcRightEdgeCol(e).width;var e=a._calcRightEdgeCol(e-1).width,g=a._calcRightEdgeCol(g-
1).width,d=this.getTableForHorScroll(),h=this.getTableHeaderForHorScroll(),a=a.iRefresh.getEContWd(),f=this.scrollLeft;b-f>a?(this.setScrollLeft(b-a,d,h,a),this.syncScrollBarHor()):e-g<f&&(this.setScrollLeft(e-g,d,h,a),this.syncScrollBarHor())}}})(jQuery);
(function(f){var k=null,m=!1,b="",c=f.paramquery.pqGrid.prototype,a=c.options,e={on:!0,header:!0,zIndex:1E4},g={on:!0,compare:"byVal",select:!0,validate:!0,allowInvalid:!0,type:"replace"};c.copy=function(){k=new d(this);k.copy();k=null};c.paste=function(){k=new d(this);k.paste();k=null};a.pasteModel=a.pasteModel||g;a.copyModel=a.copyModel||e;var d=function(a,b){var c;this.that=a;b&&b.hasClass("pq-grid-row")?(this.rowIndx=a.getRowIndx({$tr:b}).rowIndx,this.dataIndx=null):b&&b.hasClass("pq-grid-cell")?
(c=a.getCellIndices({$td:b}),this.rowIndx=c.rowIndx,this.dataIndx=c.dataIndx):this.dataIndx=this.rowIndx=null},c=d.prototype;c.createClipBoard=function(){var a=f("#pq-grid-excel-div"),a=this.that.options.copyModel,b=f("#pq-grid-excel");0==b.length&&(a=f("<div id='pq-grid-excel-div'  style='position:fixed;top:20px;left:20px;height:1px;width:1px;overflow:hidden;z-index:"+a.zIndex+";'/>").appendTo(document.body),b=f("<textarea id='pq-grid-excel' autocomplete='off'  style='overflow:hidden;height:10000px;width:10000px;opacity:0' />").appendTo(a),
b.css({opacity:0}));b.select()};c.destroyClipBoard=function(){var a=this.that,b,c=a.iCells.getFocusSelection({old:!0});c?b=a.getCell({rowIndx:c.rowIndx,dataIndx:c.dataIndx}):(c=a.iRows.getFocusSelection({old:!0}))&&(b=a.getRow({rowIndx:c.rowIndx}));var c=f(window).scrollTop(),d=f(window).scrollLeft();b?b.attr("tabindex",0).focus():a.$cont.focus();a=f(window).scrollTop();b=f(window).scrollLeft();c==a&&d==b||window.scrollTo(d,c)};c.clearClipBoard=function(){f("#pq-grid-excel").val("")};c.copy=function(){var a=
f("#pq-grid-excel"),c=this.that,d=c.colModel,e=d.length,g=c.iGenerateView.readCell,k=[],m=[];if(c.options.copyModel.on){for(var k=c.iRows.getSelection(),q=0,r=k.length;q<r;q++){for(var t=k[q],y=t.rowData,w=[],x=0;x<e;x++)t=d[x],!1!==t.copy&&w.push(g(y,t));x=w.join("\t");m.push(x)}k=c.iCells.getSelection();d=c=null;w=[];q=0;for(r=k.length;q<r;q++)t=k[q],c=t.rowIndx,y=t.rowData,t=t.column,!1!==t.copy&&(null!=d&&c!=d?(x=w.join("\t"),w=[],m.push(x),d=c):null==d&&(d=c),w.push(g(y,t)));m.push(w.join("\t"));
x=m.join("\n");a.length&&(a.val(x),a.select());b=x}};c.paste=function(){var a=this.that,c=f("#pq-grid-excel"),d=c.length?c.val():b,d=d.replace(/\n$/,""),c=d.split("\n"),e=c.length,g,k=a.colModel,m=a.iGenerateView.readCell,q=a.options.pasteModel,r="row",t=k.length;if(q.on&&0!=d.length&&0!=e){d={rows:c};if(!1===a._trigger("beforePaste",null,d))return!1;var d=q.type,y,w,x,z,B=a.iRows.getSelectionCurPage();B&&B.length||(r="cell",B=a.iCells.getSelectionCurPage());B&&B.length?(y=B[0].rowIndx,x=B[B.length-
1].rowIndx,"cell"==r&&(w=a.getColIndx({dataIndx:B[0].dataIndx}),z=a.getColIndx({dataIndx:B[B.length-1].dataIndx}))):z=w=x=y=0;var G,A;"replace"==d?(G=y,A=x-y+1<e?"extend":"repeat"):"append"==d?(G=x+1,A="extend"):"prepend"==d&&(G=y,A="extend");var E;y="extend"==A?e:x-y+1;var C;x=0;for(var B=[],F=e=0;F<y;F++){var D=c[x],I=F+G,H="replace"==d?a.getRowData({rowIndx:I}):null,L=H?{}:null,K={};void 0===D&&"repeat"===A&&(x=0,D=c[x]);x++;var N=D.split("\t");if(!g)if("cell"==r){g=N.length;E=z-w+1<N.length?"extend":
"repeat";g="extend"==E?g:z-w+1;if(isNaN(g))throw"lenH NaN. assert failed.";g+w>t&&(g=t-w)}else g=t,w=0;var Q=0,U=0,D=0;C=g;for(U=0;U<C;U++){var M=k[U+w],J=N[Q],P=M.dataIndx;M.hidden?"extend"==E&&C+w<t&&C++:(void 0===J&&"repeat"===E&&(Q=0,J=N[Q]),Q++,K[P]=J,L&&(L[P]=m(H,M)))}!1==f.isEmptyObject(K)&&(N="update",null==H&&(N="add"),B.push({newRow:K,rowIndx:I,rowData:H,oldRow:L,type:N}),e++)}d={rowList:B,source:"paste",allowInvalid:q.allowInvalid,validate:q.validate};a._digestData(d);q.select&&("cell"==
r?a.iCells.selectBlock({initRowIndx:G,finalRowIndx:G+e-1,initColIndx:w,finalColIndx:"extend"==E?w+g-1+D:z}):a.iRows.selectRange({initRowIndx:G,finalRowIndx:G+e-1}));a.refreshView();d={rows:c};a._trigger("paste",null,d)}};f(document).unbind(".pqExcel").bind("keydown.pqExcel",function(a){if(a.ctrlKey||a.metaKey){var b=f(a.target);if(b.hasClass("pq-grid-row")||b.hasClass("pq-grid-cell")||b.is("#pq-grid-excel")||b.is("div.pq-grid-cont")){var c=b.closest(".pq-grid");if(k||b.length&&c.length){if(!k){try{var e=
c.pqGrid("getInstance").grid}catch(g){return!0}k=new d(e,b);k.createClipBoard()}"67"==a.keyCode||"99"==a.keyCode?k.copy():"86"==a.keyCode||"118"==a.keyCode?(m=!0,k.clearClipBoard(),window.setTimeout(function(){k&&(k.paste(),k.destroyClipBoard(),k=null);m=!1},0)):(b=f("#pq-grid-excel"),b.length&&document.activeElement==b[0]&&k.that._onKeyPressDown(a))}}}}).bind("keyup.pqExcel",function(a){var b=a.keyCode;m||!k||a.ctrlKey||a.metaKey||-1==f.inArray(b,[17,91,93,224])||(k.destroyClipBoard(),k=null)})})(jQuery);
(function(f){var k=f.paramquery.pqGrid.prototype.options,m={on:!0,checkEditable:!0,checkEditableAdd:!1,allowInvalid:!0};k.historyModel=k.historyModel||m;k=(f.paramquery.cHistory=function(b){var c=this;this.that=b;this.options=b.options;this.records=[];this.id=this.counter=0;var a=b.eventNamespace,e=b.widgetEventPrefix.toLowerCase();b.element.on(e+"keydown"+a,function(a,b){if(c.belongs(a))return c._onKeyDown(a,b)});b.element.on(e+"dataavailable"+a,function(a,b){c.belongs(a)&&"filter"!=b.source&&c.reset()})}).prototype=
new f.paramquery.cClass;k._onKeyDown=function(b,c){var a=b.ctrlKey||b.metaKey;if(a&&"90"==b.keyCode)return this.undo(),!1;if(a&&"89"==b.keyCode)return this.redo(),!1};k.resetUndo=function(){if(0==this.counter)return!1;this.counter=0;this.that._trigger("history",null,{type:"resetUndo",num_undo:0,num_redo:this.records.length-this.counter,canUndo:!1,canRedo:!0})};k.reset=function(){if(0==this.counter&&0==this.records.length)return!1;this.records=[];this.id=this.counter=0;this.that._trigger("history",
null,{num_undo:0,num_redo:0,type:"reset",canUndo:!1,canRedo:!1})};k.increment=function(){var b=this.records,c=b.length;this.id=c?b[c-1].id+1:0};k.push=function(b){var c=this.canRedo(),a=this.records,e=this.counter;a.length>e&&a.splice(e,a.length-e);a[e]=f.extend({id:this.id},b);this.counter++;b=this.that;var g,d;1==this.counter&&(g=!0);c&&this.counter==a.length&&(d=!1);b._trigger("history",null,{type:"add",canUndo:g,canRedo:d,num_undo:this.counter,num_redo:0})};k.canUndo=function(){return 0<this.counter?
!0:!1};k.canRedo=function(){return this.counter<this.records.length?!0:!1};k.undo=function(){var b=this.canRedo(),c=this.that,a=this.options.historyModel,e=this.records;if(0<this.counter)this.counter--;else return!1;for(var e=e[this.counter].rowList,g=[],d=0,h=e.length;d<h;d++){var f=e[d],k=f.newRow,m=f.rowData,v=f.type,p=f.oldRow,f=f.rowIndx;"update"==v?(f=c.getRowIndx({rowData:m}).rowIndx,g.push({type:v,rowIndx:f,rowData:m,oldRow:k,newRow:p})):"add"==v?g.push({type:"delete",rowData:k}):"delete"==
v&&g.push({type:"add",rowIndx:f,newRow:m})}c._digestData({history:!1,source:"undo",checkEditable:a.checkEditable,checkEditableAdd:a.checkEditableAdd,allowInvalid:a.allowInvalid,rowList:g});c.refreshView();var u,q;!1===b&&(u=!0);0==this.counter&&(q=!1);c._trigger("history",null,{canUndo:q,canRedo:u,type:"undo",num_undo:this.counter,num_redo:this.records.length-this.counter});return!0};k.redo=function(){var b=this.canUndo(),c=this.that,a=this.options.historyModel,e=this.counter,g=this.records;if(e==
g.length)return!1;for(var e=g[e].rowList,d=[],h=0,f=e.length;h<f;h++){var k=e[h],m=k.newRow,v=k.rowData,p=k.type,u=k.oldRow,k=k.rowIndx;"update"==p?(k=c.getRowIndx({rowData:v}).rowIndx,d.push({type:p,rowIndx:k,rowData:v,oldRow:u,newRow:m})):"add"==p?d.push({type:"add",rowIndx:k,newRow:m}):"delete"==p&&d.push({type:"delete",rowData:v})}c._digestData({history:!1,source:"redo",checkEditable:a.checkEditable,checkEditableAdd:a.checkEditableAdd,allowInvalid:a.allowInvalid,rowList:d});c.refreshView();this.counter<
g.length&&this.counter++;var q,r;!1==b&&(q=!0);this.counter==this.records.length&&(r=!1);c._trigger("history",null,{canUndo:q,canRedo:r,type:"redo",num_undo:this.counter,num_redo:this.records.length-this.counter});return!0};f.paramquery.pqGrid.prototype.history=function(b){return this.iHistory[b.method](b)}})(jQuery);
(function(f){var k=f.ui.autocomplete.prototype,m=k._renderMenu,b=k._renderItem;k._renderMenu=function(b,a){m.call(this,b,a);var e=this.options.selectItem;if(e&&e.on){var e=e.cls,e=void 0===e?"ui-state-highlight":e,g=this.element.val();g&&e&&f("a",b).filter(function(){return f(this).text()===g}).addClass(e)}};k._renderItem=function(c,a){var e=b.call(this,c,a),g=this.options.highlightText;if(g&&g.on){var d=this.element.val();if(d){var d=new RegExp("("+d+")","i"),h=a.label;if(d.test(h)){var f=g.style,
g=g.cls,h=h.replace(d,"<span style='"+(void 0===f?"font-weight:bold;":f)+"' class='"+(void 0===g?"":g)+"'>$1</span>");e.find("a").html(h)}}}return e};f.widget("paramquery.pqTooltip",f.ui.tooltip,{options:{items:"td.pq-has-tooltip,td[title]",position:{my:"center top",at:"center bottom"},content:function(){var b=f(this),a=b.closest(".pq-grid").pqGrid("getInstance").grid,e=a.getCellIndices({$td:b});return(a=a.data({rowIndx:e.rowIndx,dataIndx:e.dataIndx,data:"pq_valid"}).data)?(b=a.icon,a=a.msg,(""==
b?"":"<span class='ui-icon "+b+" pq-tooltip-icon'></span>")+(null!=a?a:"")):b.attr("title")}},_create:function(){this._super();var b=this.element,a=this.eventNamespace;b.on("pqtooltipopen"+a,function(a,b){var c=f(a.target),h=f(a.originalEvent.target);h.on("remove",function(a){c.pqTooltip("close",a,!0)});b.tooltip.css("zIndex",h.zIndex()+5);if(c.is(".pq-grid")){var k=c.pqGrid("getCellIndices",{$td:h}),m=k.dataIndx,s;(s=c.pqGrid("getRowData",{rowIndx:k.rowIndx}))&&(s=s.pq_celldata)&&(s=s[m])&&(s=s.pq_valid)&&
(m=s,k=m.style,b.tooltip.addClass(m.cls),m=b.tooltip.attr("style"),b.tooltip.attr("style",m+";"+k));c.find("div.pq-sb-horiz,div.pq-sb-vert").on("pqscrollbardrag",function(a,b){a.currentTarget=h[0];c.pqTooltip("close",a,!0)})}});b.on("pqtooltipclose"+a,function(a,b){var c=f(a.target);f(a.originalEvent.target).off("remove");c.is(".pq-grid")&&c.find("div.pq-sb-horiz,div.pq-sb-vert").off("pqscrollbardrag")})}})})(jQuery);
(function(f){f.paramquery.filter=function(){var b={begin:{text:"Begins With",TR:!0,string:!0},between:{text:"Between",TR:!0,string:!0,date:!0,number:!0},notbegin:{text:"Does not begin with",TR:!0,string:!0},contain:{text:"Contains",TR:!0,string:!0},notcontain:{text:"Does not contain",TR:!0,string:!0},equal:{text:"Equal To",TR:!0,string:!0,bool:!0},notequal:{text:"Not Equal To",TR:!0,string:!0},empty:{text:"Empty",TR:!1,string:!0,bool:!0},notempty:{text:"Not Empty",TR:!1,string:!0,bool:!0},end:{text:"Ends With",
TR:!0,string:!0},notend:{text:"Does not end with",TR:!0,string:!0},less:{text:"Less Than",TR:!0,number:!0,date:!0},lte:{text:"Less than or equal",TR:!0,number:!0,date:!0},range:{TR:!0,string:!0,number:!0,date:!0},regexp:{TR:!0,string:!0,number:!0,date:!0},great:{text:"Great Than",TR:!0,number:!0,date:!0},gte:{text:"Greater than or equal",TR:!0,number:!0,date:!0}};return{conditions:b,getAllConditions:function(){var c=[],a;for(a in b)c.push(a);return c}(),getConditions:function(c){var a=[],e;for(e in b)b[e][c]&&
a.push(e);return a},getTRConditions:function(){var c=[],a;for(a in b)b[a].TR&&c.push(a);return c}(),getWTRConditions:function(){var c=[],a;for(a in b)b[a].TR||c.push(a);return c}()}}();f.paramquery.filter.rules={};f.paramquery.filter.rules.en={begin:"Begins With",between:"Between",notbegin:"Does not begin with",contain:"Contains",notcontain:"Does not contain",equal:"Equal To",notequal:"Not Equal To",empty:"Empty",notempty:"Not Empty",end:"Ends With",notend:"Does not end with",less:"Less Than",lte:"Less than or equal",
great:"Great Than",gte:"Greater than or equal"};var k=function(b){this.that=b};f.paramquery.cFilterData=k;var m=k.prototype;k.conditions={equal:function(b,c){if(b==c)return!0},contain:function(b,c){if(-1!=b.indexOf(c))return!0},notcontain:function(b,c){if(-1==b.indexOf(c))return!0},empty:function(b){if(0==b.length)return!0},notempty:function(b){if(0<b.length)return!0},begin:function(b,c){if(0==(b+"").indexOf(c))return!0},notbegin:function(b,c){if(0!=b.indexOf(c))return!0},end:function(b,c){var a=
b.lastIndexOf(c);if(-1!=a&&a+c.length==b.length)return!0},notend:function(b,c){var a=b.lastIndexOf(c);if(-1==a||a+c.length!=b.length)return!0},regexp:function(b,c){if(c.test(b))return c.lastIndex=0,!0},notequal:function(b,c){if(b!=c)return!0},great:function(b,c){if(b>c)return!0},gte:function(b,c){if(b>=c)return!0},between:function(b,c,a){if(b>=c&&b<=a)return!0},range:function(b,c){if(-1!=f.inArray(b,c))return!0},less:function(b,c){if(b<c)return!0},lte:function(b,c){if(b<=c)return!0}};k.convert=function(b,
c){b=null==b?"":b;"string"==c?b=f.trim(b).toUpperCase():"date"==c?b=Date.parse(b):"integer"==c?b=parseInt(b):"float"==c?b=parseFloat(b):"bool"==c&&(b=String(b).toLowerCase());return b};m.isMatchCellSingle=function(b,c){var a=b.dataType,e=b.value,g=b.value2,d=b.cbFn,h=c[b.dataIndx],h="regexp"==b.condition?null==h?"":h:k.convert(h,a);return d(h,e,g)?!0:!1};m.isMatchRow=function(b,c,a){if(0==c.length)return!0;for(var e=0;e<c.length;e++){var g=this.isMatchCell(c[e],b);if("OR"==a&&g)return!0;if("AND"==
a&&!g)return!1}if("AND"==a)return!0;if("OR"==a)return!1};m.getQueryStringFilter=function(){var b=this.that,c=b.options,a=c.stringify,c=c.filterModel,e=c.mode,b=this.getFilterData({CM:b.colModel,location:"remote"}),g="";c&&c.on&&b&&(b.length?(c={mode:e,data:b},g=!1===a?c:JSON.stringify(c)):g="");return g};m.filterLocalData=function(b){b=b||{};var c=this.that,a=b.apply;b=this.getFilterData({CM:!1===a?b.CM:c.colModel});var e=c.options,g=e.dataModel,d=c.iSort,h=g.data,f=g.dataUF,k=e.filterModel,m=k.multiple,
e=k?k.mode:null;h||(h=g.data=[]);f||(f=g.dataUF=[]);!1===a&&(h=h.slice());if(f.length)h.push.apply(h,f),0==d.readSorter().length&&d.sortLocalData(h),f=g.dataUF=[];else if(b.length)d.saveOrder();else return{data:h,dataUF:f};this.isMatchCell=m?this.isMatchCellMultiple:this.isMatchCellSingle;if(k.on&&e&&b&&b.length&&h.length)for(g=h.length-1;0<=g;g--)this.isMatchRow(h[g],b,e)||f.push(h.splice(g,1)[0]);!1!==a&&(c._queueATriggers.filter={ui:{type:"local",filter:b}});return{data:h,dataUF:f}};m.getFilterData=
function(b){var c=b.CM;if(!c)throw"CM N/A";var a=c.length,e=b.location;b=this.that.options.filterModel.multiple;for(var g=f.paramquery.filter.getAllConditions,d=f.paramquery.filter.getTRConditions,h=[],k=f.paramquery.cFilterData,m=function(a,b,c){return"function"==typeof a?!0:"between"==a?null!=b&&""!==b||null!=c&&""!==c?!0:!1:-1!=f.inArray(a,g)?null!=b&&""!==b||-1==f.inArray(a,d)?!0:!1:!0},s=function(a,b){return"remote"==e?(null==a?"":a).toString():k.convert(a,b)},v=0;v<a;v++){var p=c[v],u=p.dataIndx,
q=p.dataType,q=q&&"function"!=typeof q?q:"string",r=p.filter;if(b){if((r=p.filterModel)&&r.on){for(var t=[],y=r.mode,w=r.filters,p=0;p<w.length;p++){var r=w[p],x=r.value,z=r.condition;m(z,x)&&(x=s(x,q),t.push({value:x,condition:z}))}h.push({dataIndx:u,mode:y,dataType:q,filters:t})}}else if(r&&r.on&&(x=r.value,t=r.value2,z=r.condition,m(z,x,t))){if("between"==z)""===x||null==x?(z="lte",x=s(t,q)):""===t||null==t?(z="gte",x=s(x,q)):(x=s(x,q),t=s(t,q));else if("regexp"==z)if("remote"==e)x=x.toString();
else{if("string"==typeof x)try{var B=r.modifiers,B=B?B:"gi",x=new RegExp(x,B)}catch(G){x=/.*/}}else if("range"==z)if(null==x)continue;else if("string"==typeof x)x=s(x,q),x=x.split(/\s*,\s*/);else{if(x&&"function"==typeof x.push){if(0==x.length)continue;x=x.slice();p=0;for(r=x.length;p<r;p++)x[p]=s(x[p],q)}}else x=s(x,q);h.push({dataIndx:u,value:x,value2:t,condition:z,dataType:q,cbFn:"remote"==e?"":"function"==typeof z?z:k.conditions[z]})}}return h}})(jQuery);
(function(f){f=(f.paramquery.cSort=function(f){this.that=f;this.sorters=[];this.cancel=!1}).prototype;f.cancelSort=function(){this.cancel=!0};f.resumeSort=function(){this.cancel=!1};f.readSorter=function(){var f=this.that.options,m=f.groupModel,b=m?m.dataIndx:null,c=m?m.dir:null,a=[];if(m&&b)for(m=0;m<b.length;m++)a.push({dataIndx:b[m],dir:c&&c[m]?c[m]:"up"});b=f.sortModel;f=b.sorter;b=b.single;f&&f.length&&(b&&(f=[f[0]]),a=a.concat(f));return a};f.setSingle=function(f){this.single=f};f.getSingle=
function(){return this.single};f.readSingle=function(){return this.that.options.sortModel.single};f.writeSingle=function(f){this.that.options.sortModel.single=f};f.setCancel=function(f){this.cancel=f};f.getCancel=function(){return this.cancel};f.readCancel=function(){return this.that.options.sortModel.cancel};f.writeCancel=function(f){this.that.options.sortModel.cancel=f};f.writeSorter=function(f){var m=this.that.options,b=m.sortModel,c=m.groupModel,m=c?c.dataIndx:null,a=c?c.dir:null;if(m){a||(c.dir=
[]);for(c=0;c<m.length;c++){var e=f[c];if(m[c]!=e.dataIndx)throw"gDataIndx!=sorter.dataIndx";a[c]=e.dir}f.splice(0,m.length)}b.sorter=f};f.refreshSorter=function(f){f=f||{};var m=f.sorter,b=m[0].dataIndx,c=m[0].dir,a=f.single,m=f.cancel,e=this.that.options.groupModel,g=e?e.dataIndx:null,d=g?g.length:0,h=-1;f=this.readSorter();if(null==a)throw"sort single N/A";if(e)for(e=0;e<g.length;e++)g[e]==b&&(h=e);-1<h?f[h].dir="up"===f[h].dir?"down":"up":null!=b&&(a?f[d]&&f[d].dataIndx==b?(b=f[d].dir,b="up"===
b?"down":m&&"down"===b?"":"up",""===b?f.length--:f[d].dir=b):f[d]={dataIndx:b,dir:c?c:"up"}:(d=this.inSorters(f,b),-1<d?(b=f[d].dir,"up"==b?f[d].dir="down":m&&"down"==b?f.splice(d,1):1==f.length?f[d].dir="up":f.splice(d,1)):f.push({dataIndx:b,dir:"up"})));return f};f.saveOrder=function(f){var m=this.that.options.dataModel;f=m.data;if(!(!f||!f.length||m.dataUF&&m.dataUF.length||this.getSorter().length&&null!=f[0].pq_order))for(var m=0,b=f.length;m<b;m++)f[m].pq_order=m};f.getQueryStringSort=function(){if(this.cancel)return"";
var f=this.sorters,m=this.that.options.stringify;return f.length?!1===m?f:JSON.stringify(f):""};f.getSorter=function(){return this.sorters};f.setSorter=function(f){this.sorters=f.slice(0)};f.inSorters=function(f,m){for(var b=-1,c=0;c<f.length;c++)if(f[c].dataIndx==m){b=c;break}return b};f.sortLocalData=function(f){for(var m=this.that,b=m.colModel,c=this.sorters,a=0;a<c.length;a++){var e=c[a],g=m.getColIndx({dataIndx:e.dataIndx}),g=b[g],d=g.sortType;e.dataType=g.dataType;e.sortType=d}c.length||(c=
[{dataIndx:"pq_order",dir:"up",dataType:"integer"}]);return this._sortLocalData(c,f)};f._sortLocalData=function(f,m){function b(a,b,c,d){a=a[c];b=b[c];a=a?parseInt(a,10):0;b=b?parseInt(b,10):0;return(a-b)*d}function c(a,b,c,d){a=a[c];b=b[c];a=a?Date.parse(a):0;b=b?Date.parse(b):0;return(a-b)*d}function a(a,b,c,d){a=(a[c]+"").replace(/,/g,"");b=(b[c]+"").replace(/,/g,"");a=a?parseFloat(a):0;b=b?parseFloat(b):0;return(a-b)*d}function e(a,b,c,d){a=a[c];b=b[c];a=a?a:"";b=b?b:"";c=0;a>b?c=1:a<b&&(c=-1);
return c*d}function g(a,b,c,d){a=a[c];b=b[c];a=a?a.toUpperCase():"";b=b?b.toUpperCase():"";c=0;a>b?c=1:a<b&&(c=-1);return c*d}function d(a,b,c,d){a=a[c];b=b[c];c=0;if(a&&!b||!1===a&&null===b)c=1;else if(b&&!a||!1===b&&null===a)c=-1;return c*d}if(null==m||0==m.length)return[];if(!f||!f.length)return m;var h=this.that,l=h.columns,n=h.iGenerateView.readCell;(function(){for(var h=[],v=[],p=[],u=f.length,q=0;q<u;q++){var r=f[q],t=r.dataIndx,y="up"==r.dir?1:-1,w=r.sortType,r=r.dataType;v[q]=t;p[q]=y;h[q]=
"integer"==r?b:"float"==r?a:"function"==typeof r?function(a){return function(b,c,d,e){return a(b[d],c[d])*e}}(r):w?function(a){return function(b,c,d,e){return a(b,c,d)*e}}(w):"date"==r?c:"stringi"==r?g:"bool"==r?d:e;if((y=l[t])&&y.nested)for(q=0,w=m.length;q<w;q++)r=m[q],r[t]=n(r,y)}m=m.sort(function(a,b){for(var c=0,d=0;d<u&&(c=h[d](a,b,v[d],p[d]),0==c);d++);return c})})();return m}})(jQuery);
